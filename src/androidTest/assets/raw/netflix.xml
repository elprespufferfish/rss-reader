<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/" xmlns:blogger="http://schemas.google.com/blogger/2008" xmlns:georss="http://www.georss.org/georss" xmlns:gd="http://schemas.google.com/g/2005" xmlns:thr="http://purl.org/syndication/thread/1.0" version="2.0">
  <channel>
    <atom:id>tag:blogger.com,1999:blog-725338818844296080</atom:id>
    <lastBuildDate>Sat, 29 Aug 2015 23:43:29 +0000</lastBuildDate>
    <category>AWS</category>
    <category>cloud</category>
    <category>performance</category>
    <category>JavaScript</category>
    <category>Netflix</category>
    <category>api</category>
    <category>cloud architecture</category>
    <category>Cassandra</category>
    <category>UI</category>
    <category>Hadoop</category>
    <category>NetflixOSS</category>
    <category>fault-tolerance</category>
    <category>Netflix OSS</category>
    <category>scalability</category>
    <category>big data</category>
    <category>distributed</category>
    <category>Open source</category>
    <category>high volume distributed systems</category>
    <category>HTML5</category>
    <category>Netflix API</category>
    <category>reliability</category>
    <category>resiliency</category>
    <category>data science</category>
    <category>recommendations</category>
    <category>security</category>
    <category>Hystrix</category>
    <category>NoSQL</category>
    <category>TV</category>
    <category>chaos monkey</category>
    <category>java</category>
    <category>machine learning</category>
    <category>simian army</category>
    <category>user interface</category>
    <category>Genie</category>
    <category>Pig</category>
    <category>analytics</category>
    <category>availability</category>
    <category>data pipeline</category>
    <category>database</category>
    <category>high volume</category>
    <category>personalization</category>
    <category>Astyanax</category>
    <category>SimpleDB</category>
    <category>WebKit</category>
    <category>autoscaling</category>
    <category>build</category>
    <category>cloud prize</category>
    <category>continuous delivery</category>
    <category>device</category>
    <category>innovation</category>
    <category>load balancing</category>
    <category>meetup</category>
    <category>node.js</category>
    <category>python</category>
    <category>“cloud architecture”</category>
    <category>Archaius</category>
    <category>CSS</category>
    <category>Cryptography</category>
    <category>DataStax</category>
    <category>Denominator</category>
    <category>EMR</category>
    <category>GPU</category>
    <category>Hack Day</category>
    <category>Hive</category>
    <category>Ipv6</category>
    <category>Karyon</category>
    <category>OSS</category>
    <category>Presto</category>
    <category>REST</category>
    <category>Reactive Programming</category>
    <category>Redis</category>
    <category>Ribbon</category>
    <category>accelerated compositing</category>
    <category>algorithms</category>
    <category>automation</category>
    <category>benchmark</category>
    <category>configuration</category>
    <category>configuration management</category>
    <category>content platform engineering</category>
    <category>coordination</category>
    <category>eureka</category>
    <category>failover</category>
    <category>lipstick</category>
    <category>logging</category>
    <category>memcache</category>
    <category>operational insight</category>
    <category>prediction</category>
    <category>predictive modeling</category>
    <category>rca</category>
    <category>reinvent</category>
    <category>root-cause analysis</category>
    <category>search</category>
    <category>unit test</category>
    <category>uptime</category>
    <category>Aegisthus</category>
    <category>Android</category>
    <category>Asgard</category>
    <category>Blitz4j</category>
    <category>CO2</category>
    <category>CUDA</category>
    <category>Cable</category>
    <category>Clojure</category>
    <category>DNS</category>
    <category>DSL</category>
    <category>Docker</category>
    <category>Dockerhub</category>
    <category>Dyn</category>
    <category>DynECT</category>
    <category>ELB</category>
    <category>Elastic Load Balancer</category>
    <category>FRP</category>
    <category>Flow</category>
    <category>Governator</category>
    <category>Groovy</category>
    <category>HBase</category>
    <category>IBM</category>
    <category>ISP</category>
    <category>Map-Reduce</category>
    <category>Mobile</category>
    <category>Paypal</category>
    <category>Playback</category>
    <category>Quality</category>
    <category>React</category>
    <category>Recipe</category>
    <category>Riot Games</category>
    <category>Route53</category>
    <category>Rx</category>
    <category>STAASH</category>
    <category>SWF</category>
    <category>Servo</category>
    <category>UltraDNS</category>
    <category>Velocity</category>
    <category>Wii U</category>
    <category>ZeroToDocker</category>
    <category>ZooKeeper</category>
    <category>adwords</category>
    <category>aminator</category>
    <category>angular</category>
    <category>appender</category>
    <category>architectural design</category>
    <category>architecture</category>
    <category>authentication</category>
    <category>billing</category>
    <category>caching</category>
    <category>chaos engineering</category>
    <category>ci</category>
    <category>classloaders</category>
    <category>collection</category>
    <category>concurrency</category>
    <category>conformity monkey</category>
    <category>cost management</category>
    <category>crypto</category>
    <category>dart</category>
    <category>data migration</category>
    <category>data visualization</category>
    <category>deadlock</category>
    <category>deep learning</category>
    <category>dependency injection</category>
    <category>device proliferation</category>
    <category>devops</category>
    <category>efficiency</category>
    <category>elasticsearch</category>
    <category>encoding</category>
    <category>energy</category>
    <category>eucalyptus</category>
    <category>evcache</category>
    <category>falcor</category>
    <category>flamegraphs</category>
    <category>footprint</category>
    <category>functional reactive</category>
    <category>garbage</category>
    <category>garbage collection</category>
    <category>gc</category>
    <category>green</category>
    <category>https</category>
    <category>ice</category>
    <category>initialization</category>
    <category>insights</category>
    <category>inter process communication</category>
    <category>isolation</category>
    <category>jclouds</category>
    <category>jenkins</category>
    <category>kafka</category>
    <category>lifecycle</category>
    <category>linux</category>
    <category>localization</category>
    <category>localization platform engineering</category>
    <category>locking</category>
    <category>locks</category>
    <category>log4j</category>
    <category>memcached</category>
    <category>message security layer</category>
    <category>modules</category>
    <category>monitoring</category>
    <category>msl</category>
    <category>negative keywords</category>
    <category>netflix graph</category>
    <category>neural networks</category>
    <category>observability</category>
    <category>operational excellence</category>
    <category>operational visibility</category>
    <category>optimization</category>
    <category>outage</category>
    <category>page generation</category>
    <category>payments</category>
    <category>phone</category>
    <category>prize</category>
    <category>pubsub</category>
    <category>pytheas</category>
    <category>real-time insights</category>
    <category>real-time streaming</category>
    <category>remote procedure calls</category>
    <category>renewable</category>
    <category>research</category>
    <category>rule engine</category>
    <category>scale</category>
    <category>scripting library</category>
    <category>shared libraries</category>
    <category>site reliability</category>
    <category>sqoop</category>
    <category>ssd</category>
    <category>ssl</category>
    <category>stream processing</category>
    <category>streaming</category>
    <category>suro</category>
    <category>synchronization</category>
    <category>tablet</category>
    <category>testability</category>
    <category>tls</category>
    <category>traffic optimization</category>
    <category>visualization</category>
    <category>websockets</category>
    <category>winner</category>
    <category>winners</category>
    <category>workflow</category>
    <category>zuul</category>
    <title>The Netflix Tech Blog</title>
    <description/>
    <link>http://techblog.netflix.com/</link>
    <managingEditor>noreply@blogger.com (Ashi Sheth)</managingEditor>
    <generator>Blogger</generator>
    <openSearch:totalResults>177</openSearch:totalResults>
    <openSearch:startIndex>1</openSearch:startIndex>
    <openSearch:itemsPerPage>25</openSearch:itemsPerPage>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-2485636233200643624</guid>
      <pubDate>Tue, 25 Aug 2015 21:48:00 +0000</pubDate>
      <atom:updated>2015-08-25T15:54:56.307-07:00</atom:updated>
      <title>From Chaos to Control - Testing the resiliency of Netflix’s Content Discovery Platform</title>
      <description>&lt;span style="color: black; font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;By:&lt;/span&gt;&lt;a href="https://www.linkedin.com/pub/leena-janardanan/0/881/788" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 14.6666666666667px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Leena Janardanan&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/pub/bruce-wobbe/0/395/197" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 14.6666666666667px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Bruce Wobbe&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/pub/vilas-veeraraghavan/5/a97/180" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 14.6666666666667px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Vilas Veeraraghavan&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 16px; font-weight: 700; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 16px; font-weight: 700; line-height: 1.38; white-space: pre-wrap;"&gt;Introduction&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Merchandising Application Platform (MAP) was conceived as a middle-tier service that would handle real time requests for content discovery. MAP does this by aggregating data from disparate data sources and implementing common business logic into one distinct layer. This centralized layer helps provide common experiences across device platforms and helps reduce duplicate, and sometimes, inconsistent business logic. In addition, it also allows recommendation systems - which are typically &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2013/03/system-architectures-for.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;pre-compute &lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;systems - to be de-coupled from the real time path. MAP can be compared to a big funnel through which most of the content discovery data on a user’s screen goes through and is processed.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;As an example, MAP generates localized row names for the personalized recommendations on the home page. This happens in real time, based on the locale of the user at the time the request is made. Similarly, application of maturity filters, localizing and sorting categories are examples of logic that lives in MAP.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="371px;" src="https://lh4.googleusercontent.com/wIk82c4gm0sTtkRhZ-LmXfYCgwWe1Cno_SqOC_Eum9Gn4r7EzujhSNfxyJV3pX9ssodqvrOnJ5Zcf-iT1zv-UdhHq6oWLpxCzqJoYgVrShcjzn7EgPhga-91jabI9r5zHBdifg" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span id="docs-internal-guid-367653c8-61ab-ba2b-68c7-a83649280718"&gt;&lt;span style="font-family: Arial; font-size: 12px; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;"&gt;Localized categories and row names, up-to-date My List and Continue Watching&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A classic example of duplicated but inconsistent business logic that MAP consolidated was the “next episode” logic - &amp;nbsp;the rule to determine if a particular episode was completed and the next episode should be shown. In one platform, it required that credits had started and/or 95% of the episode to be finished. In another platform, it was simply that 90% of the episode had to be finished. MAP consolidated this logic into one simple call that all devices now use. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &amp;nbsp;MAP also enables discovery data to be a mix of pre-computed and real time data. On the homepage, rows like My List, Continue Watching and Trending Now are examples of real time data whereas rows like “Because you watched” are pre-computed. As an example, if a user added a title to My List on a mobile device and decided to watch the title on a Smart TV, the user would expect My List on the TV to be up-to-date immediately. What this requires is the ability to selectively update some data in real time. MAP provides the APIs and logic to detect if data has changed and update it as needed. This allows us to keep the efficiencies gained from pre-compute systems for most of the data, while also having the flexibility to keep other data fresh.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;MAP also supports business logic required for various A/B tests, many of which are active on Netflix at any given time. Examples include: inserting non-personalized &amp;nbsp;rows, changing the sort order for titles within a row and changing the contents of a row.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The services that generate this data are a mix of pre-compute and real time systems. Depending on the data, the calling patterns from devices for each type of data also vary. Some data is fetched once per session, some of it is pre-fetched when the user navigates the page/screen and other data is refreshed constantly (My List, Recently Watched, Trending Now).&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Architecture&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;MAP is comprised of two parts - a server and a client. The server is the workhorse which does all the data aggregation and applies business logic. This data is then stored in caches (see &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2013/02/announcing-evcache-distributed-in.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;EVCache&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;) the client reads. The client primarily serves the data and is the home for resiliency logic. The client decides when a call to the server is taking too long, when to open a circuit (see &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/11/hystrix.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Hystrix&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;) and, if needed, what type of fallback should be served. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="351px;" src="https://lh5.googleusercontent.com/0e2JGrtlKgheMZNYJAwxufIAuj0b2S8-g_6aZfYoLpwuGqF99yXPeL8H2fGvz8ayXRT4Peo6jXuDP_OV2led2bqCyoYAhNkC1VwEX2ZL8bygGMy0X6WkivtpNMZV5ZJ1s7IsgA" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: #222222; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;MAP is in the critical path of content discovery. Without a well thought out resiliency story, any failures in MAP would severely impact the user experience and Netflix's availability. As a result, we spend a lot of time thinking about how to make MAP resilient. &lt;/span&gt;&lt;br /&gt;&lt;span style="background-color: transparent; color: #222222; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 16px; font-weight: 700; line-height: 1.38; white-space: pre-wrap;"&gt;Challenges in making MAP resilient&lt;/span&gt;&lt;br /&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;Two approaches commonly used by MAP to improve resiliency are:&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;      (1) Implementing fallback responses for failure scenarios&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;      (2) Load shedding - either by opening circuits to the downstream services or by limiting retries wherever possible.&lt;/span&gt;&lt;br /&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;There are a number of factors that make it challenging to make MAP resilient:&amp;nbsp;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt; (1) MAP has numerous dependencies, which translates to multiple points of failure. In addition, the behavior of these dependencies evolves over time, especially as A/B tests are launched, and a solution that works today may not do so in 6 months. At some level, this is a game of Whack-A-Mole as we try to keep up with a constantly changing eco system.&lt;/span&gt;&lt;br /&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt; &lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;(2) There is no one type of fallback that works for all scenarios: &lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;In some cases, an empty response is the only option and devices have to be able to handle that gracefully. E.g. data for the "My List" row couldn't be retrieved. &lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;Various degraded modes of performance can be supported. E.g. if the latest personalized home page cannot be delivered, fallbacks can range from stale, personalized recommendations to non-personalized recommendations. &lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="color: #222222; font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;In other cases, an exception/error code might be the right response, indicating to clients there is a problem and giving them the ability to adapt the user experience - skip a step in a workflow, request different data, etc.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 16px; font-weight: 700; line-height: 1.38; white-space: pre-wrap;"&gt;How do we go from Chaos to Control?&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Early on, failures in MAP or its dependent services caused &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2015/02/sps-pulse-of-netflix-streaming.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;SPS&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; dips like this:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="118px;" src="https://lh6.googleusercontent.com/iE2cW5z22HknIM_RRNPe0TuqTAJHpz32qb6OehQxl6MnLtzopfHVG6CBRVwbo7nfpgQbOUHMezY49smZ6eBpVAQi3bhzFLc6wmVINcT7iB_VofnMUtLL0mFZWjtNaFqoXdE7_Q" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;It was clear that we needed to make MAP more resilient. The first question to answer was - what does resiliency mean for MAP? It came down to these expectations:&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt; (1) Ensure an acceptable user experience during a MAP failure, e.g. that the user can browse our selection and continue to play videos&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt; (2) Services that depend on MAP i.e. the API service and device platforms are not impacted by a MAP failure and continue to provide uninterrupted services&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt; (3) Services that MAP depends on are not overwhelmed by excessive load from MAP&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; text-indent: 36pt; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; text-indent: 36pt; white-space: pre-wrap;"&gt;      It is easy enough to identify obvious points of failure. For example - if a service provides data X, we could ensure that MAP has a fallback for data X being unavailable. What is harder is knowing the impact of failures in multiple services - different combinations of them - and the impact of higher latencies.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This is where the &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2011/07/netflix-simian-army.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Latency Monkey&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/10/fit-failure-injection-testing.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;FIT&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; come in. Running Latency Monkey in our production environment allows us to detect problems caused by latent services. With Latency Monkey testing, we have been able to fix incorrect behaviors and fine tune various parameters on the backend services like:&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (1) Timeouts for various calls&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (2) Thresholds for opening circuits via Hystrix&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (3) Fallbacks for certain use cases&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (4) Thread pool settings&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;FIT, on the other hand, allows us to simulate specific failures. We restrict the scope of failures to a few test accounts. This allows us to validate fallbacks as well as the user experience. Using FIT, we are able to sever connections with:&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (1) Cache that handles MAP reads and writes&amp;nbsp;&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (2) Dependencies that MAP interfaces with&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;  (3) MAP service itself &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="351px;" src="https://lh3.googleusercontent.com/8v4kyrcA0GaU72hyYKPnK782Kdu_lLXhwPyvXikPRhzlEBztBy78Gw8Y20FJaCAlwKQg-u5ktIaNX5kCa_VKZ5NwqIDujQEj0rpdPM5PxGdDGD9Z95T6lsWnSiiH0jWMVmc_9Q" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;What does control look like?&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In a successful run of FIT or Chaos Monkey, this is how metrics look like now:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-left: -49.5pt; margin-right: -36pt; margin-top: 0pt; text-indent: 81pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="204px;" src="https://lh6.googleusercontent.com/lsEl9HAGy62RMcV-BSU7-dqKfjASyKjX5ql2_YWjnQeR3zvtTgp-yNggmxEUytkNgAUpCkpWtzmMq1iWJ2oYGV8Juq1ea_FONvxnFPaV1M9fa2DufhOY_PVPsGoTg_pNWTRt8Q" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="502px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;div style="text-align: left;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: x-small; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;              &lt;/span&gt;&lt;span style="font-family: Arial; font-size: 12px; font-weight: 700; line-height: 1.38; text-indent: 36pt; white-space: pre-wrap;"&gt;Total requests served by MAP before and during the test(no impact)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-right: -36pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="224px;" src="https://lh5.googleusercontent.com/mRMqCMQ5FOAzSEFENz4sxmC6dI_zRxHFi-69VpUi8Drd7LOXxQcEg9l9bdyRigAoi2EUI8I6uecrulNQOAPRSrt3lr-c4ij_hpKKitQejJFapcHMppD4LbIGeX98hWU9oIq4qQ" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="506px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: x-small; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;                  &lt;/span&gt;&lt;span style="font-family: Arial; font-size: 12px; font-weight: 700; line-height: 1.38; text-indent: 36pt; white-space: pre-wrap;"&gt;MAP successful fallbacks during the test(high fallback rate)&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On a lighter note, our failure simulations uncovered some interesting user experience issues, which have since been fixed.&lt;/span&gt;&lt;br /&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;ol style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Simulating failures in all the dependent services of MAP server caused an odd data mismatch to happen:&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="183px;" src="https://lh3.googleusercontent.com/fu8Mr9G7KeqEIeoopXUgnOj1LIaB2q5YNnOyaN75XLmLJYsn2YKxBnU74aTuhqKx4g3uNooxduUmfdBYXv4OQ-bYLP1M6dQrQ8QyiBxO0sfPVDuKmDW7i8A1Me7qm3v-dsB4Kw" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="347px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13.333333333333332px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The Avengers shows graphic for Peaky Blinders&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;ol start="2" style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Severing connections to MAP server and the cache caused these duplicate titles to be served:&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="378px;" src="https://lh5.googleusercontent.com/NzQhi4HD8X-H3P3CCmLqbv6S6mHloLBBKTjTjlFPA9s09uuODFRwMf0_SWypZkVLJRDVRrDr8GlNgbS83fLrQDWIFfwoNh1d28zTh9FtX4cml7hcLum3YpjIvzyTR95oe-gHbA" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="283px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;ol start="3" style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;When the cache was made unavailable mid session, some rows looked like this:&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="380px;" src="https://lh6.googleusercontent.com/LgfBIQFsekxcZJJODfGpFCLajb66j1nRNE0Rk281Hb-kCVs6pkS6pJHuVTesYVdQZ-1Z4a5vCgxnSE6MwWtcu6gbdhHpJ5g_-rFsza-Bj3hp2VlfdDKjyPYbTxVY-0Gi2145gg" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="284px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;ol start="4" style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Simulating a failure in the “My List” service caused the PS4 UI to be stuck on adding a title to My List:&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="181px;" src="https://lh6.googleusercontent.com/VqEWnhGGgQnA2qSBgVaoM2x4JYQwxVARC8phQEA6gy_aMWNFCLWDfNMI81fWb11pHvgzuBPlx0broPz3O32IRQq_iaTm1g0ly_5rbC09z3DziT-JsKzCZqUNLXpRwml7R4wBqg" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="353px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In an ever evolving ecosystem of many dependent services, the future of resiliency testing resides in automation. We have taken small but significant steps this year towards making some of these FIT tests automated. The goal is to build these tests out so they run during every release and catch any regressions.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-indent: 36pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Looking ahead for MAP, there are many more problems to solve. How can we make MAP more performant? Will our caching strategy scale to the next X million customers? How do we enable faster innovation without impacting reliability? Stay tuned for updates!&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;</description>
      <link>http://techblog.netflix.com/2015/08/from-chaos-to-control-testing.html</link>
      <author>noreply@blogger.com (Leena Janardanan)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-7167723281147422032</guid>
      <pubDate>Thu, 20 Aug 2015 22:11:00 +0000</pubDate>
      <atom:updated>2015-08-20T23:51:36.963-07:00</atom:updated>
      <title>Fenzo: OSS Scheduler for Apache Mesos Frameworks</title>
      <description>&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;Bringing Netflix to our millions of subscribers is no easy task. The product comprises dozens of services in our distributed environment, each of which is operating a critical component to the experience while constantly evolving with new functionality. Optimizing the launch of these services is essential for both the stability of the customer experience as well as overall performance and costs. To that end, we are happy to introduce Fenzo, an open source scheduler for &lt;/span&gt;&lt;a href="http://mesos.apache.org/" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 14.6666666666667px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Apache Mesos&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt; frameworks. Fenzo tightly manages the scheduling and resource assignments of these deployments.&lt;/span&gt;&lt;/div&gt;&lt;b id="docs-internal-guid-6dd194cb-4d25-bfab-e20a-a459f7326de8" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo is now available in the &lt;/span&gt;&lt;a href="https://github.com/Netflix/" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix OSS&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; suite. Read on for more details about how Fenzo works and why we built it. For the impatient, you can find source code and docs on &lt;/span&gt;&lt;a href="https://github.com/Netflix/Fenzo" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Github&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Why Fenzo?&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Two main motivations for developing a new framework, as opposed to leveraging one of the many &lt;/span&gt;&lt;a href="http://mesos.apache.org/documentation/latest/mesos-frameworks/" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;frameworks in the community&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, were to achieve scheduling optimizations and to be able to autoscale the cluster based on usage, both of which will be discussed in greater detail below. Fenzo enables frameworks to better manage ephemerality aspects that are unique to the cloud. Our use cases include a reactive stream processing system for &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/01/improving-netflixs-operational.html" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;real time operational insights&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and managing deployments of container based applications. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;At Netflix, we see a large variation in the amount of data that our jobs process over the course of a day. Provisioning the cluster for peak usage, as is typical in data center environments, is wasteful. Also, systems may occasionally be inundated with interactive jobs from users responding to certain anomalous operational events. We need to take advantage of the cloud’s elasticity and scale the cluster up and down based on dynamic loads.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Although scaling up a cluster may seem relatively easy by watching, for example, the amount of available resources falling below a threshold, scaling down presents additional challenges. If the tasks are long lived and cannot be terminated without negative consequences, such as time consuming reconfiguration of stateful stream processing topologies, the scheduler will have to assign them such that all tasks on a host terminate at about the same time so the host can be terminated for scale down. &lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Scheduling Strategy&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Scheduling tasks requires optimization of resource assignments to maximize the intended goals. When there are multiple resource assignments possible, picking one versus another can lead to significantly different outcomes in terms of scalability, performance, etc. As such, efficient assignment selection is a crucial aspect of a scheduler library. For example, picking assignments by evaluating every pending task with every available resource is computationally prohibitive.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Scheduling Model&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Our design focused on large scale deployments with a heterogeneous mix of tasks and resources that have multiple constraints and optimizations needs. If evaluating the most optimal assignments takes a long time, it could create two problems: &lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;resources become idle, waiting for new assignments&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;task launches experience increased latency&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo adopts an approach that moves us quickly in the right direction as opposed to coming up with the most optimal set of scheduling assignments every time.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Conceptually, we think of tasks as having an urgency factor that determines how soon it needs an assignment, and a fitness factor that determines how well it fits on a given host. &lt;/span&gt;&lt;br /&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/-ETpr5S_mc4Y/VdbKMZ0BwAI/AAAAAAAAADE/n8FQ_RYxZTo/s1600/FitnessUrgency.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/-ETpr5S_mc4Y/VdbKMZ0BwAI/AAAAAAAAADE/n8FQ_RYxZTo/s1600/FitnessUrgency.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; line-height: 1.38; white-space: pre-wrap;"&gt;If the task is very urgent or if it fits very well on a given resource, we go ahead and assign that resource to the task. Otherwise, we keep the task pending until either urgency increases or we find another host with a larger fitness value.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Trading Off Scheduling Speed with Optimizations&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo has knobs for you to choose speed and optimal assignments dynamically. Fenzo employs a strategy of evaluating optimal assignments across multiple hosts, but, only until a fitness value deemed “good enough” is obtained. While a user defined threshold for fitness being good enough controls the speed, a fitness evaluation plugin represents the optimality of assignments and the high level scheduling objectives for the cluster. A fitness calculator can be composed from multiple other fitness calculators, representing a multi-faceted objective.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Task Constraints&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo tasks can use optional soft or hard constraints to influence assignments to achieve locality with other tasks and/or affinity to resources. Soft constraints are satisfied on a best efforts basis and combine with the fitness calculator for scoring hosts for possible assignment. Hard constraints must be satisfied and act as a resource selection filter. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br class="kix-line-break" /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo provides all relevant cluster state information to the fitness calculators and constraints plugins so you can optimize assignments based on various aspects of jobs, resources, and time.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Bin Packing and Constraints Plugins&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo currently has built-in fitness calculators for bin packing based on CPU, memory, or network bandwidth resources, or a combination of them. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Some of the built-in constraints address common use cases of locality with respect to resource types, assigning distinct hosts to a set of tasks, balancing tasks across a given host attribute, such as the availability zone, rack location, etc. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;You can customize fitness calculators and constraints by providing new plugins.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Cluster Autoscaling&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo supports cluster autoscaling using two complementary strategies:&lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Thresholds based&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Resource shortfall analysis based&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Thresholds based autoscaling lets users specify rules per host group (e.g., EC2 Auto Scaling Group, ASG) being used in the cluster. For example, there may be one ASG created for compute intensive workloads using one EC2 instance type, and another for network intensive workloads. Each rule helps maintain a configured number of idle hosts available for launching new jobs quickly. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The resource shortfall analysis attempts to estimate the number of hosts required to satisfy the pending workload. This complements the rules based scale up during demand surges. Fenzo’s autoscaling also complements predictive autoscaling systems, such as &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2013/12/scryer-netflixs-predictive-auto-scaling.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix’s Scryer&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Usage at Netflix&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo is currently being used in two Mesos frameworks at Netflix for a variety of use cases including long running services and batch jobs. We have observed that the scheduler is fast at allocating resources with multiple constraints and custom fitness calculators. Also, Fenzo has allowed us to scale the cluster based on current demand instead of provisioning it for peak demand.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The table below shows the average and maximum times we have observed for each scheduling run in one of our clusters. Each scheduling run may attempt to assign resources to more than one task. The run time can vary depending on the number of tasks that need assignments, the number and types of constraints used by the tasks, and the number of hosts to choose resources from.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="margin-left: 92.25pt;"&gt;&lt;table style="border-collapse: collapse; border: none;"&gt;&lt;colgroup&gt;&lt;col width="189"&gt;&lt;/col&gt;&lt;col width="246"&gt;&lt;/col&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr style="height: 28px;"&gt;&lt;td colspan="2" style="background-color: #cccccc; border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 700; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Scheduler run time in milliseconds&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Average&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;2 mS&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Maximum&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;38 mS&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;(occasional spikes of about 30 mS)&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The image below shows the number of Mesos slaves in the cluster going up and down as a result of Fenzo’s autoscaler actions over several days, representing about 3X difference in the maximum and minimum counts.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="TitanAutoscaling2.png" height="376px;" src="https://lh6.googleusercontent.com/GMQCXzZvKLelKftW2nGsFIIr8gBkenV-QlvkrmYN3IOy9O-RVVnVfXaGy0mxsnxIWUswjX4ZC2MCNMJivv5tfzcJa8fzf92-dmlAdZ4-oJRLfB4fvpv4RPZtM1qgzV5txzydzts" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo Usage in Mesos Frameworks&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="FenzoUsageDiagram.png" height="488px;" src="https://lh3.googleusercontent.com/vdnl2M0uWPkINRUpPDrEGPlWnPaLcZObAk6_qpAhUAqKY0t7DJA88oHUd2L-b60sdTs3gMW1IhIL8NNklAis3RyohS2BbWeljChgcrFQw6U9NNGdZ3JIyrfzIsQ_FFds8VTEvpM" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A simplified diagram above shows how Fenzo is used by an Apache Mesos framework. Fenzo’s task scheduler provides the scheduling core without interaction with Mesos itself. The framework, interfaces with Mesos to get callbacks on new resource offers and task status updates. As well, it calls Mesos driver to launch tasks based on Fenzo’s assignments. &lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Summary&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo has been a great addition to our cloud platform. It gives us a high degree of control over work scheduling on Mesos, and has enabled us to strike a balance between machine efficiency and getting jobs running quickly. Out of the box Fenzo supports cluster autoscaling and bin packing. Custom schedulers can be implemented by writing your own plugins. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Source code is available on &lt;/span&gt;&lt;a href="https://github.com/Netflix/Fenzo" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix Github&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. The repository contains a &lt;/span&gt;&lt;a href="https://github.com/Netflix/Fenzo/blob/master/fenzo-core/src/main/java/com/netflix/fenzo/samples/SampleFramework.java" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;sample framework&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; that shows how to use Fenzo. Also, the &lt;/span&gt;&lt;a href="https://github.com/Netflix/Fenzo/tree/master/fenzo-core/src/test/java/com/netflix/fenzo" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;JUnit tests&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; show examples of various features including writing custom fitness calculators and constraints. &lt;/span&gt;&lt;a href="https://github.com/Netflix/Fenzo/wiki" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Fenzo wiki&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: 400; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; contains detailed documentation on getting you started. &lt;/span&gt;&lt;/div&gt;&lt;br /&gt;</description>
      <link>http://techblog.netflix.com/2015/08/fenzo-oss-scheduler-for-apache-mesos.html</link>
      <author>noreply@blogger.com (Sharma Podila)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://4.bp.blogspot.com/-ETpr5S_mc4Y/VdbKMZ0BwAI/AAAAAAAAADE/n8FQ_RYxZTo/s72-c/FitnessUrgency.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-3117592514925302855</guid>
      <pubDate>Mon, 17 Aug 2015 18:13:00 +0000</pubDate>
      <atom:updated>2015-08-18T15:46:13.053-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">falcor</category>
      <category domain="http://www.blogger.com/atom/ns#">JavaScript</category>
      <category domain="http://www.blogger.com/atom/ns#">node.js</category>
      <category domain="http://www.blogger.com/atom/ns#">UI</category>
      <title>Netflix Releases Falcor Developer Preview</title>
      <description>&lt;span style="font-family: inherit;"&gt;by&amp;nbsp;&lt;/span&gt;&lt;a href="https://twitter.com/jhusain"&gt;Jafar Husain&lt;/a&gt;, &lt;a href="https://twitter.com/trxcllnt"&gt;Paul Taylor&lt;/a&gt; and &lt;a href="https://twitter.com/_michaelpaulson"&gt;Michael Paulson&lt;/a&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;Developers strive to create the illusion that all of their application’s data is sitting right there on the user’s device just waiting to be displayed. To make that experience a reality, data must be efficiently retrieved from the network and intelligently cached on the client.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;That’s why Netflix created &lt;a href="http://netflix.github.io/falcor/"&gt;Falcor&lt;/a&gt;, a JavaScript library for efficient data fetching. Falcor powers Netflix’s mobile, desktop and TV applications.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;Falcor lets you represent all your remote data sources as a single domain model via &lt;a href="http://netflix.github.io/falcor/documentation/jsongraph.html"&gt;JSON Graph&lt;/a&gt;. Falcor makes it easy to access as much or as little of your model as you want, when you want it. You retrieve your data using familiar JavaScript operations like get, set, and call. If you know your data, you know your API.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;You code the same way no matter where the data is, whether in memory on the client or over the network on the server. Falcor keeps your data in a single, coherent cache and manages stale data and cache pruning for you. Falcor automatically traverses references in your graph and makes requests as needed. It transparently handles all network communications, opportunistically batching and de-duping requests.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;Today, Netflix is unveiling a developer preview of &lt;a href="http://netflix.github.io/falcor/"&gt;Falcor&lt;/a&gt;:&lt;/span&gt;&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;a href="http://netflix.github.io/falcor/"&gt;Official site&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/Netflix/falcor"&gt;GitHub&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://www.npmjs.com/package/falcor"&gt;npm&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;Falcor is still under active development and we’ll be unveiling a roadmap soon. This developer preview includes a Node version of our Falcor Router not yet in production use.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;We’re excited to start developing in the open and share this library with the community, and eager for your feedback and contributions.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: inherit;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: inherit;"&gt;For ongoing updates, follow &lt;a href="https://twitter.com/falcorjs"&gt;Falcor on Twitter&lt;/a&gt;!&lt;/span&gt;&lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/08/falcor-developer-preview.html</link>
      <author>noreply@blogger.com (Chris Saint-Amant)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-5085242745726506614</guid>
      <pubDate>Wed, 05 Aug 2015 20:58:00 +0000</pubDate>
      <atom:updated>2015-08-24T16:23:40.259-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">JavaScript</category>
      <title>Making Netflix.com Faster</title>
      <description>&lt;p&gt;by &lt;a href="http://www.linkedin.com/in/kristoferbaxter"&gt;Kristofer Baxter&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Simply put, performance matters. We know members want to immediately start browsing or watching their favorite content and have found that faster startup leads to more satisfying usage. So, when building the &lt;a href="http://blog.netflix.com/2015/06/the-netflix-website-gets-major-upgrade.html"&gt;long-awaited update to netflix.com&lt;/a&gt;, the Website UI Engineering team made startup performance a first tier priority.&lt;/p&gt; &lt;p&gt;The impact of this effort netted a 70% reduction in startup time, and was focused in three key areas:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Server and Client Rendering&lt;/li&gt;&lt;li&gt;Universal JavaScript&lt;/li&gt;&lt;li&gt;JavaScript Payload Reductions&lt;/li&gt;&lt;/ol&gt; &lt;h2 style='padding-bottom:0;'&gt;Server and Client Rendering&lt;/h2&gt;&lt;p style='margin-top: 0;'&gt;The netflix.com legacy website stack had a hard separation between server markup and client enhancement. This was primarily due to the different programming languages used in each part of our application. On the server, there was Java with Tomcat, Struts and Tiles. On the browser client, we enhanced server-generated markup with JavaScript, primarily via jQuery.&lt;/p&gt; &lt;p&gt;This separation led to undesirable results in our startup time. Every time a visitor came to any page on netflix.com our Java tier would generate the majority of the response needed for the entire page's lifetime and deliver it as HTML markup. Often, users would be waiting for the generation of markup for large parts of the page they would never visit.&lt;/p&gt; &lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-15hF-iyWas8/VcI_MdvYOJI/AAAAAAAABY4/p5H2INcbNUU/s1600/Screen%2BShot%2B2015-08-04%2Bat%2B7.24.34%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-15hF-iyWas8/VcI_MdvYOJI/AAAAAAAABY4/p5H2INcbNUU/s400/Screen%2BShot%2B2015-08-04%2Bat%2B7.24.34%2BPM.png" /&gt;&lt;/a&gt;&lt;/div&gt; &lt;p&gt;Our new architecture renders only a small amount of the page's markup, bootstrapping the client view. We can easily change the amount of the total view the server generates, making it easy to see the positive or negative impact. The server requires less data to deliver a response and spends less time converting data into DOM elements. Once the client JavaScript has taken over, it can retrieve all additional data for the remainder of the current and future views of a session on demand. The large wins here were the reduction of processing time in the server, and the consolidation of the rendering into one language.&lt;/p&gt; &lt;p&gt;We find the flexibility afforded by server and client rendering allows us to make intelligent choices of what to request and render in the server and the client, leading to a faster startup and a smoother transition between views.&lt;/p&gt; &lt;h2 style='padding-bottom:0;'&gt;Universal JavaScript&lt;/h2&gt;&lt;p style='margin-top: 0;'&gt;In order to support identical rendering on the client and server, we needed to rethink our rendering pipeline. Our previous architecture's separation between the generation of markup on the server and the enhancement of it on the client had to be dropped.&lt;/p&gt;   &lt;p&gt;Three large pain points shaped our new Node.js architecture:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Context switching between languages was not ideal.&lt;/li&gt;&lt;li&gt;Enhancement of markup required too much direct coupling between server-only code generating markup and the client-only code enhancing it.&lt;/li&gt;&lt;li&gt;We’d rather generate all our markup using the same API.&lt;/li&gt;&lt;/ol&gt; &lt;p&gt;There are many solutions to this problem that don't require Universal JavaScript, but we found this lesson was most appropriate: When there are two copies of the same thing, it's fairly easy for one to be slightly different than the other. Using Universal JavaScript means the rendering logic is simply passed down to the client.&lt;/p&gt; &lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-noNL4nc6PJ0/VcJAe2gDtCI/AAAAAAAABZE/qJrosc6qaR4/s1600/Screen%2BShot%2B2015-08-04%2Bat%2B6.55.35%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-noNL4nc6PJ0/VcJAe2gDtCI/AAAAAAAABZE/qJrosc6qaR4/s400/Screen%2BShot%2B2015-08-04%2Bat%2B6.55.35%2BPM.png" /&gt;&lt;/a&gt;&lt;/div&gt; &lt;p&gt;Node.js and React.js are natural fits for this style of application. With Node.js and React.js, we can &lt;a href="https://facebook.github.io/react/docs/top-level-api.html#react.rendertostring"&gt;render from the server&lt;/a&gt; and subsequently render changes entirely on the client after the initial markup and React.js components have been transmitted to the browser. This flexibility allows for the application to render the exact same output independent of the location of the rendering. The hard separation is no longer present and it's far less likely for the server and client to be different than one another.&lt;/p&gt; &lt;p&gt;Without shared rendering logic we couldn't have realized the potential of rendering only what was necessary on startup and everything else as data became available.&lt;/p&gt; &lt;h2 style='padding-bottom:0'&gt;Reduce JavaScript Payload Impact&lt;/h2&gt;&lt;p style='margin-top: 0;'&gt;Building rich interactive experiences on the web often translates into a large JavaScript payload for users. In our new architecture, we placed significant emphasis on pruning large dependencies we can knowingly replace with smaller modules and &lt;a href="https://queue.acm.org/detail.cfm?id=2677720"&gt;delivering JavaScript only applicable for the current visitor&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Many of the large dependencies we relied on in the legacy architecture didn't apply in the new one. We've replaced these dependencies in favor of newer, more efficient libraries. Replacing these libraries resulted in a much smaller JavaScript payload, meaning members need less JavaScript to start browsing. We know there is significant work remaining here, and we're actively working to trim our JavaScript payload down further.&lt;/p&gt; &lt;h2 style='padding-bottom:0;'&gt;Time To Interactive&lt;/h2&gt;&lt;p style='margin-top: 0;'&gt;In order to test and understand the impact of our choices, we monitor a metric we call time to interactive (tti).&lt;/p&gt; &lt;p style='margin: 1em 2em;'&gt;Amount of time spent between first known startup of the application platform and when the UI is interactive regardless of view. Note that this does not require that the UI is done loading, but is the first point at which the customer can interact with the UI using an input device.&lt;/p&gt; &lt;p&gt;For applications running inside a web browser, this data is easily retrievable from the &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigation_timing_API"&gt;Navigation Timing API&lt;/a&gt; (where supported).&lt;/p&gt; &lt;h2 style='padding-bottom:0;'&gt;Work is Ongoing&lt;/h2&gt;&lt;p style='margin-top: 0;'&gt;We firmly believe high performance is not an optional engineering goal – it's a requirement for creating great user-experiences. We have made significant strides in startup performance, and are committed to challenging our industry’s best-practices in the pursuit of a better experience for our members.&lt;/p&gt; &lt;p&gt;Over the coming months we'll be investigating Service Workers, ASM.js, Web Assembly, and other emerging web standards to see if we can leverage them for a more performant website experience. If you’re interested in helping create and shape the next generation of performant web user-experiences &lt;a href="https://jobs.netflix.com/jobs/1763/apply"&gt;apply here&lt;/a&gt;.&lt;/p&gt;   </description>
      <link>http://techblog.netflix.com/2015/08/making-netflixcom-faster.html</link>
      <author>noreply@blogger.com (Kris Baxter)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://1.bp.blogspot.com/-15hF-iyWas8/VcI_MdvYOJI/AAAAAAAABY4/p5H2INcbNUU/s72-c/Screen%2BShot%2B2015-08-04%2Bat%2B7.24.34%2BPM.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-2163119825426611764</guid>
      <pubDate>Mon, 03 Aug 2015 16:06:00 +0000</pubDate>
      <atom:updated>2015-08-03T09:06:12.025-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">linux</category>
      <category domain="http://www.blogger.com/atom/ns#">performance</category>
      <category domain="http://www.blogger.com/atom/ns#">Velocity</category>
      <title>Netflix at Velocity 2015: Linux Performance Tools</title>
      <description>&lt;div style="float:right;padding-left:10px"&gt;&lt;a href="http://www.brendangregg.com/Perf/linux_observability_tools.png" imageanchor="1"&gt;&lt;img border="0" height="224" src="http://1.bp.blogspot.com/-Dt4eqMuVZQ4/VbKPr5v7aRI/AAAAAAAAAEU/fA-AvR4GSQk/s320/linux_observability_tools.png" width="320" /&gt;&lt;/a&gt;&lt;/div&gt;There are many performance tools nowadays for Linux, but how do they all fit together, and when do we use them? At Velocity 2015, I gave a 90 minute tutorial on &lt;a href="http://velocityconf.com/devops-web-performance-2015/public/schedule/detail/42513"&gt;Linux performance tools&lt;/a&gt;. I’ve spoken on this topic before, but given a 90 minute time slot I was able to include more methodologies, tools, and live demonstrations, making it the most complete tour of the topic I’ve done. The video and slides are below. &lt;br /&gt;&lt;br /&gt;In this tutorial I summarize traditional and advanced performance tools, including: top, ps, vmstat, iostat, mpstat, free, strace, tcpdump, netstat, nicstat, pidstat, swapon, lsof, sar, ss, iptraf, iotop, slaptop, pcstat, tiptop, rdmsr, lmbench, fio, pchar, perf_events, ftrace, SystemTap, ktap, sysdig, and eBPF; and reference many more. I also include updated tools diagrams for observability, sar, benchmarking, and tuning (including the image above). &lt;br /&gt;&lt;br /&gt;This tutorial can be shared with a wide audience – anyone working on Linux systems – as a free crash course on Linux performance tools. I hope people enjoy it and find it useful. Here's the &lt;a href="https://www.youtube.com/watch?v=FJW8nGV4jxY&amp;list=PLhhdIMVi0o5RNrf8E2dUijvGpqKLB9TCR"&gt;playlist&lt;/a&gt;.&lt;br /&gt;&lt;br /&gt;&lt;a href="https://www.youtube.com/watch?v=FJW8nGV4jxY"&gt;Part 1 (youtube)&lt;/a&gt; (54 mins): &lt;br /&gt;&lt;center&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/FJW8nGV4jxY" width="560" style="margin-top:8px"&gt;&lt;/iframe&gt;&lt;/center&gt;&lt;br /&gt;&lt;a href="https://www.youtube.com/watch?v=zrr2nUln9Kk"&gt;Part 2 (youtube)&lt;/a&gt; (45 mins): &lt;br /&gt;&lt;center&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/zrr2nUln9Kk" width="560" style="margin-top:8px"&gt;&lt;/iframe&gt;&lt;/center&gt;&lt;br /&gt;&lt;a href="http://www.slideshare.net/brendangregg/velocity-2015-linux-perf-tools" style="margin-bottom:6px"&gt;Slides (slideshare)&lt;/a&gt;: &lt;br /&gt;&lt;center&gt;&lt;iframe allowfullscreen="" frameborder="0" height="355" marginheight="0" marginwidth="0" scrolling="no" src="//www.slideshare.net/slideshow/embed_code/key/iHwlnb2xUcp0Tw" style="border-width: 1px; border: 1px solid #CCC; margin-top:8px; max-width: 100%;" width="425"&gt; &lt;/iframe&gt;&lt;/center&gt;&lt;br /&gt;At Netflix, we have &lt;a href="http://techblog.netflix.com/2014/12/introducing-atlas-netflixs-primary.html"&gt;Atlas&lt;/a&gt; for cloud-wide monitoring, and &lt;a href="http://techblog.netflix.com/2015/04/introducing-vector-netflixs-on-host.html"&gt;Vector&lt;/a&gt; for on-demand instance analysis. Much of the time we don't need to login to instances directly, but when we do, this tutorial covers the tools we use.&lt;br /&gt;&lt;br /&gt;Thanks to O'Reilly for hosting a great conference, and those who attended.&lt;br /&gt;&lt;br /&gt;If you are passionate about the content in this tutorial, we're hiring, particularly for senior &lt;a href="https://jobs.netflix.com/jobs/1834/apply"&gt;SREs&lt;/a&gt; and performance engineers: see &lt;a href="https://jobs.netflix.com/"&gt;Netflix jobs&lt;/a&gt;!</description>
      <link>http://techblog.netflix.com/2015/08/netflix-at-velocity-2015-linux.html</link>
      <author>noreply@blogger.com (Brendan Gregg)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://1.bp.blogspot.com/-Dt4eqMuVZQ4/VbKPr5v7aRI/AAAAAAAAAEU/fA-AvR4GSQk/s72-c/linux_observability_tools.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-4962244968375969923</guid>
      <pubDate>Tue, 28 Jul 2015 20:30:00 +0000</pubDate>
      <atom:updated>2015-07-28T19:13:51.949-07:00</atom:updated>
      <title>Tuning Tomcat For A High Throughput, Fail Fast System</title>
      <description>&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Problem&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b id="docs-internal-guid-33a5f6eb-d60f-f1e5-05ef-bf859caac79a" style="font-weight: normal;"&gt;&lt;div dir="ltr" style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-33a5f6eb-d78e-a9f0-6a66-aa463b6b59e5"&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix has a number of high throughput, low latency mid tier services. In one of these services, it was observed that in case there is a huge surge in traffic in a very short span of time, the machines became cpu starved and would become unresponsive. This would lead to a bad experience for the clients of this service. They would get a mix of read and connect timeouts. Read timeouts can be particularly bad if the read timeouts are set to be very high. The client machines will wait to hear from the server for a long time. In case of SOA, this can lead to a ripple effect as the clients of these clients will also start getting read timeouts and all services can slow down. Under normal circumstances, the machines had ample amount of cpu free and the service was not cpu intensive. So, why does this happen? In order to understand that, let's first look at the high level stack for this service. The request flow would look like this&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="151px;" src="https://lh6.googleusercontent.com/hZkvoVqx1W_4SzuyC3fplOxU1JvSuc8F4hqe4gJ8HrTjy7CJU14ObX2Kqo_Qv0qgKiTNgYj7Sg7gu1-6R8gI48w4wIwei9t0JBhf_3ODqfqpLGDvtbotwsRIqLbBU3LMrp0_VhE" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="533px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On simulating the traffic surge in the test environment it was found that the reason for cpu starvation was improper apache and tomcat configuration. On a sudden increase in traffic, multiple apache workers became busy and a very large number of tomcat threads also got busy. There was a huge jump in system cpu as none of the threads could do any meaningful work since most of the time cpu would be context switching. &lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Solution&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Since this was a mid tier service, there was not much use of apache. So, instead of tuning two systems (apache and tomcat), it was decided to simplify the stack and get rid of apache. To understand why too many tomcat threads got busy, let's understand the tomcat threading model.&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;High Level Threading Model for Tomcat Http Connector&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Tomcat has an acceptor thread to accept connections. In addition, there is a pool of worker threads which do the real work. The high level flow for an incoming request is:&lt;/span&gt;&lt;/div&gt;&lt;ol style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;TCP handshake between OS and client for establishing a connection. Depending on the OS implementation there can be a single queue for holding the connections or there can be multiple queues. In case of multiple queues, one holds incomplete connections which have not yet completed the tcp handshake. Once completed, connections are moved to the completed connection queue for consumption by the application. "acceptCount" parameter in tomcat configuration is used to control the size of these queues. &lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Tomcat acceptor thread accepts connections from the completed connection queue.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Checks if a worker thread is available in the free thread pool. If not, creates a worker thread if the number of active threads &amp;lt; maxThreads. Else wait for a worker thread to become free.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Once a free worker thread is found, acceptor thread hands the connection to it and gets back to listening for new connections.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Worker thread does the actual job of reading input from the connection, processing the request and sending the response to the client. If the connection was not keep alive then it closes the connection and places itself in the free thread pool. For a keep alive connection, waits for more data to be available on the connection. In case data does not become available until keepAliveTimeout, closes the connection and makes itself available in the free thread pool.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In case the number of tomcat threads and acceptCount values are set to be too high, a sudden increase in traffic will fill up the OS queues and make all the worker threads busy. When more requests than that can be handled by the system are sent to the machines, this "queuing" of requests is inevitable and will lead to increased busy threads, causing cpu starvation eventually. &amp;nbsp;Hence, the crux of the solution is to avoid too much queuing of requests at multiple points (OS and tomcat threads) and fail fast (return http status 503) as soon the application's maximum capacity is reached. Here is a recommendation for doing this in practice:&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fail fast in case the system capacity for a machine is hit&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Estimate the number of threads expected to be busy at peak load. If the server responds back in 5 ms on avg for a request, then a single thread can do a max of 200 requests per second (rps). In case the machine has a quad core cpu, it can do max 800 rps. Now assume that 4 requests (since the assumption is that the machine is a quad core) come in parallel and hit the machine. This will make 4 worker threads busy. For the next 5 ms all these threads will be busy. The total rps to the system is the max value of 800, so in next 5 ms, 4 more requests will come and make another 4 threads busy. Subsequent requests will pick up one of the already busy threads which has become free. So, on an average there should not be more than 8 threads busy at 800 rps. The behavior will be a little different in practice because all system resources like cpu will be shared. Hence one should experiment for the total throughput the system can sustain and do a calculation for expected number of busy threads. This will provide a base line for the number of threads needed to sustain peak load. In order to provide some buffer lets more than triple the number of max threads needed to 30. This buffer is arbitrary and can be further tuned if needed. In our experiments we used a slightly more than 3 times buffer and it worked well.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Track the number of active concurrent requests in memory and use it for fast failing. If the number of concurrent requests is near the estimated active threads (8 in our example) then return an http status code of 503. This will prevent too many worker threads becoming busy because once the peak throughput is hit, any extra threads which become active will be doing a very light weight job of returning 503 and then be available for further processing.&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Configure Operating System parameters&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The acceptCount parameter for tomcat dictates the length of the queues at the OS level for completing tcp handshake operations (details are OS specific). It's important to tune this parameter, otherwise one can have issues with establishing connections to the machine or it can lead to excessive queuing of connections in OS queues which will lead to read timeouts. The implementation details of handling incomplete and complete connections vary across OS. There can be a single queue of connections or multiple queues for incomplete and complete connections (please refer to the References section for details). So, a nice way to tune the acceptCount parameter is to start with a small value and keep increasing it unless the connection errors get removed.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Having too large a value for acceptCount means that the incoming requests can get accepted at the OS level. However, if the incoming rps is more than what a machine can handle, all the worker threads will eventually become busy and then the acceptor thread will wait for a worker thread to become free. More requests will continue to pile up in the OS queues since acceptor thread will consume them only when a worker thread becomes available. In the worst case, these requests will timeout while waiting in the OS queues, but will still be processed by the server once they get picked by the tomcat's acceptor thread. This is a complete waste of processing resources as a client will never receive any response.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;If the value of acceptCount is too small, then in case of a high rps there will not be enough space for OS to accept connections and make it available for the acceptor thread. In this case, connect timeout errors will be returned to the client way below the actual throughput for the server is reached.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Hence experiment by starting with a small value like 10 for acceptCount and keep increasing it until there are are no connection errors from the server.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On doing both the changes above, even if all the worker threads become busy in the worst case, the servers will not be cpu starved and will be able to do as much work as possible (max throughput).&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Other considerations&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;As explained above, each incoming connection is ultimately handled to a worker tomcat thread. In case http keep alive is turned on, a worker thread will continue to listen on a connection and will not be available in the free thread pool. So, if the clients are not smart to close the connection once it's not being actively used, the server can very easily run out of worker threads. If keep alive is turned on then one has to size the server farm by keeping this constraint in mind.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Alternatively, if keep alive is turned off then one does not have to worry about the problem of inactive connections using worker threads. However, in this case on each call one has to pay the price of opening and closing the connection. Further, this will also create a lot of sockets in the TIME_WAIT state which can put pressure on the servers.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Its best to pick the choice based on the use cases for the application and to test the performance by running experiments.&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Results&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Multiple experiments were run with different configurations. The results are shown below. The dark blue line is the original configuration with apache and tomcat. All the other are different configurations for the stack with only tomcat&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-left: 11pt; margin-right: 11pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="256px;" src="https://lh3.googleusercontent.com/gWTtHMiztsP26QwcOfHF5Ol2IYhwfcJ9DUnXoc8Nu3RCfFd24-vrGD1RnsMhPVFNOI40oz2FXESyYApRgVFliqIxyjJ6IE2aPcX7hdwf62SoF7c_2vqRGO_M4puVLiFxpYLVAYQ" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="427px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Throughput&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Note the drop after a sustained period of traffic higher than what can be served by server.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-left: 11pt; margin-right: 11pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="255px;" src="https://lh5.googleusercontent.com/bN9G47Po9jJr7JY31xjCsbR7dk-G3YNNChUWnbhv3ColONYbZNDiALvL_19ZnP-4hBG_dcjHE_WtgCsxkaXlU8DNyArQaCGMiPs6p8VbMbzWSwokHwK9RX3pkEZgfb6UMe1kw4A" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="427px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Busy Apache Workers&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-left: 11pt; margin-right: 11pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="277px;" src="https://lh6.googleusercontent.com/pfC2xzcRHI0ruIYkEvdO2-V18jJHRgeNlVJxIwWTzTW7c8Lu6iab_pyiKs6pYmiqCAGu0GMY_AIpvFTN56mCefSC61plcjIMbRM-B9xqjRgL1RZ6UZwgrm14-nSBp-qn4BTctWA" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="427px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Idle cpu&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Note that the original configuration got so busy that it was not even able to publish the stats for idle cpu on a continuous basis. The stats were published (valued 0) for the base configuration intermittently as highlighted in the red circles&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-left: 11pt; margin-right: 11pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="248px;" src="https://lh4.googleusercontent.com/BzTXPEQAvSIYgfD9RfVCcEtbUnjqyI9wPfrfZeTN0XoXRPIyylwb1BSM5vAcHATEuoRbnkHX1CShlSGdPleQlt8MwUYSJcxPvsUD5g2cq7foN4Zb7p9_qOmQBnBoEdMWpRG7c-k" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="427px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Server average latency to process a request&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Note&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Its possible to achieve the same results by tuning the combination of apache and tomcat to work together. However, since there was not much use of apache for our service, we found the above model simpler with one less moving part. I&lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;t's best to make choices by a combination of understanding the system and use of experimentation and testing in a real-world environment to verify hypothesis.&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;References&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;b style="font-weight: normal;"&gt;&lt;ol style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;https://books.google.com/books/about/UNIX_Network_Programming.html?id=ptSC4LpwGA0C&amp;amp;source=kp_cover&amp;amp;hl=en&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;http://www.sean.de/Solaris/soltune.html&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;https://tomcat.apache.org/tomcat-7.0-doc/config/http.html&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;http://grepcode.com/project/repository.springsource.com/org.apache.coyote/com.springsource.org.apache.coyote/&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/b&gt;&lt;/h3&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 4pt; margin-top: 14pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 17.333333333333332px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Acknowledgment&lt;/span&gt;&lt;/h3&gt;&lt;h3&gt;&lt;span style="font-weight: normal;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 14.6666666666667px; vertical-align: baseline; white-space: pre-wrap;"&gt;I would like to thank Mohan Doraiswamy for his suggestions in this effort.&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/h3&gt;</description>
      <link>http://techblog.netflix.com/2015/07/tuning-tomcat-for-high-throughput-fail.html</link>
      <author>noreply@blogger.com (Sumit Tandon)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-7564661201192729224</guid>
      <pubDate>Fri, 24 Jul 2015 17:29:00 +0000</pubDate>
      <atom:updated>2015-07-24T11:26:12.459-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">flamegraphs</category>
      <category domain="http://www.blogger.com/atom/ns#">java</category>
      <category domain="http://www.blogger.com/atom/ns#">performance</category>
      <title>Java in Flames</title>
      <description>Java mixed-mode flame graphs provide a complete visualization of CPU usage and have just been made possible by a new JDK option: &lt;span style="font-family: Courier New, Courier, monospace;"&gt;-XX:+PreserveFramePointer&lt;/span&gt;. We've been developing these at Netflix for everyday Java performance analysis as they can identify all CPU consumers and issues, including those that are hidden from other profilers.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Example&lt;/span&gt;&lt;br /&gt;This shows CPU consumption by a Java process, both user- and kernel-level, during a vert.x benchmark:&lt;br /&gt;&lt;a href="http://www.brendangregg.com/FlameGraphs/cpu-mixedmode-flamegraph-java.svg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em; text-align: center;"&gt;&lt;img border="0" height="640" src="http://3.bp.blogspot.com/-mG-eIhObX-U/VbGEpUImrjI/AAAAAAAAADk/UPQkEUPFsKg/s640/cpu-mixedmode-flamegraph-java.png" width="606" /&gt;&lt;/a&gt;&lt;br /&gt;Click to zoom (&lt;a href="http://www.brendangregg.com/FlameGraphs/cpu-mixedmode-flamegraph-java.svg"&gt;SVG&lt;/a&gt;, &lt;a href="http://3.bp.blogspot.com/-mG-eIhObX-U/VbGEpUImrjI/AAAAAAAAADk/UPQkEUPFsKg/s1600/cpu-mixedmode-flamegraph-java.png"&gt;PNG&lt;/a&gt;). Showing all CPU usage with Java context is amazing and useful. On the top right you can see a peak of kernel code (colored red) for performing a TCP send (which often leads to a TCP receive while handling the send). Beneath it (colored green) is the Java code responsible. In the middle (colored green) is the Java code that is running on-CPU. And in the bottom left, a small yellow tower shows CPU time spent in GC.&lt;br /&gt;&lt;br /&gt;We've already used Java flame graphs to quantify performance improvements between frameworks (Tomcat vs rxNetty), which included identifying time spent in Java code compilation, the Java code cache, other system libraries, and differences in kernel code execution. All of these CPU consumers were invisible to other Java profilers, which only focus on the execution of Java methods.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Flame Graph Interpretation&lt;/span&gt;&lt;br /&gt;&lt;div style="float: right; padding-left: 10px;"&gt;&lt;a href="http://www.slideshare.net/brendangregg/blazing-performance-with-flame-graphs/40"&gt;&lt;img height="236" src="https://lh5.googleusercontent.com/ydkoyclGXNq8zpqyZ1SmFyntib7MMpaI1TAe_FgDERug9pPZKVbKrw7jTVK2xM3qJSwOjpAK2mNjUW4W7r1Vsl3CqCEsBuNj3ur4ekFmuV2lQgknoV7QYrc7lsDmODzBMFkvDVM" width="320" /&gt;&lt;/a&gt;&lt;/div&gt;If you are new to flame graphs: The y axis is stack depth, and the x axis spans the sample population. Each rectangle is a stack frame (a function), where the width shows how often it was present in the profile. The ordering from left to right is unimportant (the stacks are sorted alphabetically).&lt;br /&gt;&lt;br /&gt;In the previous example, color hue was used to highlight different code types: green for Java, yellow for C++, and red for system. Color intensity was simply randomized to differentiate frames (other color schemes are possible).&lt;br /&gt;&lt;br /&gt;You can read the flame graph from the bottom up, which follows the flow of code from parent to child functions. Another way is top down, as the top edge shows the function running on CPU, and beneath it is its ancestry. Focus on the widest functions, which were present in the profile the most. See the&lt;a href="http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html"&gt; CPU flame graphs&lt;/a&gt; page for more about interpretation, and Brendan's&lt;a href="http://www.slideshare.net/brendangregg/blazing-performance-with-flame-graphs/39"&gt; USENIX/LISA'13 talk&lt;/a&gt; (&lt;a href="https://youtu.be/nZfNehCzGdw?t=21m43s"&gt;video&lt;/a&gt;). &lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;The Problem with Profilers&lt;/span&gt;&lt;br /&gt;In order to generate flame graphs, you need a profiler that can sample stack traces. There have historically been two types of profilers used on Java:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;System profilers&lt;/b&gt;: such as Linux perf_events, which can profile system code paths, including libjvm internals, GC, and the kernel, but not Java methods.&lt;/li&gt;&lt;li&gt;&lt;b&gt;JVM profilers&lt;/b&gt;: such as hprof, Lightweight Java Profiler (LJP), and commercial profilers. These show Java methods, but not system code paths.&lt;/li&gt;&lt;/ul&gt;To understand all types of CPU consumers, we previously used both types of profilers, creating a flame graph for each. This worked – sort of. While all CPU consumers could be seen, Java methods were missing from the system profile, which was crucial context we needed.&lt;br /&gt;&lt;br /&gt;Ideally, we would have one flame graph that shows it all: system and Java code together.&lt;br /&gt;&lt;br /&gt;&lt;div style="float: right; padding-left: 10px;"&gt;&lt;a href="http://www.slideshare.net/brendangregg/performance-tuning-ec2-instances/62"&gt;&lt;img height="191" src="https://lh6.googleusercontent.com/WN3UvlvniPDB4XR00cuLfHHpAuwqoim38zErdFNP9ApPiVNCnXZtETQYUMFOHMecWhP2dhvtEE96M2LE16V92tzPCMaHxMpSyMXNgdmm-acqGpuB0WFOCnpPVRAEUGSavGTqhLE" width="320" /&gt;&lt;/a&gt;&lt;/div&gt;A system profiler like Linux perf_events should be well suited to this task as it can interrupt any software asynchronously and capture both user- and kernel-level stacks. However, system profilers don't work well with Java. The problem is shown by the flame graph on the right. The Java stacks and method names are missing.&lt;br /&gt;&lt;br /&gt;There were two specific problems to solve:&lt;br /&gt;&lt;ol&gt;&lt;li&gt;The JVM compiles methods on the fly (just-in-time: JIT), and doesn't expose a symbol table for system profilers.&lt;/li&gt;&lt;li&gt;The JVM also uses the frame pointer register on x86 (RBP on x86-64) as a general-purpose register, breaking traditional stack walking.&lt;/li&gt;&lt;/ol&gt;Brendan summarized these earlier this year in his &lt;a href="http://www.brendangregg.com/blog/2015-02-27/linux-profiling-at-netflix.html"&gt;Linux Profiling at Netflix&lt;/a&gt; talk for SCALE. Fortunately, there was already a fix for the first problem.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Fixing Symbols&lt;/span&gt;&lt;br /&gt;In 2009, Linux perf_events added&lt;a href="https://lkml.org/lkml/2009/6/8/499"&gt; JIT symbol support&lt;/a&gt;, so that symbols from language virtual machines like the JVM could be inspected. To use it, your application creates a /tmp/perf-PID.map text file, which lists symbol addresses (in hex), sizes, and symbol names. perf_events looks for this file by default and, if found, uses it for symbol translations.&lt;br /&gt;&lt;br /&gt;Java can create this file using&lt;a href="https://github.com/jrudolph/perf-map-agent"&gt; perf-map-agent&lt;/a&gt;, an open source JVMTI agent written by Johannes Rudolph. The first version needed to be attached on Java startup, but Johannes enhanced it to attach later on demand and take a symbol dump. That way, we only load it if we need it for a profile. Thanks, Johannes!&lt;br /&gt;&lt;br /&gt;Since symbols can change slightly during the profile (we’re typically profiling for 30 or 60 seconds), a symbol dump may include stale symbols. We’ve looked at taking two symbol dumps, before and after the profile, to highlight any such differences. Another approach in development involves a timestamped symbol log to ensure that all translations are accurate (although this requires always-on logging of symbols). So far symbol churn hasn’t been a large problem for us, after Java and JIT have “warmed up” and symbol churn is minimal (this can take a few minutes, given sufficient load). We do bear it in mind when interpreting flame graphs.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Fixing Frame Pointers&lt;/span&gt;&lt;br /&gt;For many years the gcc compiler has reused the frame pointer as a compiler optimization, breaking stack traces. Some applications compile with the gcc option &lt;span style="font-family: Courier New, Courier, monospace;"&gt;-fno-omit-frame-pointer&lt;/span&gt;, to preserve this type of stack walking, however, the JVM had no equivalent option. Could the JVM be modified to support this?&lt;br /&gt;&lt;br /&gt;Brendan was curious to find out, and hacked a working prototype for OpenJDK. It involved dropping RBP from eligible register pools, eg (diff):&lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;--- openjdk8clean/hotspot/src/cpu/x86/vm/x86_64.ad      2014-03-04 02:52:11.000000000 +0000&lt;br /&gt;+++ openjdk8/hotspot/src/cpu/x86/vm/x86_64.ad   2014-11-08 01:10:49.686044933 +0000&lt;br /&gt;@@ -166,10 +166,9 @@&lt;br /&gt; // 3) reg_class stack_slots( /* one chunk of stack-based "registers" */ )&lt;br /&gt; //&lt;br /&gt;&lt;br /&gt;-// Class for all pointer registers (including RSP)&lt;br /&gt;+// Class for all pointer registers (including RSP, excluding RBP)&lt;br /&gt; reg_class any_reg(RAX, RAX_H,&lt;br /&gt;                   RDX, RDX_H,&lt;br /&gt;-                  RBP, RBP_H,&lt;br /&gt;                   RDI, RDI_H,&lt;br /&gt;                   RSI, RSI_H,&lt;br /&gt;                   RCX, RCX_H,&lt;br /&gt;&lt;/pre&gt;... and then fixing the function prologues to store the stack pointer (rsp) into the frame pointer (base pointer) register (rbp):&lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;--- openjdk8clean/hotspot/src/cpu/x86/vm/macroAssembler_x86.cpp 2014-03-04 02:52:11.000000000 +0000&lt;br /&gt;+++ openjdk8/hotspot/src/cpu/x86/vm/macroAssembler_x86.cpp      2014-11-07 23:57:11.589593723 +0000&lt;br /&gt;@@ -5236,6 +5236,7 @@&lt;br /&gt;     // We always push rbp, so that on return to interpreter rbp, will be&lt;br /&gt;     // restored correctly and we can correct the stack.&lt;br /&gt;     push(rbp);&lt;br /&gt;+    mov(rbp, rsp);&lt;br /&gt;     // Remove word for ebp&lt;br /&gt;     framesize -= wordSize;&lt;br /&gt;&lt;/pre&gt;It worked. Here are the &lt;a href="http://www.brendangregg.com/FlameGraphs/cpu-mixedmode-nofp.svg"&gt;before&lt;/a&gt; and &lt;a href="http://www.brendangregg.com/FlameGraphs/cpu-mixedmode-vertx.svg"&gt;after&lt;/a&gt; flame graphs. Brendan posted it, with example flame graphs, to the&lt;a href="http://mail.openjdk.java.net/pipermail/hotspot-compiler-dev/2014-December/016477.html"&gt; hotspot compiler devs mailing list&lt;/a&gt;. This feature request became&lt;a href="https://bugs.openjdk.java.net/browse/JDK-8068945"&gt; JDK-8068945&lt;/a&gt; for JDK9 and&lt;a href="https://bugs.openjdk.java.net/browse/JDK-8072465"&gt; JDK-8072465&lt;/a&gt; for JDK8.&lt;br /&gt;&lt;br /&gt;Fixing this properly involved a lot more work (see discussions in the bugs and mailing list). Zoltán Majó, of Oracle, took this on and rewrote the patch. After testing, it was finally integrated into the early access releases of both&lt;a href="https://jdk9.java.net/download/"&gt; JDK9&lt;/a&gt; and&lt;a href="https://jdk8.java.net/download.html"&gt; JDK8&lt;/a&gt; (JDK8 update 60 build 19), as the new JDK option: &lt;span style="font-family: Courier New, Courier, monospace;"&gt;-XX:+PreserveFramePointer&lt;/span&gt;.&lt;br /&gt;&lt;br /&gt;Many thanks to Zoltán, Oracle, and the other engineers who helped get this done!&lt;br /&gt;&lt;br /&gt;Since use of this mode disables a compiler optimization, it does decrease performance slightly. We've found in tests that this costs between 0 and 3% extra CPU, depending on the workload. See&lt;a href="https://bugs.openjdk.java.net/browse/JDK-8068945"&gt; JDK-8068945&lt;/a&gt; for some additional benchmarking details. There are also other techniques for walking stacks, some with zero run time cost to make available, however, there are other downsides with these approaches.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Instructions&lt;/span&gt;&lt;br /&gt;The following steps describe how these flame graphs can be created. We’re working on improving and automating these steps using Vector (more on that in a moment).&lt;br /&gt;&lt;br /&gt;&lt;div&gt;&lt;span style="font-family: Trebuchet MS, sans-serif; font-size: large;"&gt;1. Install software&lt;/span&gt;&lt;br /&gt;There are four components to install:&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif;"&gt;&lt;b&gt;Linux perf_events&lt;/b&gt;&lt;/span&gt;&lt;br /&gt;This is the standard Linux profiler, aka “perf” after its front end, and is included in the Linux source (tools/perf). Try running &lt;span style="font-family: Courier New, Courier, monospace;"&gt;perf help&lt;/span&gt;&amp;nbsp;to see if it is installed; if not, your distro may suggest how to get it, usually by adding a perf-tools-common package.&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif;"&gt;&lt;b&gt;Java 8 update 60 build 19 (or newer)&lt;/b&gt;&lt;/span&gt;&lt;br /&gt;This includes the frame pointer patch fix (JDK-8072465), which is necessary for Java stack profiling. It is currently released as &lt;a href="https://jdk8.java.net/download.html"&gt;early access&lt;/a&gt; (built from OpenJDK).&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif;"&gt;&lt;b&gt;perf-map-agent&lt;/b&gt;&lt;/span&gt;&lt;br /&gt;This is a JVMTI agent that provides Java symbol translation for perf_events is on &lt;a href="https://github.com/jrudolph/perf-map-agent"&gt;github&lt;/a&gt;. Steps to build this typically involve: &lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;apt-get install cmake&lt;br /&gt;export JAVA_HOME=/path-to-your-new-jdk8&lt;br /&gt;git clone --depth=1 https://github.com/jrudolph/perf-map-agent&lt;br /&gt;cd perf-map-agent&lt;br /&gt;cmake .&lt;br /&gt;make&lt;br /&gt;&lt;/pre&gt;The current version of perf-map-agent can be loaded on demand, after Java is running.&lt;br /&gt;WARNING: perf-map-agent is experimental code – use at your own risk, and test before use!&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif;"&gt;&lt;b&gt;FlameGraph&lt;/b&gt;&lt;/span&gt;&lt;br /&gt;This is some Perl software for generating flame graphs. It can be fetched from &lt;a href="https://github.com/brendangregg/FlameGraph"&gt;github&lt;/a&gt;: &lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;git clone --depth=1 https://github.com/brendangregg/FlameGraph&lt;/pre&gt;This contains stackcollapse-perf.pl, for processing perf_events profiles, and flamegraph.pl, for generating the SVG flame graph.&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif; font-size: large;"&gt;2. Configure Java&lt;/span&gt;&lt;br /&gt;Java needs to be running with the &lt;span style="font-family: Courier New, Courier, monospace;"&gt;-XX:+PreserveFramePointer&lt;/span&gt; option, so that perf_events can perform frame pointer stack walks. As mentioned earlier, this can cost some performance, between 0 and 3% depending on the workload.&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif; font-size: large;"&gt;3a. Generate System Wide Flame Graphs&lt;/span&gt;&lt;br /&gt;With this software and Java running with frame pointers, we can profile and generate flame graphs.&lt;br /&gt;&lt;br /&gt;For example, taking a 30-second profile at 99 Hertz (samples per second) of all processes, then caching symbols for Java PID 1690, then generating a flame graph:  &lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;sudo perf record -F 99 -a -g -- sleep 30&lt;br /&gt;java -cp attach-main.jar:$JAVA_HOME/lib/tools.jar net.virtualvoid.perf.AttachOnce 1690    # run as same user as java&lt;br /&gt;sudo chown root /tmp/perf-*.map&lt;br /&gt;sudo perf script | stackcollapse-perf.pl | \&lt;br /&gt;    flamegraph.pl --color=java --hash &amp;gt; flamegraph.svg&lt;br /&gt;&lt;/pre&gt;The attach-main.jar file is from perf-map-agent, and stackcollapse-perf.pl and flamegraph.pl are from FlameGraph. Specify their full paths unless they are in the current directory.&lt;br /&gt;&lt;br /&gt;These steps address some quirky behavior involving user permissions: sudo perf script only reads symbol files the current user (root) owns, and, perf-map-agent creates files with the same user ownership as the Java process, which for us is usually non-root. This means we have to change the ownership to root for the symbol file, and then run perf script.&lt;br /&gt;&lt;br /&gt;&lt;b&gt;With jmaps&lt;/b&gt;&lt;br /&gt;Dealing with symbol files has become a chore, so we’ve been automating it. Here’s one example: &lt;a href="https://github.com/brendangregg/Misc/blob/master/java/jmaps"&gt;jmaps&lt;/a&gt;, which can be used like so:  &lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;sudo perf record -F 99 -a -g -- sleep 30; sudo jmaps&lt;br /&gt;sudo perf script | stackcollapse-perf.pl | \&lt;br /&gt;    flamegraph.pl --color=java --hash &amp;gt; flamegraph.svg&lt;br /&gt;&lt;/pre&gt;jmaps creates symbol files for all Java processes, with root ownership. You may want to write a similar “jmaps” helper for your environment (our jmaps example is unsupported). Remember to clean up the /tmp symbol files when you no longer need them!&lt;br /&gt;&lt;br /&gt;&lt;span style="font-family: Trebuchet MS, sans-serif; font-size: large;"&gt;3b. Generate By-Process Flame Graphs&lt;/span&gt;&lt;br /&gt;The previous procedure grouped Java processes together. If it is important to separate them (and, on some of our instances, it is), you can modify the procedure to generate a by-process flame graph. Eg (with jmaps):  &lt;br /&gt;&lt;pre style="background-color: #eeeeee; font-size: 12px;"&gt;sudo perf record -F 99 -a -g -- sleep 30; sudo jmaps&lt;br /&gt;sudo perf script -f comm,pid,tid,cpu,time,event,ip,sym,dso,trace | \&lt;br /&gt;    stackcollapse-perf.pl --pid | \&lt;br /&gt;    flamegraph.pl --color=java --hash &amp;gt; flamegraph.svg&lt;br /&gt;&lt;/pre&gt;The output of stackcollapse-perf.pl formats each stack as a single line, and is great food for grep/sed/awk. For the flamegraph at the top of this post, we used the above procedure, and added “| grep java-339” before the “| flamegraph.pl”, to isolate that one process. You could also use a “| grep -v cpu_idle”, to exclude the kernel idle threads.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Missing Frames&lt;/span&gt;&lt;br /&gt;If you start using these flame graphs, you’ll notice that many Java frames (methods) are missing. Compared to the jstack(1) command line tool, the stacks seen in the flame graph look perhaps one third as deep, and are missing many frames. This is because of inlining, combined with this type of profiling (frame pointer based) which only captures the final executed code.&lt;br /&gt;&lt;br /&gt;This hasn’t been much of a problem so far: even when many frames are missing, enough remain that we can figure out what’s going on. We’ve also experimented with reducing the amount of inlining, eg, using &lt;span style="font-family: Courier New, Courier, monospace;"&gt;-XX:InlineSmallCode=500&lt;/span&gt;, to increase the number of frames in the profile. In some cases this even improves performance slightly, as the final compiled instruction size is reduced, fitting better into the processor caches (we confirmed this using perf_events separately).&lt;br /&gt;&lt;br /&gt;Another approach is to use JVMTI information to unfold the inlined symbols. perf-map-agent has a mode to do this; however, Min Zhou from LinkedIn has experienced Java crashes when using this, which he has been fixing in his &lt;a href="https://github.com/coderplay/perfj/blob/master/src/perfj/c/perf-map-agent.c"&gt;version&lt;/a&gt;. We’ve not seen these crashes (as we rarely use that mode), but be warned.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Vector&lt;/span&gt;&lt;br /&gt;The previous steps for generating flame graphs are a little tedious. As we expect these flame graphs will become an everyday tool for Java developers, we’ve looked at making them as easy as possible: a point-and-click interface. We’ve been prototyping this with our open source instance analysis tool: Vector.&lt;br /&gt;&lt;br /&gt;&lt;div style="float: right; padding-left: 10px;"&gt;&lt;a href="http://1.bp.blogspot.com/-97wZqylyzQg/VbJnzMnK2JI/AAAAAAAAAEA/ibagR_BDHXQ/s1600/vector05red.png" imageanchor="1"&gt;&lt;img border="0" height="256" src="http://4.bp.blogspot.com/-3Yv_QtN02T0/VbJm4BLnnTI/AAAAAAAAAD4/kruHulUOBFQ/s320/vector05crop_red.png" width="280" /&gt;&lt;/a&gt;&lt;/div&gt;Vector was described in more details in a &lt;a href="http://techblog.netflix.com/2015/04/introducing-vector-netflixs-on-host.html"&gt;previous techblog post&lt;/a&gt;. It provides a simple way for users to visualize and analyze system and application-level metrics in near real-time, and flame graphs is a great addition to the set of functionalities it already provides. &lt;br /&gt;&lt;br /&gt;We tried to keep the user interaction as simple as possible. To generate a flame graph, you connect Vector to the target instance, add the flame graph widget to the dashboard, then click the generate button. That's it!&lt;br /&gt;&lt;br /&gt;Behind the scenes, Vector requests a flame graph from a custom instance agent that we developed, which also supplies Vector's other metrics. Vector checks the status of this request while fetching and displaying other metrics, and displays the flame graph when it is ready.&lt;br /&gt;&lt;br /&gt;Our custom agent is not generic enough to be used by everyone yet (it depends on the Netflix environment), so we have yet to open-source it. If you're interested in testing or extending it, reach out to us.&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Future Work&lt;/span&gt;&lt;br /&gt;We have some enhancements planned. One is for regression analysis, by automatically collecting flame graphs over different days and generating &lt;a href="http://www.brendangregg.com/blog/2014-11-09/differential-flame-graphs.html"&gt;flame graph differentials&lt;/a&gt; for them. This will help us quickly understand changes in CPU usage due to software changes.&lt;br /&gt;&lt;br /&gt;Apart from CPU profiling, perf_events can also trace user- and kernel-level events, including disk I/O, networking, scheduling, and memory allocation. When these are synchronously triggered by Java, a mixed-mode flame graph will show the code paths that led to these events. A page fault mixed-mode flame graph, for example, can be used to show which Java code paths led to an increase in main memory usage (RSS).&lt;br /&gt;&lt;br /&gt;We also want to develop enhancements for flame graphs and Vector, including real time updates. For this to work, our agent will collect perf_events directly and return a data structure representing the partial flame graph to Vector with every check. Vector, with this information, will be able to assemble the flame graph in real time, while the profile is still being collected. We are also investigating using D3 for flame graphs, and adding interactivity improvements.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Other Work&lt;/span&gt;&lt;br /&gt;Twitter have also explored making perf_events and Java work better together, which Kaushik Srenevasan summarized in his Tracing and Profiling talk from OSCON 2014 (&lt;a href="https://speakerdeck.com/kaushik/tracing-and-profiling-java-and-native-applications-in-production"&gt;slides&lt;/a&gt;). Kaushik showed that perf_events has much lower overhead when compared to some other Java profilers, and included a mixed-mode stack trace from perf_events. David Keenan from Twitter also described this work in his Twitter-Scale Computing talk (&lt;a href="https://youtu.be/szvHghWyuoQ?t=25m15s"&gt;video&lt;/a&gt;), as well as summarizing other performance enhancements they have been making to the JVM.&lt;br /&gt;&lt;br /&gt;At Google, Stephane Eranian has been working on perf_events and Java as well and has posted a &lt;a href="https://lkml.org/lkml/2015/3/30/749"&gt;patch series&lt;/a&gt; that supports a timestamped JIT symbol transaction log from Java for accurate symbol translation, solving the stale symbol problem. It’s impressive work, although a downside with the logging technique may be the performance cost of always logging symbols even if a profiler is never used.&lt;br /&gt;&lt;br /&gt;&lt;span style="display: inline-block; font-family: Trebuchet MS, sans-serif; font-size: 22px; padding-bottom: 8px;"&gt;Conclusion&lt;/span&gt;&lt;br /&gt;CPU mixed-mode flame graphs help identify and quantify all CPU consumers. They show the CPU time spent in Java methods, system libraries, and the kernel, all in one visualization. This reveals CPU consumers that are invisible to other profilers, and have so far been used to identify issues and explain performance changes between software versions.&lt;br /&gt;&lt;br /&gt;These mixed-mode flame graphs have been made possible by a new option in the JVM: -XX:+PreserveFramePointer, available in early access releases. In this post we described how these work, the challenges that were addressed, and provided instructions for their generation. Similar visibility for Node.js was described in our earlier post: &lt;a href="http://techblog.netflix.com/2014/11/nodejs-in-flames.html"&gt;Node.js in Flames&lt;/a&gt;.&lt;br /&gt;&lt;br /&gt;by &lt;a href="http://www.brendangregg.com/"&gt;Brendan Gregg&lt;/a&gt;&amp;nbsp;and&amp;nbsp;&lt;a href="https://www.linkedin.com/in/martinspier"&gt;Martin Spier&lt;/a&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/07/java-in-flames.html</link>
      <author>noreply@blogger.com (Brendan Gregg)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://3.bp.blogspot.com/-mG-eIhObX-U/VbGEpUImrjI/AAAAAAAAADk/UPQkEUPFsKg/s72-c/cpu-mixedmode-flamegraph-java.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-3774095793218432463</guid>
      <pubDate>Tue, 14 Jul 2015 17:47:00 +0000</pubDate>
      <atom:updated>2015-07-14T10:47:52.197-07:00</atom:updated>
      <title>Tracking down the Villains: Outlier Detection at Netflix</title>
      <description>&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;It’s 2 a.m. and half of our reliability team is online searching for the root cause of why Netflix streaming isn’t working. None of our systems are obviously broken, but something is amiss and we’re not seeing it. After an hour of searching we realize there is one rogue server in our farm causing the problem. We missed it amongst the thousands of other servers because we were looking for a clearly visible problem, not an insidious deviant.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b id="docs-internal-guid-1f5d04df-8dad-3ca9-3339-5c5f5eb8e945" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In Netflix’s Marvel’s &lt;/span&gt;&lt;a href="http://www.netflix.com/title/80018294" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Daredevil&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, Matt Murdock uses his heightened senses to detect when a person’s actions are abnormal. This allows him to go beyond what others see to determine the non-obvious, like when someone is lying. Similar to this, we set out to build a system that could look beyond the obvious and find the subtle differences in servers that could be causing production problems. In this post we’ll describe our automated outlier detection and remediation for unhealthy servers that has saved us from countless hours of late-night heroics.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Shadows in the Glass&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The Netflix service currently runs on tens of thousands of servers; typically less than one percent of those become unhealthy. For example, a server’s network performance might degrade and cause elevated request processing latency. The unhealthy server will respond to health checks and show normal system-level metrics but still be operating in a suboptimal state. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A slow or unhealthy server is worse than a down server because its effects can be small enough to stay within the tolerances of our monitoring system and be overlooked by an on-call engineer scanning through graphs, but still have a customer impact and drive calls to customer service. Somewhere out there a few unhealthy servers lurk among thousands of healthy ones. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="NIWSErrors - hard to see outlier (can you spot).png" height="346px;" src="https://lh6.googleusercontent.com/jFsJHZUxmhxU9-Un4p3jIumN1P_M5aoMnreyG9-QlQoMDJcE4FdPzkGwFjLIWvbCJ06_xqXqu6uzx7N0gws5fThBuJickNGEYN74tIrF5o5ME3VdS_IugZlqtxjNMMna_BsGVoA" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="621px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The purple line in the graph above has an error rate higher than the norm. All other servers have spikes but drop back down to zero, whereas the purple line consistently stays above all others. Would you be able to spot this as an outlier? Is there a way to use time series data to automatically find these outliers?&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A very unhealthy server can easily be detected by a threshold alert. But threshold alerts require wide tolerances to account for spikes in the data. They also require periodic tuning to account for changes in access patterns and volume. A key step towards our goal of improving reliability is to automate the detection of servers that are operating in a degraded state but not bad enough to be detected by a threshold alert.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="outlier-just-above-the-noise-caption.png" height="338px;" src="https://lh5.googleusercontent.com/4esyFwqUuQOWor96wExxvU9iI0fg2-EA74IQhdVsxeuLfvvkw9HG1py2WoR-i17RHmrzcRPO5MocJ-G2dPsY8yL29pc4RGksJewawQWB6PHqC3DPVWzkOC7R6hnOMyvKDMkvoBI" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="621px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Finding a Rabbit in a Snowstorm&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To solve this problem we use &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Cluster_analysis" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;cluster analysis&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, which is an &lt;/span&gt;&lt;a href="https://en.wikipedia.org/?title=Unsupervised_learning" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;unsupervised machine learning&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; technique. The goal of cluster analysis is to group objects in such a way that objects in the same cluster are more similar to each other than those in other clusters. The advantage of using an unsupervised technique is that we do not need to have labeled data, i.e., we do not need to create a training dataset that contains examples of outliers. While there are many different clustering algorithms, each with their own tradeoffs, we use &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/DBSCAN" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Density-Based Spatial Clustering of Applications with Noise&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; (DBSCAN) to determine which servers are not performing like the others.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;How DBSCAN Works&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;DBSCAN is a clustering algorithm originally proposed in 1996 by Martin Ester, Hans-Peter Kriegel, Jörg Sander and Xiaowei Xu. This technique iterates over a set of points and marks as clusters points that are in regions with many nearby neighbors, while marking those in lower density regions as outliers. Conceptually, if a particular point belongs to a cluster it should be near lots of other points as measured by some distance function. For an excellent visual representation of this see Naftali Harris’ blog post on &lt;/span&gt;&lt;a href="http://www.naftaliharris.com/blog/visualizing-dbscan-clustering/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;visualizing DBSCAN clustering&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;How We Use DBSCAN &lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To use server outlier detection, a service owner specifies a metric which will be monitored for outliers. Using this metric we collect a window of data from &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/12/introducing-atlas-netflixs-primary.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Atlas&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, our primary time series telemetry platform. This window is then passed to the DBSCAN algorithm, which returns the set of servers considered outliers. For example, the image below shows the input into the DBSCAN algorithm; the red highlighted area is the current window of data:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="276px;" src="https://lh3.googleusercontent.com/N2RQUdJRNjuXvU34vCEzrecwy1cnripal8jsoEDp9lkfD7axHFPxkEX7GxCiu9SOjvDChgAcy5uAA20vzGiKx1PY4sH4LptbG9y7Mqktb9KvrfqGTHToIe7oG4t5BW2SXVCtfBA" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In addition to specifying the metric to observe, a service owner specifies the minimum duration before a deviating server is considered an outlier. After detection, control is handed off to our alerting system that can take any number of actions including:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;email or page a service owner&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;remove the server from service without terminating it&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;gather forensic data for investigation&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;terminate the server to allow the auto scaling group to replace it&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Parameter Selection&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;DBSCAN requires two input parameters for configuration; a distance measure and a minimum cluster size. However, service owners do not want to think about finding the right combination of parameters to make the algorithm effective in identifying outliers. We simplify this by having service owners define the current number of outliers, if there are any, at configuration time. Based on this knowledge, the distance and minimum cluster size parameters are selected using &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Simulated_annealing" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;simulated annealing&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. This approach has been effective in reducing the complexity of setting up outlier detection and has facilitated adoption across multiple teams; service owners do not need to concern themselves with the details of the algorithm.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Into the Ring&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To assess the effectiveness of our technique we evaluated results from a production service with outlier detection enabled. Using one week’s worth of data, we manually determined if a server should have been classified as an outlier and remediated. We then cross-referenced these servers with the results from our outlier detection system. From this, we were able to calculate a set of evaluation metrics including &lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/Precision_and_recall" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;precision&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/Precision_and_recall" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;recall&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, and &lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/F1_score" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;f-score&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="margin-left: 0pt;"&gt;&lt;table style="border-collapse: collapse; border: none; width: 624px;"&gt;&lt;colgroup&gt;&lt;col width="*"&gt;&lt;/col&gt;&lt;col width="*"&gt;&lt;/col&gt;&lt;col width="*"&gt;&lt;/col&gt;&lt;col width="*"&gt;&lt;/col&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="background-color: #d9d9d9; border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Server Count&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="background-color: #d9d9d9; border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Precision&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="background-color: #d9d9d9; border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Recall&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="background-color: #d9d9d9; border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;F-score&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: right;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;1960&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: right;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;93%&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: right;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;87%&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: right;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;90%&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;These results illustrate that we cannot perfectly distill outliers in our environment but we can get close. An imperfect solution is entirely acceptable in our cloud environment because the cost of an individual mistake is relatively low. Erroneously terminating a server or pulling one out of service has little to no impact because it will be immediately replaced with a fresh server. &amp;nbsp;When using statistical solutions for auto remediation we must be comfortable knowing that the system will not be entirely accurate; an imperfect solution is preferable to no solution at all.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The Ones We Leave Behind&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Our current implementation is based on a mini-batch approach where we collect a window of data and use this to make a decision. Compared to a real-time approach, this has the drawback that outlier detection time is tightly coupled to window size: too small and you’re subject to noise, too big and your detection time suffers. Improved approaches could leverage advancements in real-time stream processing frameworks such as &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/01/improving-netflixs-operational.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Mantis&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; (&lt;/span&gt;&lt;a href="http://www.slideshare.net/g9yuayon/qcon-talk-on-netflix-mantis-a-stream-processing-system" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix's Event Stream Processing System&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;) and &lt;/span&gt;&lt;a href="https://spark.apache.org/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Apache Spark Streaming&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. Furthermore, significant work has been conducted in the areas of &lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/Data_stream_mining" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;data stream mining&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/Online_machine_learning" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;online machine learning&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. We encourage anyone looking to implement such a system to consider using online techniques to minimize time to detect.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Parameter selection could be further improved with two additional services: a data tagger for compiling training datasets and a model server capable of scoring the performance of a model and retraining the model based on an appropriate dataset from the tagger. We’re currently tackling these problems to allow service owners to bootstrap their outlier detection by tagging data (a domain in which they are intimately familiar) and then computing the DBSCAN parameters (a domain that is likely foreign) using a bayesian parameter selection technique to optimize the score of the parameters against the training dataset.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;World on Fire&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;As Netflix’s cloud infrastructure increases in scale, automating operational decisions enables us to improve availability and reduce human intervention. Just as Daredevil uses his suit to amplify his fighting abilities, we can use machine learning and automated responses to enhance the effectiveness of our site reliability engineers and on-call developers. &amp;nbsp;Server outlier detection is one example of such automation, other examples include &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2013/12/scryer-netflixs-predictive-auto-scaling.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Scryer&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/11/hystrix.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Hystrix&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. We are exploring additional areas to automate such as:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Analysis and tuning of service thresholds and timeouts&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Automated canary analysis&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Shifting traffic in response to region-wide outages&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Automated performance tests that tune our autoscaling rules&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;These are just a few example of steps towards building self-healing systems of immense scale. &lt;/span&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;If you would like to join us in tackling these kinds of challenges, we are&lt;/span&gt;&lt;a href="http://jobs.netflix.com/" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;hiring&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;!&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;br /&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 13.3333333333333px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;by&lt;/span&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt;:&lt;/span&gt;&lt;a href="http://twitter.com/philip_pfo" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 13.3333333333333px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Philip Fisher-Ogden&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/pub/greg-burrell/3/b27/67a" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 13.3333333333333px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Greg Burrell&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt;,&lt;/span&gt;&lt;a href="https://twitter.com/chris_sanden" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 13.3333333333333px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Chris Sanden&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt;, &amp;amp;&lt;/span&gt;&lt;a href="https://twitter.com/codyrioux" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 13.3333333333333px; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 13.3333333333333px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Cody Rioux&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/07/tracking-down-villains-outlier.html</link>
      <author>noreply@blogger.com (Philip Fisher-Ogden)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-4630930818559583162</guid>
      <pubDate>Mon, 15 Jun 2015 14:13:00 +0000</pubDate>
      <atom:updated>2015-06-15T11:03:42.108-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">architecture</category>
      <category domain="http://www.blogger.com/atom/ns#">automation</category>
      <category domain="http://www.blogger.com/atom/ns#">kafka</category>
      <category domain="http://www.blogger.com/atom/ns#">pubsub</category>
      <category domain="http://www.blogger.com/atom/ns#">real-time streaming</category>
      <category domain="http://www.blogger.com/atom/ns#">websockets</category>
      <title>NTS: Real-time Streaming for Test Automation</title>
      <description>&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 10.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;by &lt;/span&gt;&lt;a href="http://twitter.com/pk11" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: 'Trebuchet MS'; font-size: 10.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Peter Hausel&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 10.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="https://www.linkedin.com/in/jwalantshah" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 10.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Jwalant Shah&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21.333333333333332px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix Test Studio&lt;/span&gt;&lt;/h1&gt;&lt;b id="docs-internal-guid-a1c41331-f00d-1915-054b-a5390b95f20c" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix members can enjoy instant access to TV shows &amp;amp; Movies on over 1400 different device/OS permutations. Assessing long-duration playback quality and delivering a great member experience on such a diverse set of playback devices presented a huge challenge to the team. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix Test Studio (NTS) was created with the goal of creating a consistent way for internal and external developers to deploy and execute tests. This is achieved by abstracting device differences. NTS also provides a standard set of tools for assessing the responsiveness and quality of the overall experience. NTS now runs over 40,000 long-running tests each day on over 600 devices around the world. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Overview&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;NTS is a cloud-based automation framework that lets you remote control most Netflix Ready Devices. In this post we’ll focus on two key aspects of the framework:&lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Collect test results in near-realtime.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A highly event driven architecture allows us to accomplish this: JSON snippets sent from the single page UI to the device and JavaScript listeners on the device firing back events. We also have a requirement to be able to play back events as they happened, just like a state machine. &lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li dir="ltr" style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Allow testers to interact with both the device and various Netflix services during execution.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Integrated tests require the control of the test execution stream in order to simulate real-world conditions. We want to simulate failures, pause, debug and resume during test execution.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A typical user interface for Test Execution using NTS&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; clear: left; color: #222222; float: left; font-family: Arial; font-size: 14.6667px; font-style: italic; font-variant: normal; font-weight: normal; margin-bottom: 1em; margin-right: 1em; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://3.bp.blogspot.com/-eOqUdmBc98g/VX7hiReV5gI/AAAAAAAAAdE/tg50dstELhU/s1600/Screen%2BShot%2B2015-06-15%2Bat%2B7.30.14%2BAM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"&gt;&lt;img border="0" height="403" src="http://3.bp.blogspot.com/-eOqUdmBc98g/VX7hiReV5gI/AAAAAAAAAdE/tg50dstELhU/s640/Screen%2BShot%2B2015-06-15%2Bat%2B7.30.14%2BAM.png" width="620" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A Typical NTS Test:&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="353px;" src="https://lh4.googleusercontent.com/SYMbblFVfzIkKPCmL1RwBeyOM2OSMbZJuSwP45FUTCWQxGwB1Z5CBSjvOeXDFpjBeiiLjtD_SV0DTXatgNCoYNcF92Donlrd7qcTZhJeDJnqZIvGeIwarqBdf9xcpu1AO_UTKzU" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="540px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30" style="font-weight: normal;"&gt;&lt;span style="font-size: 14.6667px; font-weight: bold; vertical-align: baseline;"&gt;Architecture overview&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="font-weight: normal;"&gt;&lt;span style="font-size: 14.6667px; font-weight: bold; vertical-align: baseline;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 14.666666666666666px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30" style="font-weight: normal;"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;Early implementation of NTS had a relatively simplistic design: hijack a Netflix Ready Device for automation via various redirection methods, then a Test Harness (test executor) would coordinate the execution with the help of a central, public facing Controller service. Eventually, we would get data out from the device via long polling, validate steps, and bubble up validation results back to the client. We built separate clusters of this architecture for each Netflix SDK version.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 16px; font-weight: bold; vertical-align: baseline;"&gt;Original Architecture using Long Polling &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; vertical-align: baseline;"&gt;&lt;img alt="nts_legacy_with devices.png" height="365px;" src="https://lh4.googleusercontent.com/3wPlRpyQdLQQ4NT2_mJWyLy5mHWDZK-8E_AKfMWwT0u61Rz2Emd7av4RMdbzMb3CAfmzSQ_QVXs5Dv4Lb5aDdsavwg5I9NMS1wgYNPocrsfCF8DfbRG0R5a0cyOrfyeo5ZJ4Giw" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="621px;" /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; font-weight: bold; vertical-align: baseline;"&gt;Event playback is not supported&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;This model worked relatively well in the beginning. However, as the number of supported devices, SDK’s and test cases grew, we started seeing the limitations of this approach: messages were sometimes lost, there was no way of knowing what exactly happened, error messages were misleading, tests were hard to monitor and playback real-time, finally, maintaining almost identical clusters with different test content and SDK versions was introducing an additional maintenance burden as well.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;In the next iteration of the tool, we removed the Controller service and most of the polling by introducing a WebSockets proxy &lt;/span&gt;&lt;span style="background-color: white; font-size: 14.6667px; vertical-align: baseline;"&gt;(built on top of &lt;/span&gt;&lt;a href="https://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-size: 14.6667px; text-decoration: underline; vertical-align: baseline;"&gt;JSR-356&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; font-size: 14.6667px; vertical-align: baseline;"&gt;) &lt;/span&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;that was sitting between the clients and Test Executors. We also introduced JSON-RPC as the command protocol. &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 16px; font-weight: bold; vertical-align: baseline;"&gt;Updated Version - Near-Realtime (Almost There)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; vertical-align: baseline;"&gt;&lt;img alt="nts_mono_devices.png" height="423px;" src="https://lh3.googleusercontent.com/yj169EvJFn7TCPh-GKMKibWv7OtIDcYt-Sx4wyJhEZXdmMsLUrHKCtJXfTFhdipuN3V_nFMWdYuTsMmrbvikXK8cg-qV__GbfDBhTS6UI_Bh7Pbx-klxveSFnVOiIdM3LV5ujkQ" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="612px;" /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; font-weight: bold; vertical-align: baseline;"&gt;&lt;span style="font-size: 14.6667px; line-height: 20.24px;"&gt;Pub/Sub without e&lt;/span&gt;vent playback support&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;ul style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;li dir="ltr" style="font-size: 14.6667px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38;"&gt;Test Executor submits events in a time series fashion to a Websocket Bus which terminates at Dispatcher.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38;"&gt;Client connects to a Dispatcher with session Id information. One-to-many relationship between Dispatcher and TestExecutors.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38;"&gt;Dispatcher instance keeps an internal lookup of test execution session id’s to Websocket connections to Test Executors and delivers messages received over those connections to the Client.&lt;/span&gt;&lt;/li&gt;&lt;/span&gt;&lt;/span&gt;&lt;/ul&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;This approach solved most of our issues: fewer indirections, real-time streaming capabilities, push-based design. There were only two remaining issues: message durability was still not supported and more importantly, the WebSockets proxy was difficult to scale out due to its stateful nature.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;At this point, we started looking into &lt;/span&gt;&lt;a href="http://kafka.apache.org/documentation.html" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-size: 14.6667px; text-decoration: underline; vertical-align: baseline;"&gt;Apache Kafka&lt;/span&gt;&lt;/a&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt; to replace the internal WebSocket layer with a distributed pub/sub and message queue solution.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 16px; font-weight: bold; vertical-align: baseline;"&gt;Current version - Kafka&lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; vertical-align: baseline;"&gt;&lt;img alt="nts_kafka_messaging_devices.png" height="375px;" src="https://lh3.googleusercontent.com/M0xnYaZuXlaphv3Vn5Gfatfl2eJsTuUpE0BM_IQNmy97WCVl4p9MXpgH165pgI6ln1wyQYuIsvUCW8PG_PNnK6BS3AN0OVj67FiKvOrmHCEF6mdfHGlsjGd0YDphCsIb-fvVBHU" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;/span&gt;&lt;/span&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; font-weight: bold; vertical-align: baseline;"&gt;Pub/Sub with event playback support&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span id="docs-internal-guid-a1c41331-f00d-4f71-7a1f-ced5493f1e30"&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="font-size: 14.6667px; font-weight: bold; vertical-align: baseline;"&gt;A few interesting properties of this pub/sub system:&lt;/span&gt;&lt;/div&gt;&lt;ul style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;li dir="ltr" style="font-size: 14.6667px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38; text-align: justify;"&gt;Dispatcher is responsible for handling client requests to subscribe to Test Execution events stream. &lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38; text-align: justify;"&gt;Kafka provides a scalable message queue between Test Executor and Dispatcher. Since each session id is mapped to a particular partition and each message sent to client includes the current Kafka offset, we can now guarantee reliable delivery of messages to clients with support for replay of messages in case of network reconnection.&lt;/span&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-size: 14.6667px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38; text-align: justify;"&gt;Multiple clients can subscribe to the same stream without additional overhead and admin users can view/monitor remote users test execution in real time.&lt;/span&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-size: 14.6667px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38;"&gt;The same stream is consumed for analytics purposes as well.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;li&gt;&lt;span style="font-size: 14.6667px; line-height: 1.38;"&gt;Throughput/Latency: during load testing, we could get ~90-100ms latency per message consistently with 100 concurrent users (our test setup was 6 brokers deployed on 6 d2.xlarge instances). In our production system, latency is often lower due to batching.&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="font-size: 16px; font-weight: bold; vertical-align: baseline;"&gt;Where do we go from here?&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;With HTTP/2 on the horizon, it’s unclear where WebSockets will fit in the long-run. That said, if you need a TCP-based, persistent channel now, you don’t have a better option. While we are actively migrating away from JSR-356 (and Tomcat Websocket) to &lt;/span&gt;&lt;a href="https://github.com/ReactiveX/RxNetty" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-size: 14.6667px; text-decoration: underline; vertical-align: baseline;"&gt;RxNetty&lt;/span&gt;&lt;/a&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt; due to &lt;/span&gt;&lt;a href="https://gist.github.com/pk11/36b7526fb4a04badd7a7" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-size: 14.6667px; text-decoration: underline; vertical-align: baseline;"&gt;numerous issues we ran into&lt;/span&gt;&lt;/a&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;, we continue to invest more in WebSockets. &lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="font-size: 14.6667px; font-style: normal; font-variant: normal; font-weight: normal; line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-decoration: none; white-space: pre-wrap;"&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt;As for Kafka, the transition &lt;/span&gt;&lt;a href="https://gist.github.com/pk11/36b7526fb4a04badd7a7" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-size: 14.6667px; text-decoration: underline; vertical-align: baseline;"&gt;was not problem free&lt;/span&gt;&lt;/a&gt;&lt;span style="font-size: 14.6667px; vertical-align: baseline;"&gt; either. But Kafka solved some very hard problems for us (distributed event bus, message durability, consuming a stream both as a distributed queue and pub/sub etc.) and more importantly, it opened up the door for further decoupling. As a result, &lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; vertical-align: baseline;"&gt;we are moving forward with our strategic plan to use this technology as the unified backend for our data pipeline needs.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;(Engineers who worked on this project: Jwalant Shah, Joshua Hua, Matt Sun)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; vertical-align: baseline;"&gt;&lt;span style="background-color: white; color: #222222; font-size: 14.6667px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/06/nts-real-time-streaming-for-test.html</link>
      <author>noreply@blogger.com (Peter Hausel)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://3.bp.blogspot.com/-eOqUdmBc98g/VX7hiReV5gI/AAAAAAAAAdE/tg50dstELhU/s72-c/Screen%2BShot%2B2015-06-15%2Bat%2B7.30.14%2BAM.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-7732453079216336232</guid>
      <pubDate>Thu, 04 Jun 2015 18:21:00 +0000</pubDate>
      <atom:updated>2015-06-04T12:37:10.631-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">content platform engineering</category>
      <category domain="http://www.blogger.com/atom/ns#">localization</category>
      <category domain="http://www.blogger.com/atom/ns#">localization platform engineering</category>
      <title>Localization Technologies at Netflix</title>
      <description>&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Calibri; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;The localization program at Netflix is centered around linguistic excellence, a great team environment, and cutting-edge technology. The program is only 4 years old, which for a company our size is unusual to find. We’ve built a team and toolset representative of the scope and scale that a localization team needs to operate at in 2015, not one that is bogged down with years of legacy process and technology, as is often the case.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We haven’t been afraid to experiment with new localization models and tools, going against localization industry norms and achieving great things along the way. At Netflix we are given the freedom to trailblaze.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In this blog post we’re going to take a look at two major pieces of technology we’ve developed to assist us on our path to global domination…&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix Global String Repository&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Having great content by itself is not enough to make Netflix successful; how the content is presented has a huge impact. Having an intuitive, easy to use, and localized user interface (UI) contributes significantly to Netflix's success. Netflix is available on the web and on a vast number of devices and platforms including Apple iOS, Google Android, Sony PlayStation, Microsoft Xbox, and TVs from Sony, Panasonic, etc. Each of these platforms has their own standards for internationalization, and that poses a challenge to our localization team.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Here are some situations that require localization of UI strings:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- New languages are introduced&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- New features are developed&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- Fixes are made to current text data&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Traditionally, getting UI strings translated is a high-touch process where a localization PM partners with a dev team to understand where to get the source strings from, what languages to translate them into, and where to deliver the final localized files. This gets further complicated when multiple features are being developed in parallel using different branches in Git.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Once translations are completed and the final files delivered, an application typically goes through a build, test and deploy process. For device UIs, a build might need additional approval from a third party like Apple. This causes unnecessary delays, especially in cases where a fix to a string needs to be rolled out immediately.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;What if we can make this whole process transparent to the various stakeholders – developers, and localization? What if we can make builds unnecessary when fixes to text need to be delivered?&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In order to answer those questions we have developed a global repository for UI strings, called Global String Repository, that allows teams to store their localized string data and pull it out at runtime. We have also integrated Global String Repository with our current localization pipeline making the whole process of localization seamless. All translations are available immediately for consumption by applications.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Global String Repository allows isolation through bundles and namespaces. A bundle is a container for string data across multiple languages. A namespace is a placeholder for bundles that are being worked upon. There is a default namespace that is used for publishing. A simple workflow would be:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;ol style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A developer makes a change to the English string data in a bundle in a namespace&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Translation workflows are automatically triggered&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Linguist completes the translation workflow&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Translations are made available to the bundle in the namespace&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Applications have a choice when integrating with Global String Repository:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Runtime: Allows fast propagation of changes to UIs&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Build time: Uses Global String Repository solely for localization but packages the data with the builds&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Global String Repository allows build time integration by making all necessary localized data available through a simple REST API.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We expose the Global String Repository via the Netflix edge APIs and it is subjected to the same scaling and availability requirements as the other metadata APIs. It is a critical piece especially for applications that are integrating at runtime. With over 60 million customers, a large portion of whom stream Netflix on devices, Global String Repository is in the critical path.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;True to the Netflix way, Global String Repository is comprised of a back-end microservice and a UI. The microservice is built as a Java web application using Apache Cassandra and ElasticSearch. It is deployed in AWS across 3 regions. We collect telemetry for every API interaction.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The Global String Repository UI is developed using Node.js, Bootstrap and Backbone and is also deployed in the AWS cloud.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On the client side, Global String Repository exposes REST APIs to retrieve string data and also offers a Java client with in-built caching.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;While we have Global String Repository up and running, there is still a long way to go. Some of the things we are currently working on are:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- Enhancing support for quantity strings (plurals) and gender based strings&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- Making the solution more resilient to failures&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- Improving scalability&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;- Supporting multiple export formats (Android XML, Microsoft .Resx, etc)&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The Global String Repository has no binding to Netflix's business domain, so we plan on releasing it as open source software.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 12pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Hydra&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix, as a soon-to-be global service, supports many locales across myriad of device/UI combinations; testing this manually just does not scale. Previously, members of the localization and UI teams would manually use actual devices, from game consoles to iOS and Android, to see all of these strings in context to test for both the content as well as any UI issues, such as truncations.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;At Netflix, we think there is always a better way; with that attitude we rethought how we do in context, on device localization testing, and Hydra was born.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The motivation behind Hydra is to catalogue every possible unique screen and allow anyone to see a specific set of screens that they are interested in, across a wide range of filters including devices and locales. For example, as a German localization specialist you could, by selecting the appropriate filters, see the non-member flow in German across PS3, Website and Android. These screens can then be reviewed in a fraction of the time it would take to get to all of those different screens across those devices.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;How Screens Reach Hydra&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Hydra itself does not take any of the screens, it serves to catalogue and display them. To get screens into Hydra, we leverage our existing UI automation. Through Jenkins CI jobs, data driven tests are run in parallel across all supported locales, to take screenshots and post them screens to Hydra with appropriate metadata, including page name, feature area, major UI platform, and one critical piece of metadata, unique screen definition.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The purpose of the unique screen definition is to have a full catalogue of screens without any unnecessary overlap. This allows for fewer screens to be reviewed as well as for longer term to be able to compare a given screen against itself over time. The definition of a unique screen is different from UI to UI, for browser it is a combination of page name, browser, resolution, local and dev environment.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The Technology&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="hydraPost.jpg" height="383px;" src="https://lh3.googleusercontent.com/RRSQF4LkljQut5m1aDjC8aMhLu-JEo5-y3Ln6TYM7-U5-YNgF537j3k-YjJ2H6Lz-p_yWI2-ioQG6XlCDlat2LJ-nyVoUMBwBxwXWMa5mze6ttcIYffJMwj5I4_h3oMoMVMjlhU" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Hydra is a full stack web application deployed to AWS. The Java based backend has two main functions, it processes incoming screenshots and exposes data to the frontend through rest APIs. When the UI automation posts a screen to Hydra, the image file itself is written to S3, allowing for more or less infinite storage, and the much smaller metadata is written to a RDS database so as to be queried later through the rest APIs. The rest endpoints provide a mapping of query string params to MySQL queries.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;For example:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #303942; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;REST/v1/lists/distinctList?item=feature&amp;amp;selectors=uigroup,TVUI;area,signupwizard;locale,da-DK&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This call would essentially map to this query to populate the values for the ‘feature’ filter:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;select distinct feature where uigroup = ‘TVUI’ AND area = ‘signupwizard’ AND locale = ‘da-DK’&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The JavaScript frontend, which leverages knockout.js, serves to allow users to select filters and view the screens that match those filters. The content of the filters as well as the screens that match the filters that are already selected are both provided by making calls to the rest endpoints mentioned above.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Allowing for Scale&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;With Hydra in place and the automation running, adding support for new locales becomes as easy as adding one line to an existing property file that feeds the testNG data provider. The screens in the new locale will then flow in with the next Jenkins builds that run.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Next Steps&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;One known improvement is to have a mechanism to know when a screen has changed. In its current state, if a string changes there is nothing that automatically identifies that a screen has changed. Hydra could evolve into more or less a work queue, localization experts could login and see only the specific set of screens that have changed.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Another feature would be to have the ability to map individual string keys map to which screens. This would allow a translator to change a string, and then search for that string key, and see the screens that are affected by that change. This allows the translator to be able to see that string change in context before even making it.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;If what we’re doing here at Netflix with regards to localization technology excites you, please take a moment to review the open positions on our Localization Platform Engineering team:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;a href="https://jobs.netflix.com/jobs/1641/apply" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;https://jobs.netflix.com/jobs/1641/apply&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;a href="https://jobs.netflix.com/jobs/1642/apply" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;https://jobs.netflix.com/jobs/1642/apply&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-b5a3a77e-bfc2-ddfb-4dfd-d2a5e0b65a73"&gt;&lt;br /&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We like big challenges and have no shortage of them to work on. We currently operate in 50 countries, by the end of 2016 that number will grow to 200. Netflix will be a truly global product and our localization team needs to scale to support that. Challenges like these have allowed us to attract the best and brightest talent, and we’ve built a team that can do what seems impossible.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="line-height: 20.7000007629395px;"&gt;by &lt;/span&gt;&lt;a href="http://www.linkedin.com/in/timjbrandall" style="line-height: 20.7000007629395px;"&gt;Tim Brandall&lt;/a&gt;&lt;span style="line-height: 20.7000007629395px;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/in/prosenjit" style="line-height: 20.7000007629395px;"&gt;Prosenjit Bhattacharyya&lt;/a&gt;&lt;span style="line-height: 20.7000007629395px;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/in/kunalbisla" style="line-height: 20.7000007629395px;"&gt;Kunal Bisla&lt;/a&gt;&lt;span style="line-height: 20.7000007629395px;"&gt;, and &lt;/span&gt;&lt;a href="https://www.linkedin.com/in/stevendswanson" style="line-height: 20.7000007629395px;"&gt;Steve Swanson&lt;/a&gt;&lt;/span&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/06/localization-technologies-at-netflix.html</link>
      <author>noreply@blogger.com (Tim Brandall)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-2230477710397105647</guid>
      <pubDate>Wed, 27 May 2015 14:09:00 +0000</pubDate>
      <atom:updated>2015-05-27T07:40:19.453-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">cloud</category>
      <category domain="http://www.blogger.com/atom/ns#">CO2</category>
      <category domain="http://www.blogger.com/atom/ns#">efficiency</category>
      <category domain="http://www.blogger.com/atom/ns#">energy</category>
      <category domain="http://www.blogger.com/atom/ns#">footprint</category>
      <category domain="http://www.blogger.com/atom/ns#">green</category>
      <category domain="http://www.blogger.com/atom/ns#">renewable</category>
      <title>Netflix Streaming - More Energy Efficient than Breathing</title>
      <description>&lt;h2&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 21px; font-weight: normal; line-height: 1.38; white-space: pre-wrap;"&gt;Netflix Streaming: Energy Consumption for 2014 was 0.0013 kWh per Streaming Hour Delivered&lt;/span&gt;&lt;/h2&gt;&lt;div&gt;&lt;div dir="ltr" style="margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;ul style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-74ff52a3-9301-babe-c249-a9a6b37ec7b4"&gt;&lt;li dir="ltr" style="font-family: 'Trebuchet MS'; font-size: 17px; font-weight: bold; list-style-type: disc; vertical-align: baseline;"&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;36% was from renewable sources&lt;/span&gt;&lt;/h3&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: 'Trebuchet MS'; font-size: 17px; font-weight: bold; list-style-type: disc; vertical-align: baseline;"&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;28% was offset with renewable energy credits&lt;/span&gt;&lt;/h3&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: 'Trebuchet MS'; font-size: 17px; font-weight: bold; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div&gt;&lt;span style="font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;We plan to be fully offset by 2015, and to increase the contribution of renewable sources&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: 'Trebuchet MS'; font-size: 17px; font-weight: bold; list-style-type: disc; vertical-align: baseline;"&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Carbon footprint of about 300g of CO2 per customer represents about 0.007% of the typical US household footprint of 43,000 kg (48 tons) of CO2 per year&lt;/span&gt;&lt;/h3&gt;&lt;/li&gt;&lt;/span&gt;&lt;/ul&gt;&lt;span id="docs-internal-guid-74ff52a3-9301-babe-c249-a9a6b37ec7b4"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div style="line-height: 1.38;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Since 2007 when Netflix launched its streaming service, usage has grown exponentially. Last quarter alone, our 60 million members collectively enjoyed 10 billion streaming hours worldwide.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix streaming consumes energy in two main ways:&lt;/span&gt;&lt;/div&gt;&lt;ol style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The majority of our technology is operated in the Amazon Web Services (AWS) cloud platform. AWS offers us unprecedented global scale, hosting tens of thousands of virtual instances and many petabytes of data across several cloud regions.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The audio-video media itself is delivered from “Open Connect” content servers, which are forward positioned close to, or inside of, ISP networks for efficient delivery.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In addition, energy is consumed by:&lt;/span&gt;&lt;/div&gt;&lt;ol start="3" style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The ISP networks, which carry the data across “the last mile” from our content servers to our customers.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: decimal; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The “consumer premises equipment” (CPE) that includes cable or DSL modems, routers, WiFi access points, set-top boxes, and TVs, laptops, tablets, and phones.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;First and foremost, we have focused on efficiency -- making sure that the technology we have built and use is as efficient as possible, which helps with all four components: those for which Netflix is responsible, and those associated with ISP operations and consumer choices. &amp;nbsp;Then we have focused on procuring renewables or offsets for the power that our own systems consume.&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;AWS Footprint&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Because Netflix relies more heavily on AWS regions that are powered primarily by renewable energy (including the carbon-neutral Oregon region), our energy mix is approximately 50% from renewable sources today. We mitigate all of the remaining carbon emissions, which added up to approximately 10,200 tons of CO2e in 2014, by investing in renewable energy credits (RECs) in the geographic areas that host our cloud footprint; last year, the majority went to RECs for wind projects in North America, with the remainder going to Guarantees of Origin (GOs) for hydropower in Europe.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Purchasing renewable energy credits (RECs) allows us to be carbon-neutral in the cloud, but our main strategy is to be more efficient and consume less energy in the first place. Back in the data center days, long provisioning cycles and spikes in customer demand required us to maintain large capacity buffers that went unused most of the time: overall server utilization percentage was in the single digits. Thanks to the elasticity of the cloud, we are able to instantaneously grow and shrink our capacity along with customer demand, generally keeping our server utilization above 50%. This brought significant benefits to our bottom line (moving to the cloud reduced our server-side costs per streaming hour by 85%), but also allowed us to drastically improve our carbon efficiency.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Open Connect Footprint&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Open Connect, the Netflix Content Delivery Network, was designed with power efficiency in mind. Today, the entirety of Netflix’s Content Delivery servers consume 1.4 Megawatts of power. While these servers are located in hundreds of locations across the globe, a majority of them are in major colocation vendors with similar interest as ours in ensuring a bright future for renewable energy.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;As we have evolved Open Connect, we have reduced the energy consumption of our servers significantly. At our 2012 launch, we consumed nearly .6 watts per Megabit per second (Mbps) of peak capacity. In 2015, our flash-based servers consume less than .006 watts per Mbps, a 100X improvement. Those flash-based servers generate nearly 70% of Netflix’s global traffic footprint.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;When choosing where to locate Open Connect CDN servers, sustainability is a key metric used to evaluate our potential partners. It’s important that our data center providers commit to 100% green power through RECs and that they continue to find new and innovative ways to become carbon neutral. &amp;nbsp;One such example is Equinix’s &lt;/span&gt;&lt;a href="http://www.zdnet.com/article/equinix-to-power-silicon-valley-data-center-with-bloom-energy-fuel-cell/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;experiment with Bloom Energy fuel cells&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; in its SV5 data center in San Jose, one of the facilities in which Netflix equipment is colocated. &amp;nbsp;Equinix recently &lt;/span&gt;&lt;a href="http://www.businesswire.com/news/home/20150422005216/en/Equinix-Advances-Sustainability-Program-Clean-Energy-Iberdrola#.VVyv71lViX4" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;announced a major initiative&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; to adopt 100% clean and renewable energy across their global platform. We have a goal to work with datacenter operators to increase their use of renewable sources of power, and we expect to buy offsets for 100% of any power that is not from renewable sources for 2015 and beyond.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We estimate that our Open Connect servers used non-renewable power responsible for about 7,500 Tons of CO2e in 2014.&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;ISPs&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;While we don’t control the energy choices of ISPs, we have engineered our Open Connect media servers to minimize the requirements for routers, by providing routing technology as part of the package, so that an ISP who chooses to interconnect directly with Netflix can usually use a smaller, cheaper, and much more power-efficient &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;switch&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; instead of a &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;router&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; for bringing Netflix traffic onto their networks. &amp;nbsp;In some cases, avoiding the need for a router might eliminate three quarters of the power footprint of a particular deployment.&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Consumer Premise Equipment&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The energy footprint of the consumers’ home equipment (shared between various entertainment and computing uses in the consumers’ homes) dwarfs all the upstream elements by perhaps two orders of magnitude. &amp;nbsp;Our focus here has been to provide streaming technology for Smart TVs, set-top boxes, game consoles, tablets, phones, computers that is as efficient as possible. &amp;nbsp;For example, a big focus for the 2015 Smart TV platforms has been suspend and resume capabilities, which ensure that Netflix can be started quickly from a powered-down state, which helps TV manufacturers build energy-star compliant TVs that don’t waste energy while the user is not watching. &amp;nbsp;This is one of several components in our “Netflix Recommended TV” program. &amp;nbsp;Similarly, our choice of encoder technology takes into account the hardware acceleration capabilities of devices such as smart phones, tablets, and laptop graphics chips, which have the ability to reduce power consumption of video rendering, which might extend tablet battery life by 4x with matching reduction in total power consumption due to streaming activity.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A typical household watching Netflix might include 5W for the cable modem, 10W for the WiFi access point, and 100W for the Smart-TV. &amp;nbsp;115Wh of home power is responsible for about 70g CO2e for one hour of viewing.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We encourage our CE partners to make energy-wise designs, but ultimately the choices that customers make are also governed by their other home entertainment and computing needs and desires, and accordingly we don’t measure or attempt to offset those impacts.&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Comparisons&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In 2014, Netflix infrastructure generated only 0.5g of CO2e emissions for each hour of streaming. The average human breathing emits about 40g/hour, nearly 100x as much. &amp;nbsp;Sitting still while watching Netflix probably saves more CO2 than Netflix burns.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The amount of carbon equivalent emitted in order to produce a single quarter-pound hamburger can power Netflix infrastructure to enable viewing by 10 member families for an entire year!&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 6pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A viewer who turned off their TV to read books would consume about 24 books a year in equivalent time, for a carbon footprint around 65kg CO2e - over 200 times more than Netflix streaming servers, while the 100W reading light they might we use would match the consumption of the TV they could have watched instead!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/05/netflix-streaming-more-energy-efficient.html</link>
      <author>noreply@blogger.com (Neil Hunt)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-3842214224660694673</guid>
      <pubDate>Mon, 04 May 2015 17:57:00 +0000</pubDate>
      <atom:updated>2015-05-04T12:30:57.883-07:00</atom:updated>
      <title>Introducing FIDO: Automated Security Incident Response</title>
      <description>&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-T0_MoNrS6BM/VUezfveTXdI/AAAAAAAABJM/HHbn6wJqDO4/s1600/Netflix%2B(1).png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"&gt;&lt;img border="0" height="320" src="http://1.bp.blogspot.com/-T0_MoNrS6BM/VUezfveTXdI/AAAAAAAABJM/HHbn6wJqDO4/s320/Netflix%2B(1).png" width="298" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;We're excited to announce the open source release of &lt;a href="https://github.com/Netflix/Fido"&gt;FIDO&lt;/a&gt; (Fully Integrated Defense Operation - apologies to the FIDO Alliance for acronym collision), our system for automatically analyzing security events and responding to security incidents.&lt;br /&gt;&lt;h2&gt;Overview&lt;/h2&gt;The typical process for investigating security-related alerts is labor intensive and largely manual. To make the situation more difficult, as attacks increase in number and diversity, there is an increasing array of detection systems deployed and generating even more alerts for security teams to investigate.&lt;br /&gt;&lt;br /&gt;Netflix, like all organizations, has a finite amount of resources to combat this phenomenon, so we built FIDO to help. FIDO is an orchestration layer that automates the incident response process by evaluating, assessing and responding to malware and other detected threats.&lt;br /&gt;&lt;br /&gt;The idea for FIDO came from a simple proof of concept a number of years ago. Our process for handling alerts from one of our network-based malware systems was to have a help desk ticket created and assigned to a desktop engineer for follow-up - typically a scan of the impacted system or perhaps a re-image of the hard drive. The time from alert generation to resolution of these tickets spanned from days to over a week. Our help desk system had an API, so we had a hypothesis that we could cut down resolution time by automating the alert-to-ticket process. The simple system we built to ingest the alerts and open the tickets cut the resolution time to a few hours, and we knew we were onto something - thus FIDO was born.&lt;br /&gt;&lt;h2&gt;Architecture and Operation&lt;/h2&gt;This section describes FIDO's operation, and the following diagram provides an overview of FIDO’s architecture.&lt;br /&gt;&lt;br /&gt;&lt;a href="http://1.bp.blogspot.com/-_39dYVRaDOs/VUfDM1OBcMI/AAAAAAAABKY/Bo4JQuc_fnY/s1600/fido-workflow.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em; text-align: center;"&gt;&lt;img border="0" height="328" src="http://1.bp.blogspot.com/-_39dYVRaDOs/VUfDM1OBcMI/AAAAAAAABKY/Bo4JQuc_fnY/s400/fido-workflow.png" width="400" /&gt;&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;h2&gt;Detection&lt;/h2&gt;FIDO’s operation begins with the receipt of an event via one of FIDO’s detectors. Detectors are off the shelf security products (e.g. firewalls, IDS, anti-malware systems) or custom systems that detect malicious activities or threats. Detectors generate alerts or messages that FIDO ingests for further processing. FIDO provides a number of ways to ingest events, including via API (the preferred method), SQL database, log file, and email. FIDO supports a variety of detectors currently (e.g. Cyphort, ProtectWise, CarbonBlack/Bit9) with more planned or under development.&lt;br /&gt;&lt;h2&gt;Analysis and Enrichment&lt;/h2&gt;The next phase of FIDO operation involves deeper analysis of the event and enrichment of the event data with both internal and external data sources. Raw security events often have little associated context, and this phase of operation is designed to supplement the raw event data with supporting information to enable more accurate and informed decision making.&lt;br /&gt;&lt;br /&gt;The first component of this phase is analysis of the event’s target - typically a computer and/or user (but potentially any targeted resource). Is the machine a Windows host or a Linux server? Is it in the PCI zone? Does the system have security software installed and the latest patches? Is the targeted user a Domain Administrator? An executive? Having answers to these questions allows us to better evaluate the threat and determine what actions need to be taken (and with what urgency). To gather this data, FIDO queries various internal data sources - currently supported are Active Directory, LANDesk, and JAMF, with other sources under consideration.&lt;br /&gt;&lt;br /&gt;In addition to querying internal sources, FIDO consults external threat feeds for information relevant to the event under analysis. The use of threat feeds help FIDO determine whether a generated event may be a false positive or how serious and pervasive the issue may be. Another way to think of this step is ‘never trust, always verify.’ A generated alert is simply raw data - it must be enriched, evaluated, and corroborated before actioning. FIDO supports several threats feeds, including ThreatGrid and VirusTotal, with additional feeds under consideration.&lt;br /&gt;&lt;h2&gt;Correlation and Scoring&lt;/h2&gt;Once internal and external data has been gathered about a given event and its target(s), FIDO seeks to correlate the information with other data it has seen and score the event to facilitate ultimate disposition. The correlation component serves several functions - first - have multiple detectors identified this same issue? If so, it could potentially be a more serious threat. Second - has one of your detectors already blocked or remediated the issue (for example - a network-based malware detector identifies an issue, and a separate host-based system repels the same item)? If the event has already been addressed by one of your controls, FIDO may simply provide a notification that requires no further action. The following image gives a sense of how the various scoring components work together.&lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://3.bp.blogspot.com/-hbTHT8V-zts/VUfBpgjDkQI/AAAAAAAABKI/8ojGy_sY218/s1600/fido-scoring.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" height="102" src="http://3.bp.blogspot.com/-hbTHT8V-zts/VUfBpgjDkQI/AAAAAAAABKI/8ojGy_sY218/s400/fido-scoring.png" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Scoring is multi-dimensional and highly customizable in FIDO. Essentially, what scoring allows you to do is tune FIDO’s response to the threat and your own organization’s unique requirements. FIDO implements separate scoring for the threat, the machine, and the user, and rolls the separate scores into a total score. Scoring allows you to treat PCI systems different than lab systems, customer service representatives different than engineers, and new event sources different than event sources with which you have more experience (and perhaps trust). Scoring leads into the last phase of FIDO’s operation - Notification and Enforcement.&lt;br /&gt;&lt;h2&gt;Notification and Enforcement&lt;/h2&gt;In this phase, FIDO determines and executes a next action based on the ingested event, collected data, and calculated scores. This action may simply be an email to the security team with details or storing the information for later retrieval and analysis. Or, FIDO may implement more complex and proactive measures such as disabling an account, ending a VPN session, or disabling a network port. Importantly, the vast majority of enforcement logic in FIDO has been Netflix-specific. For this reason, we’ve removed most of this logic and code from the current OSS version of FIDO. We will re-implement this functionality in the OSS version when we are better able to provide the end-user reasonable and scalable control over enforcement customization and actions.&lt;br /&gt;&lt;h2&gt;Open Items &amp;amp; Future Plans&lt;/h2&gt;Netflix has been using FIDO for a bit over 4 years, and while it is meeting our requirements well, we have a number of features and improvements planned. On the user interface side, we are planning for an administrative UI with dashboards and assistance for enforcement configuration. Additional external integrations planned include PAN, OpenDNS, and SentinelOne. We're also working on improvements around correlation and host detection. And, because it's now &lt;a href="https://github.com/Netflix/Fido"&gt;OSS&lt;/a&gt;, you are welcome to suggest and submit your own improvements!&lt;br /&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;-Rob Fry, Brooks Evans, &lt;a href="https://twitter.com/chanjbs"&gt;Jason Chan&lt;/a&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/05/introducing-fido-automated-security.html</link>
      <author>noreply@blogger.com (Jason Chan)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://1.bp.blogspot.com/-T0_MoNrS6BM/VUezfveTXdI/AAAAAAAABJM/HHbn6wJqDO4/s72-c/Netflix%2B(1).png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-2114014001274193103</guid>
      <pubDate>Thu, 09 Apr 2015 16:24:00 +0000</pubDate>
      <atom:updated>2015-04-09T09:24:38.806-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">algorithms</category>
      <category domain="http://www.blogger.com/atom/ns#">machine learning</category>
      <category domain="http://www.blogger.com/atom/ns#">Netflix</category>
      <category domain="http://www.blogger.com/atom/ns#">page generation</category>
      <category domain="http://www.blogger.com/atom/ns#">personalization</category>
      <category domain="http://www.blogger.com/atom/ns#">recommendations</category>
      <title>Learning a Personalized Homepage</title>
      <description>&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;by &lt;/span&gt;&lt;a href="https://www.linkedin.com/pub/chris-alvino/4/a/46" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Chris Alvino&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="https://twitter.com/justinbasilico" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Justin Basilico&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;b id="docs-internal-guid-2a8168a5-9ef9-048b-d33c-5ad4f4393578" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;As we've described in our &lt;/span&gt;&lt;a href="http://techblog.netflix.com/search?q=personalization" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;previous blog posts&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, at Netflix we use personalization extensively and treat every situation as an opportunity to present the right content to each of our over 57 million members. The main way a member interacts with our recommendations is via the homepage, which they see when they log into Netflix on any supported device. The primary function of the homepage is to help each member easily find something to watch that they will enjoy. A problem we face is that our catalog contains many more videos than can be displayed on a single page and each member comes with their own unique set of interests. Thus, a general algorithmic challenge becomes how to best tailor each member's homepage to make it relevant, cover their interests and intents, and still allow for exploration of our catalog.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This type of problem is not unique to Netflix, it is faced by others such as news sites, search engines, and online stores. Any site that needs to choose items from a large number of available possibilities and then present them in a coherent and easy-to-navigate manner will face the same general challenges. Of course, the problem of optimizing Netflix homepages has its own unique aspects, ranging from interface constraints to differences with how movies and TV are consumed compared to other media.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="280px;" src="https://lh3.googleusercontent.com/HEb9TN34lkdxL-6yns7otIuLz1pjAS5T--gHi8PtqaFIctW8II-eMMXLS47Y8e90n_IJn_5taDZ5wUbwpF43gC90XHNBFvzuvT3OVPIHWXSL_WmHhc-ttCqFI_CI1V6kGEoX6-Q" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="367px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;An example of a personalized Netflix homepage on our website.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Currently, the Netflix homepage on most devices is structured with videos (movies and TV shows) organized into thematically coherent rows presented in a two-dimensional layout. Members can scroll either horizontally on a row to see more videos in that row or vertically to see other rows. Thus, a key part of our personalization approach is how we choose rows to display on the homepage. This involves figuring out how to select the rows most relevant to each member, how to populate those rows with videos, and how to arrange them on the limited page area such that selecting a video to watch is intuitive. In the rest of this post, we will highlight what we think are the most relevant and interesting aspects of this problem and how we can go about solving some of them.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Before going on, it is worth mentioning that at Netflix we have a &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/04/netflix-recommendations-beyond-5-stars.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;multitude of algorithms&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; for doing personalization and recommendation including: how to predict the &lt;/span&gt;&lt;a href="http://www.netflixprize.com/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;rating that a member will give a video&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/06/netflix-recommendations-beyond-5-stars.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;how to rank videos in each row&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, and how to create &lt;/span&gt;&lt;a href="http://www.theatlantic.com/technology/archive/2014/01/how-netflix-reverse-engineered-hollywood/282679/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;meaningful groupings of videos&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. Thus, in some sense, personalized page generation represents the next logical step in the evolution of our recommendation system that started with rating prediction and subsequently evolved into &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/06/netflix-recommendations-beyond-5-stars.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;personalized ranking&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; of our entire catalog. It involves solving a more general problem: how best to populate a personalized two-dimensional page of content, including recommendations.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="300px;" src="https://lh3.googleusercontent.com/VPYRh9yEd0nUpM2N0VMcAZdbieDYORXGXemGpzAPY2U9Tmc1KkDH-p5eS_AXUZ-SWE9P5XgSeoovXNDm7GYhWdv2dI9fYjvBloiRsSJ_glQFt59lwkalQkOtD8944rU5hpx-5ls" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Evolution of our personalization approach.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Why Rows Anyway?&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We organize our homepage into a series of rows to make it easy for members to navigate through a large portion of our catalog. By presenting coherent groups of videos in a row, providing a meaningful name for each row, and presenting rows in a useful order, members can quickly decide whether a whole set of videos in a row is likely to contain something that they are interested in watching. This allows members to either dive deeper and look for more videos in the theme or to skip them and look at another row. This would not be the case if, for example, the page contained a large, unorganized collection of relevant videos.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="Screen Shot 2015-02-17 at 3.24.11 PM.png" height="213px;" src="https://lh4.googleusercontent.com/rJeDDRWnwD2TyR0SF4i70wWBhC7lBjlMWX_o16L65FIyKux0_inVWYUeIwSkh7pM9vFi-Dms58pPbTnanhetmKmx2wJP3174klGuLk9Ww_mifPHaGFYuJoKJgA2VClPx6eUyI5Y" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A possible row of titles that might be watched by one of our Netflix original characters.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;One natural way to group videos is by &lt;/span&gt;&lt;a href="http://www.theatlantic.com/technology/archive/2014/01/how-netflix-reverse-engineered-hollywood/282679/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;genre or sub-genre&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; or other video metadata dimensions like release date. Of course, the relationship between videos in a row does not have to be due to metadata alone, but can also be formed from behavioral information (for example from collaborative filtering algorithms), videos we think a member is likely to watch, or even groups of videos watched by a friend. Thus, each row can offer a unique and personalized slice of the catalog for a member to navigate. Part of the challenge and fun of creating a personalized homepage is figuring out new ways to create useful groupings of videos, which we are constantly experimenting with (e.g., rows of titles that might be watched by one of our Netflix original characters shown above).&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="333px;" src="https://lh5.googleusercontent.com/r012WuDSIrOSlGhxFPzUUAcEo6XjEwYc5ovo97GXTpoBs9z9qI_ZwXJ6gjaVRPsjvTmiruYcHdOAWMpEPG-W_VGqG2D0Fi1sf092I1UVhT51Z6BquLhFOdwGb2pMTbyI0WMCBgk" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Process for creating and choosing rows.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Once we have a set of possible video groups to consider for a page, we can begin to assemble the homepage from them. To do this, we start by finding candidate groupings that are likely relevant for a member based on the information we know about them. This also involves coming up with the evidence (or explanations) to support the presentation of a row, for example the movies that the member has previously watched in a genre. Next, we filter each group to handle concerns like maturity rating or to remove some previously watched videos. After filtering, we rank the videos in each group according to a row-appropriate ranking algorithm, which produces an ordering of videos such that the most relevant videos for the member in a group are at the front of the row. From this set of row candidates we can then apply a row selection algorithm to assemble the full page. As the page is assembled, we do additional filtering like deduplication to remove repeat videos and format rows to the appropriate size for the device. &amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Page-level algorithmic challenge&lt;/span&gt;&lt;/h2&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="275px;" src="https://lh5.googleusercontent.com/eJy0B3zcG2vaU21awwcFYePhJqtnlN2TcCLhW3W3xO6myFwic3WUBWyGIcCU1GavvT2QKgbLDCWMWdSumc0cpv88vAvlukqqjjB5xO_tYI62x_Peo3_7UZCYPVd4HTTnUIbC_Ww" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To algorithmically create a good personalized homepage means assembling one page per member profile and device from thousands of videos that may be relevant for a member and from easily tens of thousands of potential rows, each with a variable number of videos. On top of that, we need to balance several factors that often compete for precious screen real estate. Our approach to personalization and recommendation largely focuses on helping our members find something new to watch, which we call discovery. However, we also want to make it easy for a member to watch the next episode of a show or re-watch something that they watched in the past, which normally falls outside the realm of recommendation. We want our recommendations to be accurate in that they are relevant to the tastes of our members, but they also need to be diverse so that we can address the spectrum of a member’s interests versus only focusing on one. We want to be able to highlight the depth in the catalog we have in those interests and also the breadth we have across other areas to help our members explore and even find new interests. We want our recommendations to be fresh and responsive to the actions a member takes, such as watching a show, adding to their list, or rating; but we also want some stability so that people are familiar with their homepage and can easily find videos they’ve been recommended in the recent past. Finally, we need to be able to place task-oriented rows, such as “My List,” in amongst the more discovery-oriented rows.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Each device has different hardware capabilities that can limit the number of videos or rows displayed at any one time and how big the whole page can be. As such, the page generation process must be aware of the constraints of the device for which it is creating the page, including the number of rows, the minimum and maximum length of a row, the size of the visible portion of the page, and whether or not certain rows are required or are not applicable for a certain device.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;While there are many challenges to page generation, tackling recommendation problems at this level also opens up new solutions. As mentioned before, selecting a diverse set of items is important in a recommendation system. However, it can be challenging to navigate a diverse ranking since the relevant items may be blended with other items that do not match someone’s current intent. However, by presenting a two-dimensional navigation layout, a member can scroll vertically to easily skip over entire groups of content that may not match their current intent and then find a more relevant set, which they can then scroll horizontally to see more recommendations in that set. This allows for coherent, meaningful individual rows to be selected while maintaining the diversity of the videos shown on the whole page, and thus lets the member have both relevance and diversity.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Building a page algorithmically&lt;/span&gt;&lt;/h2&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;There are several approaches for how we can build our homepage algorithmically. The most basic is a rule-based approach, which we used for a long time. Here a set of rules define a template that dictates for all members what types of rows can go in certain positions on the page. For example, the rules could specify that the first row would be Continue Watching (if any), then Top Picks (if any), then Popular on Netflix, then 5 personalized genre rows, and so on. The only personalization in this approach was from selecting candidate rows in a personalized way, such as including “Because you watched &amp;lt;video&amp;gt;” rows for videos someone has watched in the past and genre rows based on known genre preferences. To choose specific rows within each type, simple heuristics and sampling were used. We evolved this template using A/B testing to understand where to place rows for all members.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This approach served us well, but it ignored many aspects we consider important for the quality of the page, such as the quality of the videos in the row, the amount of diversity on the page, the affinity of members for specific kinds of rows, and the quality of the evidence we can surface for each video. It also made it hard to add new types of rows, because for a new row to succeed it would need to not only contain a relevant set of videos in a good order but also be placed appropriately in the template. Because of this, the rules for the template grew over time and became too complex to handle the variety of rows and how they should all be placed, which represented a local optimum for the member experience.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To address these issues, we can instead think of personalizing the ordering of rows on the homepage. The simplest approach for doing this is to treat rows as items in a ranking problem, which we call a row-ranking approach. For this approach, we could leverage a lot of existing recommendation or learning-to-rank approaches by developing a scoring function for rows, applying it to all the candidate rows independently, sorting by that function, and then picking the top ones to fill the page. Even though the space of rows may be relatively big, this type of approach could be relatively fast and may result in reasonable accuracy. However, doing this would lack any notion of diversity, so someone could easily get a page full of slight variations of their interests, such as many rows each with different variants of comedies: late-night, family, romantic, action, etc.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A simple way to add in diversity is to switch from a row-ranking approach to a stage-wise approach using a scoring function that considers both a row as well as its relationship to both the previous rows and the previous videos already chosen for the page. In this case, one can take a simple greedy approach and pick the row that maximizes this function as the next row to use and then re-score all the rows for the next position taking that selection into account. &lt;/span&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Depending on the diversity function, this greedy selection may not lead to an optimal page. &amp;nbsp;Using a stage-wise approach with k-row lookahead could result in a more optimal page than greedy selection, but it comes with increased computational cost. &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Other approaches to greedily add diversity based on &lt;/span&gt;&lt;a href="http://dl.acm.org/citation.cfm?id=1498766" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;submodular function maximization&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; can also be used.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;However, even the stage-wise algorithm is not guaranteed to produce an optimal page because a fixed horizon may limit the ability to fill in better rows further down the page. Thus, if we can instead take a page-wise approach by defining a full-page scoring function, we can try to optimize it by choosing rows and videos appropriately to fill the page. Of course, the space of possible pages is huge, even larger than the space of possible rows. Since a page layout is defined in a discrete space, directly optimizing a function that defines the quality of the whole page is a computationally prohibitive integer programming problem.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;When solving a page optimization problem with any of these approaches, there are also various constraints that need to be taken into account that were mentioned before, like deduping, filtering, and device-specific constraints. Each of these constraints add to the complexity of the optimization problem.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="345px;" src="https://lh3.googleusercontent.com/XZSgChXWl5tI5-jALeyOMGcQ5pdczuD7tZmzBxZgKzdjUiEC_lbf7oxzlhSA0ROHcvKV8vQ4MSqWSqkyIo8oOFN3nilLqhkdgTwYcKTvAYcdv6yDDcxsCHeSrvazTlEb7yg7SrM" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="598px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Notional importance of navigation modeling. Members are more likely to vertically than horizontally, which means videos presented in the upper left are much more likely to be seen than those in the lower right.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;When forming the homepage it is also important to consider how members navigate the page, i.e., to consider which positions on the page they are likely to pay attention to and interact with in a session. Placing the most relevant videos in the positions that are most likely to be seen, which tends to be the upper-left corner, should reduce the time for a member to find something relevant to watch. However, modeling navigation on a two-dimensional page is difficult, especially taking into account that different people may navigate differently, people’s navigation patterns may change over time, there are differences in navigation across different device types based on the interaction design, and that navigation is clearly dependent on the relevance of the content shown. With an accurate navigation model, we can inform better placement of videos and rows and where on the page to focus on relevance as opposed to diversity. &amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Machine Learning for page generation&lt;/span&gt;&lt;/h2&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;At the core of building a personalized page is a scoring function that can evaluate the quality of a row or a page. While we could use heuristics or intuition for building such a scoring function and tune it using A/B testing, we prefer to learn a good function from the data so that we can easily incorporate new data sources and balance the various different aspects of a homepage. To do this, we can use a machine learning approach to create the scoring function by training it using historical information of which homepages we have created for our members, what they actually see, how they interact, and what they play.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;There is a large set of features that we could potentially use to represent a row for our learning algorithms. Since rows contain a set of videos, we can use any features of those videos in the row representation, either by aggregating across the row or indexing them by position. These features can be simple metadata or more useful model-based features that represent how good of a recommendation we believe a specific video is for a member. Of course, we have many different recommendation approaches, so we can include them as different features to learn an ensemble of them at the page level. We can also look at the quality of the evidence associated with the row, such as how much support there is for a member being interested in a specific genre. We can also look at past interactions with the row to see if that row or similar such rows have been consumed in the past by the member. We can also add simple descriptive features like how many videos are in a row, in what position a row is being placed on a page, or how often we’ve shown the row in the past. Diversity can also be additionally incorporated into the scoring model when considering the features of a row compared to the rest of the page by looking at how similar the row is to the rest of the rows or the videos in the row to the videos on the rest of the page.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;While the space of potentially useful features is quite large, there are several challenges with training machine learning models for scoring rows. One challenge is dealing with presentation bias, where a member can only play from a row on the homepage that we’ve chosen to display, which can have a huge impact on the training data. To further complicate things, the position of a row on the page can greatly affect whether a member actually sees the row and then chooses to play from it. To handle these presentation and position biases, we need to be extremely careful about how we select training data for our algorithms. There is also a challenge around how attribution is allowed in the model; a video may have been played in a certain row in the past, but does that mean the member would have chosen that same video if it was placed in a different row but in the first position? Perhaps the title of a row being “Critically Acclaimed Documentaries” was responsible for play where it may not have been selected without that additional evidence, for example, in a “New Releases” row, even if it was in a better position. Learning over features to represent diversity can also be challenging because while the space of potential rows at different positions on the page is large, when the rest of the page (or the already chosen rows) is taken into account for diversity, the space of possible pages is even larger.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="405px;" src="https://lh3.googleusercontent.com/lo2QyYYP3qy3lRWQwliFfLYu5nMliW6_EwLuDpc-2-GTDAZ4KbiGnWZGQLLQJlfODTsmNT27R6vbexjhVMFLwg3zvSQYNyLJ7eB3rmSBVfrgKDV76c3VuuIpXSnt0hHL9E7IjGs" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="463px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Page-level metrics&lt;/span&gt;&lt;/h2&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To deal with these challenges, as with any algorithmic approach, choosing a good metric is important. Of fundamental importance in page generation is how to evaluate the quality of the pages produced by a specific algorithm during offline experimentation. While we ultimately will test any potential algorithmic improvement online in an A/B test, we would like to be able to focus our precious A/B testing resources on algorithms that we have evidence are likely to improve the quality of the pages. We also need to be able to tune the parameters of those algorithms before A/B testing. To do this, we can use historical data to generate hypothetical pages from new algorithmic approaches, provided we can choose a good metric for page quality.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="317px;" src="https://lh6.googleusercontent.com/_g3N_nahzNM2RahsF9tMei-w72c_MbFp99_ojAMoCv_w1_haJt4CzNMJE9TwG_zBs70rBA_8wh9qIdwhrYyHTDR_t5dD4YQIDofjhiLG_Zpqdq6QlLtuNCY9uvH_fC2_YDEKDvU" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Example of two-dimensional recall metrics. &amp;nbsp;For each page variant, the fractions on the side represent the recall at 1-by-3, 2-by-3, and 3-by-3 metrics, respectively.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To come up with page-level quality metrics, we took inspiration from ranking metrics that are common in information retrieval (&lt;/span&gt;&lt;a href="http://nlp.stanford.edu/IR-book/pdf/08eval.pdf" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;many of which exist in the literature&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;) for a one-dimensional list and created ones that work over a two-dimensional layout. For instance, consider a simple metric like Recall@&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;n&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, which measures the number of relevant items in the top &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;n&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; divided by the total number of relevant items. We can extend it in two dimensions to be Recall@&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;m&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;-by-&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;n&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, where now we count the number of relevant items in first &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;m&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; rows and &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;n&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; columns on the page divided by the total number of relevant items. Thus, Recall@3-by-4 may represent quality of videos displayed in the viewport on a device that initially can show 3 rows and 4 videos at a time. One nice property of recall defined this way is that it automatically can handle corner-cases like duplicate videos or short rows. We can also hold one of the values &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;n&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; (or &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;m&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;) fixed and sweep across the other to calculate, for instance, how the recall increases in the viewport as the member would scroll down the page.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="327px;" src="https://lh5.googleusercontent.com/qGHxi-8wALP_s2Df3Prblx6N3S0Q2qIQK46LHLygnDj4w_SDY8B0Qabt3mNy1zCJGP1gU2UJfz21WIJeHv11n0qeTu4HPlwUs4yp-mWXwsZs7s1xtyE6FA8rVDH-zh2g6bIC6rc" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Comparison of four page algorithms in recall up to a fixed column position while sweeping the row position. &lt;/span&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The red line is the previous rule-based approach and the blue is a personalized layout.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Of course, Recall is a basic metric and requires choosing values for &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;m&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;n&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, but we can likewise extend metrics that assign a score or likelihood for a member seeing a position, like NDCG or MRR, to the two-dimensional case. We can also adapt navigation models like Expected Reciprocal Rank to incorporate two-dimensional navigation through the page and take into account the cascading aspect of browsing. With such page-level metrics defined, we can use them to evaluate changes in any of the algorithmic approaches used to generate the page, not just the algorithms for ordering the rows, but also the selection, filtering, and ranking algorithms, or any of the input data that they use.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Other challenges&lt;/span&gt;&lt;/h2&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;There is no shortage of challenging questions that come up in engineering the homepage. &amp;nbsp;For example: When is it appropriate to take into account other context variables such as the time of the day or device, in how we populate the homepages? How do we find the appropriate trade-off between finding the optimal page and computational cost? How do we form the home pages during the critical first few sessions of a member, precisely at the time when we have the least information about them? We need to think about and weigh the importance of each of these questions every day in order to continually improve the Netflix homepages.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Conclusion&lt;/span&gt;&lt;/h2&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;While Netflix may be most famous in the recommendations community for the Netflix prize, we think of personalized page generation as the next step in the evolution of our personalization approach from rating prediction to video ranking to now page generation. We have taken the initial step of coming up with our first algorithm for personalized page generation that showed significantly better online performance than our existing template, and deployed it last year. However, personalized page generation is a challenging problem that involves balancing a multitude of factors, and we think that this is just the beginning. There is a lot of potential to improve the homepages for all of our members and help them easily find content they will love. &lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We are always looking for talented researchers and engineers to join our team. So if you are interested in helping us solve these types of problems and increasing global happiness, please take a look at some of &lt;/span&gt;&lt;a href="https://jobs.netflix.com/#/jobs/search?query=page%20algorithms" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;our open positions&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; on the &lt;/span&gt;&lt;a href="http://jobs.netflix.com/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix jobs page&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/04/learning-personalized-homepage.html</link>
      <author>noreply@blogger.com (Justin Basilico)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-5287601322358051493</guid>
      <pubDate>Wed, 08 Apr 2015 07:13:00 +0000</pubDate>
      <atom:updated>2015-04-09T09:44:10.520-07:00</atom:updated>
      <title>Introducing Vector: Netflix's On-Host Performance Monitoring Tool</title>
      <description>&lt;div class="separator" style="clear: both; text-align: left;"&gt;by &lt;a href="https://www.linkedin.com/in/martinspier" target="_blank"&gt;Martin Spier&lt;/a&gt;, &lt;a href="https://www.linkedin.com/pub/amer-ather/1/118/907" target="_blank"&gt;Amer Ather&lt;/a&gt; and &lt;a href="http://www.brendangregg.com/" target="_blank"&gt;Brendan Gregg&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-RTEtZPpvwO0/VSMKgjz8LCI/AAAAAAAAATk/6Yu5kcINtOk/s1600/vector.png" height="128" width="320" /&gt;&lt;/div&gt;Vector is an open source host-level performance monitoring framework, which exposes hand-picked, high-resolution system and application metrics to every engineer’s browser. Having the right metrics available on demand and at a high resolution is key to understanding how a system behaves and correctly troubleshooting performance issues. Previously, we'd login to instances as needed, run a variety of commands, and sift through the output for the metrics that matter. Vector cuts down the time to get to those metrics, helping us respond to incidents more quickly.&lt;br /&gt;&lt;br /&gt;Vector provides a simple way for users to visualize and analyze system and application-level metrics in near real-time. It leverages the battle tested open source system monitoring framework, Performance Co-Pilot (PCP), &amp;nbsp;layering on top a flexible and user-friendly UI. The UI polls metrics at up to 1 second resolution, rendering the data in completely configurable dashboards that simplify cross-metric correlation and analysis.&lt;br /&gt;&lt;br /&gt;PCP’s stateless model makes it lightweight and robust. Its overhead on hosts is negligible, as clients are responsible for keeping track of state, sampling rate, and computation. Additionally, metrics are not aggregated across hosts or persisted outside of the user’s browser session, keeping the framework light. Vector requires only your local browser and PCP installed on the host you wish to monitor. No intermediate collector, server, or database infrastructure is required.&lt;br /&gt;&lt;br /&gt;We are excited to release &lt;a href="https://github.com/Netflix/vector" target="_blank"&gt;Vector&lt;/a&gt; to the community and look forward to feedback and collaboration!&lt;br /&gt;&lt;br /&gt;&lt;h2&gt;High-Level Architecture&lt;/h2&gt;&lt;div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-IgSe7jJJOtg/VSMLauNLAII/AAAAAAAAATs/tb-cMtbyXbg/s1600/architecture.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-IgSe7jJJOtg/VSMLauNLAII/AAAAAAAAATs/tb-cMtbyXbg/s1600/architecture.png" height="162" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Vector itself is a web application that runs completely inside the user's browser. It was built with &lt;a href="https://angularjs.org/" target="_blank"&gt;AngularJS&lt;/a&gt; and leverages &lt;a href="http://d3js.org/" target="_blank"&gt;D3.js&lt;/a&gt; for charts. In the future, the Vector package will also include custom metric agents.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Vector has a “default” dashboard exposed at launch. &amp;nbsp;This dashboard is a simple page that holds a few options including UI object visibility flags, widget definitions, and a set of loaded widgets. Once loaded, it will display the set of loaded widgets and present the user with controls to include any of the additional predefined widgets.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Widgets are loaded into dashboards. A widget object will contain details about a specific widget, like its name, template, style, and more importantly, the data model to be used. Data models are, in a nutshell, objects that control the metrics required for each widget and how the values are used in it. Data model prototypes are relatively simple. They extend a base WidgetDataModel prototype and define their own init and destroy functions. Most of what is done in those functions is adding and removing metrics from the metric poller list, creating callback functions that deal with the data points returned from the poller itself, and referencing the right data structure to be used in the charts.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Generic data models were also created so they could be reused on new widgets without having to create a specific data model for it. More details about the data models can be found on &lt;a href="https://github.com/Netflix/vector/tree/master/docs" target="_blank"&gt;Vector's wiki&lt;/a&gt;&amp;nbsp;page.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Metrics are polled from Performance Co-Pilot's web daemon. They are referenced by unique names and current values are returned with a timestamp in order for them to be normalized.Vector makes use of two data structures to store metrics and their values. The "raw" metric data structure holds the original metric values that came from PCP. The "derived" metric data structure holds metrics that were modified by a data model function, like a cumulative function or a normalization function.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;The metric poller is the component that goes over the list of "raw" metrics and polls them from PCP via HTTP, given the selected polling interval. It also executes all data model functions and consequently updates the "derived" metric data structure. Charts are automatically updated every time the data structure is updated.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Performance Co-Pilot (PCP) is a system performance and analysis framework. It provides metric agents, a metric collector and a web daemon that is leveraged by the metric poller to collect metric values. More details about PCP can be found at &lt;a href="http://pcp.io/" target="_blank"&gt;pcp.io&lt;/a&gt;.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h2&gt;Getting Started&lt;/h2&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/-SmtmHQD6Vlw/VSMMQ32eGGI/AAAAAAAAAT4/rO3-5Ymt6Es/s1600/screenshot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/-SmtmHQD6Vlw/VSMMQ32eGGI/AAAAAAAAAT4/rO3-5Ymt6Es/s1600/screenshot.png" height="292" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: left;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;In order to get started, you should first install Performance Co-Pilot (PCP) on each host you plan to monitor. PCP will collect the metrics and make them available for Vector. The pmcd and pmwebd services need to be running on each host, the latter of which needs to expose its tcp/44323 network port.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Optional monitoring agents can also be installed in order to collect specific metrics that are not supported by PCP's system agent.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Once PCP is installed, you should be able to run Vector and connect to the target host.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3 style="clear: both;"&gt;Performance Co-Pilot (PCP)&lt;/h3&gt;&lt;div class="separator" style="clear: both;"&gt;Vector depends on Performance Co-Pilot (PCP) to collect metrics on each host you plan to monitor.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Since Vector depends on version 3.10 or higher, the packages currently available on most Linux distro repositories would not suffice. Until newer versions are available in the repositories, you should be able to install PCP from binary packages made available by the PCP development team on:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;ftp.pcp.io&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Or build it from source. To do so, get the current version of the source code:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ git clone git://git.pcp.io/pcp&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Then build and install:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ cd pcp&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ make&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ sudo make install&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;More information on how to install Performance Co-Pilot can be found at:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;a href="http://pcp.io/docs/installation.html#src" target="_blank"&gt;http://pcp.io/docs/installation.html#src&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3 style="clear: both;"&gt;Vector&lt;/h3&gt;&lt;div class="separator" style="clear: both;"&gt;Vector is a static web application that runs inside the client's browser. It can run locally or deployed to any HTTP server available, like Apache or Nginx.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;To run in locally, first clone the repo:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ git clone https://github.com/Netflix/vector.git&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Make sure you have Bower installed on your system. Bower is a package management system for client-side programming, optimized for the front-end development.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;a href="http://bower.io/#getting-started" target="_blank"&gt;http://bower.io/#getting-started&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;And install all dependencies:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ cd vector&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ bower install&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;You can run Vector with Gulp. Gulp is an automated task runner and includes a development web server with live reload. In order to start Gulp’s web server, first make sure you have Gulp installed on your system:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md" target="_blank"&gt;https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Then, install all dependencies and execute the default Gulp task:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ npm install&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ gulp&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;You can also run Vector with Python's SimpleHTTPServer:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ cd vector/app&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;span style="font-family: Courier New, Courier, monospace;"&gt;$ python -m SimpleHTTPServer 8080&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Then open Vector on your browser:&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;http://localhost:8080&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;And enter the hostname from the server you plan on monitoring. That's it!&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style="clear: both;"&gt;&lt;b&gt;Widgets &amp;amp; Dashboards&lt;/b&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Vector's UI is based on dashboards and widgets. You can have one dashboard per browser tab/window. Dashboards are completely configurable and can have multiple widgets. Currentl.y there are no limits on the amount of widgets a dashboard can contain, but real-time rendering of multiple charts can consume a significant amount of CPU and slow down the application. Currently, changes made to dashboards are not persisted.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style="clear: both;"&gt;&lt;b&gt;Window &amp;amp; Interval&lt;/b&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;Vector's UI aims to be extremely simple. Besides the hostname, there are only two configuration options, window and interval. The window option allows the user to select the rolling window size, represented in minutes, for all widgets in a dashboard. The interval option allows the user to select the metric polling interval, represented in seconds. If you have many widgets in a dashboard and the application starts to show signs of slowness, you should be able to decrease the window size and/or increase the interval to reduce CPU utilization.&lt;/div&gt;&lt;div class="separator" style="clear: both;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;h2&gt;Dashboards &amp;amp; Widgets&lt;/h2&gt;&lt;div&gt;&lt;div&gt;Vector comes with a predefined set of widgets and dashboards that can be easily extended. Here is a short list of metrics available by default.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3&gt;CPU&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Load Average&lt;/li&gt;&lt;li&gt;Runnable&lt;/li&gt;&lt;li&gt;CPU Utilization&lt;/li&gt;&lt;li&gt;Per-CPU Utilization&lt;/li&gt;&lt;li&gt;Context Switches&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;h3&gt;Memory&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Memory Utilization&lt;/li&gt;&lt;li&gt;Page Faults&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;h3&gt;Disk&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Disk IOPS&lt;/li&gt;&lt;li&gt;Disk Throughput&lt;/li&gt;&lt;li&gt;Disk Utilization&lt;/li&gt;&lt;li&gt;Disk Latency&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;h3&gt;Network&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Network Drops&lt;/li&gt;&lt;li&gt;TCP Retransmits&lt;/li&gt;&lt;li&gt;TCP Connections&lt;/li&gt;&lt;li&gt;Network Throughput&lt;/li&gt;&lt;li&gt;Network Packets&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;Currently, there are only two pre-configured dashboards on Vector. The "default" dashboard, with a set commonly used widgets, and an empty dashboard. To change dashboards, click on the "widget" drop-down menu and select the desired dashboard.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h2&gt;Next Steps&lt;/h2&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;More widgets and dashboards&lt;/li&gt;&lt;li&gt;User-defined dashboards&lt;/li&gt;&lt;li&gt;Metric snapshots&lt;/li&gt;&lt;li&gt;CPU Flame Graphs&lt;/li&gt;&lt;li&gt;Disk Latency Heat Maps&lt;/li&gt;&lt;li&gt;Integration with &lt;a href="https://github.com/Netflix/servo" target="_blank"&gt;Servo&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Support for Cassandra&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h2&gt;Conclusion&lt;/h2&gt;&lt;div&gt;Observability is key to understanding how an application behaves under certain conditions and is paramount to successfully troubleshoot any performance issue. Vector allows us to closely monitor hosts in near real-time and easily correlate metrics, making them accessible to every engineer, simplifying the process of troubleshooting issues. It proved to be an invaluable tool to help us achieve great performance and we plan to continue building and improving it!&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;You can find Vector on &lt;a href="https://github.com/Netflix/vector" target="_blank"&gt;GitHub&lt;/a&gt;&amp;nbsp;and on &lt;a href="http://netflix.github.io/"&gt;netflix.github.io&lt;/a&gt;!&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/04/introducing-vector-netflixs-on-host.html</link>
      <author>noreply@blogger.com (Martin Spier)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://1.bp.blogspot.com/-RTEtZPpvwO0/VSMKgjz8LCI/AAAAAAAAATk/6Yu5kcINtOk/s72-c/vector.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-195540063320141716</guid>
      <pubDate>Mon, 06 Apr 2015 18:31:00 +0000</pubDate>
      <atom:updated>2015-04-08T10:02:37.898-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">content platform engineering</category>
      <title>Extracting contextual information from video assets</title>
      <description>&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By:&lt;/span&gt;&lt;a href="https://www.linkedin.com/in/apurvakansara" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Apurva Kansara&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;b id="docs-internal-guid-a55f4cf9-8fff-8267-0e90-ca372bf1a360" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Here, I will describe our approach to extract contextual metadata from video assets to enable an improved Netflix user experience across the large catalog we serve. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Part 1: Detecting End-Sequences&lt;/span&gt;&lt;/h1&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;When you finish watching a movie, we are able to provide a unique post-play experience as illustrated below in two examples. The user is presented with the next in a series of, or content similar to, the most recently seen video. Yet, the primary issue similarly remains isolating the salient parts of series and movies without the mind-boggling challenge of manually tagging the large and ever-changing catalog for the end points. In other words, we must devise a strategy for detecting when a video ends and the end-sequence begins. Interestingly, the end-sequence is unique in a few striking ways. First, that it appears at the end of the movie. Second, it almost always is comprised of text. Finally, there is very little variation between contiguous frames. Using all three of these conditions, we created an algorithm that successfully extracts the beginning of the end-sequence. &amp;nbsp;&lt;/span&gt;&lt;/h1&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="margin-left: 0pt;"&gt;&lt;table style="border-collapse: collapse; border: none;"&gt;&lt;colgroup&gt;&lt;col width="307"&gt;&lt;/col&gt;&lt;col width="310"&gt;&lt;/col&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;h1 dir="ltr" style="line-height: 1.44; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="175px;" src="https://lh5.googleusercontent.com/5ND_yHksl9z4oScKpka8qV-SWWHiv3vVlEDFkX89OnubZb7j4-82FnaoCGjLUbWGi8WRoATuvEX1ly7janNyC_k1sTFUTv4QVNXe-33Or5k7BC80QmHloTRSISAGwxw3P1lZ1Zw" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="292px;" /&gt;&lt;/span&gt;&lt;/h1&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;h1 dir="ltr" style="line-height: 1.44; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="184px;" src="https://lh4.googleusercontent.com/d6kL-8PFxSu-h7MSy5XlK4_N-2uJZecLnn4wBm-v38EeFswSHlQhWmb0xt-Kczs0074ipdghIQIwRoHdYziqJaN4aLSZ3ls4Lynea0pIppKwqiB_zuGSFkbZCpU0jE0yk0kARAM" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="295px;" /&gt;&lt;/span&gt;&lt;/h1&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Two examples of Netflix post-play experiences&lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br class="kix-line-break" /&gt;&lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br class="kix-line-break" /&gt;&lt;/span&gt;&lt;/h1&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Below you'll find an example of text-detected regions (highlighted with yellow rectangles) on the end-sequence of Orange is the New Black:&lt;/span&gt;&lt;/h1&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="6974.jpg" height="347px;" src="https://lh5.googleusercontent.com/QoY7s9T2N2aVOeKHwFrUxL9A90yhq9TH18agARUFXOksxc0QM9_btABMUI1E43XVDYYASRbmDRTkfoat5XnpLm86RqcOoM-W1rhbUx2aw3f71mlvZmyEp_FGKFj_nKvhoakf0a8" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="431px;" /&gt;&lt;/span&gt;&lt;/h1&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Automated text detection of end sequence&lt;/span&gt;&lt;/h1&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Part 2: Detecting Similar Frames Across Multiple Video Assets&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;At Netflix, for a given video, we have several assets encoded for different countries and locales. There are many applications to detect similar frames across multiple video assets.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We extract visual fingerprints of a collection of certain frames. We can then use these fingerprints as comparative models- if similar frames appear in the rest of the videos, we can mark them as the ending of the start-sequence.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Let’s take an example: Let’s say Fig. 1A is the last frame of the title sequence of our favorite TV series. We'll call it our "Reference Frame," which we'll want to match with the rest of the episodes. In this case, we extracted an image histogram, to become our reference frame, as a marker of the fingerprint. Now, we will compare this fingerprint with another episode (Fig. 1B) of the same series. Given that both fingerprints are similar, we can walk through the rest of the episodes to mark them as identical/similar frames. Besides detecting the start sequence, this approach can be used to other interesting points within video.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="Screen Shot 2015-04-01 at 8.50.23 AM.png" height="321px;" src="https://lh5.googleusercontent.com/WvjLoNbG_EduUrLrdZFLcMpoD7tLEK46_-zSs1PWfnc5pJ6XgBvNxsySkaAllq7XA3i-79nDGaX0bQ2qz1V80ckLohas7dfM1Pz-8BXJGlLhr7Ahr8aP3BIf3UAjC4O9PGML5No" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="557px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Histogram based fingerprints of video frames&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h1 dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Summary&lt;/span&gt;&lt;/h1&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Here, we have outlined two classes of algorithms that allow us to efficiently extract metadata of video assets allowing us to create a unique, uninterrupted viewing experience at Netflix.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.656; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;If you have great or innovative ideas come join us on the &lt;/span&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01397/apply" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Content Platform Engineering team&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;!&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;</description>
      <link>http://techblog.netflix.com/2015/04/extracting-contextual-information-from.html</link>
      <author>noreply@blogger.com (Apurva Kansara)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-4033815317998897513</guid>
      <pubDate>Mon, 30 Mar 2015 21:26:00 +0000</pubDate>
      <atom:updated>2015-04-22T09:54:10.579-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">billing</category>
      <category domain="http://www.blogger.com/atom/ns#">meetup</category>
      <category domain="http://www.blogger.com/atom/ns#">payments</category>
      <title>Billing &amp; Payments Engineering Meetup II</title>
      <description>&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On March 18th, we hosted our second Billing &amp;amp; Payments Engineering Meetup at Netflix. It felt truly encouraging to see the growing interest of the engineer community of the Bay Area for the event. Just like the first event, the theater was almost full.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;If you missed our first Meetup, you can check it &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/07/billing-payments-engineering-meetup.html" style="text-decoration: none;" target="_blank"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;here&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img alt="IMG_3573.jpg" height="195px;" src="https://lh4.googleusercontent.com/BTIzSzYaOGTyhxaUxKtvy1iYJVoBhM1prPLn9LIebecFDcctBE_n3ReO9fwi1E45UXTfsMCH-IeIq4cffRawuktr2Tg3K3Upgrb1gby5Rpc1RKF6j5jKYUVzcMGLL0pwIttvszs" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;For this Meetup, we decided to take a different approach. We are several teams within Netflix that are involved with billing or payments at various level. Each of us gave a presentation of our work, therefore hoping to provide the audience with a 360, transversal vision of how payments are managed at Netflix. There’s a great synergy between us and we hope it was reflected in the talks we gave.&lt;/span&gt;&lt;br /&gt;&lt;div style="text-align: justify;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Stay tuned on the meetup page to be notified of the next event!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;a href="http://www.meetup.com/Netflix-Billing-Payments-Engineering/" style="text-decoration: none;" target="_blank"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://www.meetup.com/Netflix-Billing-Payments-Engineering/&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;• &lt;/span&gt;&lt;u&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Payment Processing in the Cloud&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt; - Mathieu Chauvin - Payments Engineering&lt;/span&gt;&lt;/u&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;Now that Netflix has gained a tremendous experience with AWS, the Payments Engineering team has re-engineered their suite of applications into the cloud. It’s the first time payments are processed from a public cloud solution at this scale.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This presentation gives more information about the technical design of this new solution, as well as the transition strategy that was adopted, for a seamless migration of more than 57 million subscribers.&lt;/span&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Mat's team is hiring!&lt;/span&gt;&lt;br /&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/2236/apply" target="_blank"&gt;Senior Software Engineer in Test - Payments Platform&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/k_ckJ7QgLW0?rel=0&amp;amp;showinfo=0" width="560"&gt;&lt;/iframe&gt;&lt;iframe allowfullscreen="" frameborder="0" height="263" marginheight="0" marginwidth="0" scrolling="no" src="//www.slideshare.net/slideshow/embed_code/46195495" style="border: 1px solid rgb(204, 204, 204); margin-bottom: 5px; max-width: 100%;" width="310"&gt;&lt;/iframe&gt;   &lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;• &lt;/span&gt;&lt;u&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Architecture about Billing Workflows in the Cloud&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt; - Sangeeta Handa &amp;amp; John Brandy - Billing Engineering&lt;/span&gt;&lt;/u&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;At Billing we are at the crossroads, where we are half way still in our old data center and half way migrated to cloud. Billing Engineering has 2 major aspects - One is batch renewal of Netflix subscribing customers and other is the APIs that change the billing state of a Netflix customer &amp;nbsp;in some way. Our topic for discussion was how Billing engineering is managing its workflow for these APIs across different processes and teams in this scenario and technology stack we are using to accomplish this.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Sangeeta’s team is hiring!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01510/apply" target="_blank"&gt;Senior Software Engineer/Architect - Billing Platform&lt;/a&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01729/apply" target="_blank"&gt;Senior Software Engineer in Test - Billing Platform&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/2tTEgQ9hGdk?rel=0&amp;amp;showinfo=0" width="560"&gt;&lt;/iframe&gt;&lt;iframe allowfullscreen="" frameborder="0" height="263" marginheight="0" marginwidth="0" scrolling="no" src="//www.slideshare.net/slideshow/embed_code/46195686" style="border-width: 1px; border: 1px solid #CCC; margin-bottom: 5px; max-width: 100%;" width="310"&gt;&lt;/iframe&gt;   &lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;• &lt;/span&gt;&lt;u&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Payment Analytics at Netflix&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt; - Shankar Vedaraman - Data Science Engineering, Payments&lt;/span&gt;&lt;/u&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;Netflix Product has been data driven since inception and payment processing at Netflix is no different. With more than 55M customers paying Netflix on a monthly basis, there is lots of data to analyze and recommend dynamic routing of transactions to maximize approval rates. At the meetup, Shankar Vedaraman, who leads the Payment Analytics Data Science and Engineering team, presented all the different payments business processes that his team focusses on and touched upon key analytical insights that his team provides.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Shankar's team is hiring!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX02104/apply" target="_blank"&gt;Senior Data Engineer - Payment Analytics&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/5wCN_GoQt0A?rel=0&amp;amp;showinfo=0" width="560"&gt;&lt;/iframe&gt;&lt;iframe allowfullscreen="" frameborder="0" height="263" marginheight="0" marginwidth="0" scrolling="no" src="//www.slideshare.net/slideshow/embed_code/46339657" style="border-width: 1px; border: 1px solid #CCC; margin-bottom: 5px; max-width: 100%;" width="310"&gt; &lt;/iframe&gt;    &lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;• &lt;/span&gt;&lt;u&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Security for Billing &amp;amp; Payments&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt; - Poorna Udupi - Product and Application Security&lt;/span&gt;&lt;/u&gt;&lt;br /&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt;Poorna Udupi who leads the Product and Application Security team at Netflix, spoke about &lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; font-weight: bold; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt;making security consumable&lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt; in the form of tools, libraries and self-service applications to enable developers attain a rapid velocity of feature delivery while simultaneously being secure. Specifically speaking to the audience of billing and payments enthusiasts, he discussed a few security techniques in detail: &lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; font-style: italic; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt;infrastructure segmentation, tokenization, utilization of big data for fraud and abuse detection, prevention and sanitization&lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt;. He provided a lightning overview of some of the open source security projects contributed by his team such as&lt;/span&gt;&lt;a href="https://github.com/Netflix/Scumblr" style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; text-decoration: none; white-space: pre-wrap;" target="_blank"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline;"&gt; Scumblr&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt;,&lt;/span&gt;&lt;a href="https://github.com/Netflix/sketchy" style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; text-decoration: none; white-space: pre-wrap;" target="_blank"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline;"&gt; Sketchy&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; vertical-align: baseline; white-space: pre-wrap;"&gt; and others in the pipeline that focus on automating away security functions so that his team can focus on security feature experimentation and innovation.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Poorna's team is hiring!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01705" target="_blank"&gt;Senior Application Security Engineer/Architect&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01873" target="_blank"&gt;Senior Cloud Security Engineer/Architect&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01526" target="_blank"&gt;Senior Cloud Security DevOps Engineer&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX02011" target="_blank"&gt;Senior Security Incident Response Engineer&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/B7hhVvQIG-o?rel=0&amp;amp;showinfo=0" width="560"&gt;&lt;/iframe&gt;&lt;iframe allowfullscreen="" frameborder="0" height="263" marginheight="0" marginwidth="0" scrolling="no" src="//www.slideshare.net/slideshow/embed_code/46199009" style="border-width: 1px; border: 1px solid #CCC; margin-bottom: 5px; max-width: 100%;" width="310"&gt;&lt;/iframe&gt;   &lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;• &lt;/span&gt;&lt;u&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Escape from PCI Land&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt; - Rahul Dani - Growth Product Engineering&lt;/span&gt;&lt;/u&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; text-align: justify; white-space: pre-wrap;"&gt;Rahul Dani, who leads the Growth Product Engineering team at Netflix, talked about the adventure in steering the middle tier signup apps out of PCI scope and into a PCI free environment.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div style="text-align: justify;"&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Rahul's team is hiring!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://jobs.netflix.com/#/jobs/NFX01701/apply" target="_blank"&gt;Senior Software Engineer - Growth Product Engineering&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/sYFDnGjNVrk?rel=0&amp;amp;showinfo=0" width="560"&gt;&lt;/iframe&gt;&lt;iframe allowfullscreen="" frameborder="0" height="290" marginheight="0" marginwidth="0" scrolling="no" src="//www.slideshare.net/slideshow/embed_code/46290988" style="border-width: 1px; border: 1px solid #CCC; margin-bottom: 5px; max-width: 100%;" width="340"&gt; &lt;/iframe&gt;&lt;/div&gt;&lt;br /&gt;</description>
      <link>http://techblog.netflix.com/2015/03/billing-payments-engineering-meetup-ii.html</link>
      <author>noreply@blogger.com (Mathieu Chauvin)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://img.youtube.com/vi/k_ckJ7QgLW0/default.jpg" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-2943300348335125336</guid>
      <pubDate>Wed, 11 Mar 2015 17:23:00 +0000</pubDate>
      <atom:updated>2015-03-11T10:23:34.996-07:00</atom:updated>
      <title>Can Spark Streaming survive Chaos Monkey?</title>
      <description>&lt;div dir="ltr" style="text-align: left;" trbidi="on"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;by &lt;/span&gt;&lt;a href="https://www.linkedin.com/in/bharatvenkat/en" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Bharat Venkat&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.linkedin.com/pub/prasanna-padmanabhan/1/674/130/en" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Prasanna Padmanabhan&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.linkedin.com/in/aasamy/en" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Antony Arokiasamy&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.linkedin.com/pub/raju-uppalapati/1/200/78/en" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Raju Uppalapati&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b id="docs-internal-guid-7f1f8edd-05bf-8de4-3c08-c614e6a51bba" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix is a data-driven organization that places emphasis on the quality of data collected and processed. In our &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2015/02/whats-trending-on-netflix.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;previous blog post&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, we highlighted our use cases for real-time stream processing in the context of online recommendations and data monitoring. With Spark Streaming as our choice of stream processor, we set out to evaluate and share the resiliency story for Spark Streaming in the AWS cloud environment. &amp;nbsp;&lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/07/chaos-monkey-released-into-wild.html" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Chaos Monkey&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; based approach, which randomly terminated instances or processes, was employed to simulate failures.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;div style="text-align: justify;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Spark on &lt;/span&gt;&lt;a href="http://aws.amazon.com/solutions/case-studies/netflix/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Amazon Web Services (AWS)&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; is relevant to us as Netflix delivers its service primarily out of the AWS cloud. Stream processing systems need to be operational 24/7 and be tolerant to failures. Instances on AWS are ephemeral, which makes it imperative to ensure Spark’s resiliency. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 8pt; text-align: left;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Spark Components&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;a href="https://spark.apache.org/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Apache Spark&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; is a fast and general-purpose cluster computing system. Spark can be deployed on top of Mesos, Yarn or Spark's own cluster manager, which allocates worker node resources to an application. Spark Driver connects to the cluster manager and is responsible for converting an application to a directed graph (DAG) of individual tasks that get executed within an executor process on the worker nodes.&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/-_3zXkJ8MbAY/VP9po90y9WI/AAAAAAAAAmo/3maVgHd59_w/s1600/Screen%2BShot%2B2015-03-10%2Bat%2B3.00.47%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/-_3zXkJ8MbAY/VP9po90y9WI/AAAAAAAAAmo/3maVgHd59_w/s1600/Screen%2BShot%2B2015-03-10%2Bat%2B3.00.47%2BPM.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fig 1: &lt;/span&gt;&lt;a href="https://spark.apache.org/docs/latest/cluster-overview.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Different components of Spark&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 8pt; text-align: left;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Creating Chaos&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix streaming devices periodically send events that capture member activities, which plays a significant role in personalization. These events flow to our server side applications and are routed to Kafka. Our Spark streaming application consumes these events from Kafka and computes metrics. The deployment architecture is shown below:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/-p6tepE4NgaM/VP9pyzNQ19I/AAAAAAAAAmw/--fXvtJluAE/s1600/Screen%2BShot%2B2015-03-10%2Bat%2B3.01.34%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/-p6tepE4NgaM/VP9pyzNQ19I/AAAAAAAAAmw/--fXvtJluAE/s1600/Screen%2BShot%2B2015-03-10%2Bat%2B3.01.34%2BPM.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fig 2: Deployment Architecture&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Our goal is to validate that there is no interruption in computing metrics when the different Spark components fail. To simulate such failures, we employed a whack-a-mole approach and killed the various Spark components. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We ran our spark streaming application on Spark Standalone. The resiliency exercise was run with Spark v1.2.0, Kafka v0.8.0 and Zookeeper v3.4.5.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 8pt; text-align: left;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Spark Streaming Resiliency&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Driver Resiliency&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: Spark Standalone supports two modes for launching the driver application. In client mode, the driver is launched in the same process as the one where the client submits the application. &amp;nbsp;When this process dies, the application is aborted. &amp;nbsp;In cluster mode, the driver is launched from one of the worker process in the cluster. &amp;nbsp;Additionally, standalone cluster mode supports a supervise option that allows restarting the application automatically on non-zero exit codes.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Master Resiliency:&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &amp;nbsp;Spark scheduler uses the Master to make scheduling decisions. &amp;nbsp;To avoid single point of failure, it is best to setup a multi master standalone cluster.&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Spark uses Zookeeper for leader election. One of the master nodes becomes the ACTIVE node and all Worker nodes get registered to it. When this master node dies, one of the STANDBY master nodes becomes the ACTIVE node and all the Worker nodes get automatically registered to it. If there are any applications running on the cluster during the master failover, they still continue to run without a glitch.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Worker Process Resiliency&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: Worker process launches and monitors the Executor and Driver as child processes. When the Worker process is killed, all its child processes are also killed. &amp;nbsp;The Worker process gets automatically relaunched, which in turn restarts the Driver and/or the Executor process. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Executor Resiliency&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: When the Executor process is killed, they are automatically relaunched by the Worker process and any tasks that were in flight are rescheduled.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Receiver Resiliency&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: Receiver runs as a long running task within an Executor and follows the same resiliency characteristics of an executor.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The effect on the computed metrics due to the termination of various Spark components is shown below. &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="337px;" src="https://lh5.googleusercontent.com/V7jGvuTghLv6A3sCWS90VDY2_ggsTKVYLTQq0nH4EbAv-pcB5-VFS0UmeMU2hT0SE-bgmr-9s48mJ_ez6E3OFrEZ7TAMzbhR1y-XwwzNwWW6dNzJxBwFgWo_4cWgnUZwBKdVyiY" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Fig 3: Behavior on Receive/Driver/Master failure&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Driver Failure&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: The main impact is back-pressure built up due to a node failure, which results in a sudden drop in message processing rate, followed by a catch up spike, before the graph settles into steady state.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Receiver Failure&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: The dip in computed metrics was due to the fact that default Kafka receiver is an &lt;/span&gt;&lt;a href="http://spark.apache.org/docs/1.2.0/streaming-programming-guide.html#receiver-reliability" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;unreliable receiver&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. &amp;nbsp;Spark streaming 1.2 introduced an experimental feature called &lt;/span&gt;&lt;a href="http://spark.apache.org/docs/1.2.0/streaming-kafka-integration.html#deploying-applications.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;write ahead logs&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; that would make the kafka receiver reliable. &amp;nbsp;When this is enabled, applications would incur a hit to Kafka receiver throughput. &amp;nbsp;However, this could be addressed by increasing the number of receivers.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 8pt; text-align: left;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Summary&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: white; color: #333333; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The following table summarizes the resiliency characteristics of different Spark components:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="margin-left: 0pt;"&gt;&lt;table style="border-collapse: collapse; border: none;"&gt;&lt;colgroup&gt;&lt;col width="99"&gt;&lt;/col&gt;&lt;col width="81"&gt;&lt;/col&gt;&lt;col width="366"&gt;&lt;/col&gt;&lt;col width="79"&gt;&lt;/col&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Component&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Type&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Behaviour on Component Failure&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Resilient&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 28px;"&gt;&lt;td rowspan="2" style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Driver&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td rowspan="2" style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Process&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Client Mode&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: The entire application is killed&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="34px;" src="https://lh5.googleusercontent.com/OUawpQ95EUb9yvm2s4CNcXjTybFYlljhQ3NAtmH_vsVHEz3IFjK5HI-K38dfZVbutQmH5ZL-Xw1eC6A6PSjok1CSkozn-K3ccCo464H3RQugBnnvy1EiEIXJYbFLqf_eEB2GQ7w" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="32px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 28px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Cluster Mode with supervise&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: The Driver is restarted on a different Worker node&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="29px;" src="https://lh6.googleusercontent.com/Pm2uWpjJKowHJWjVEiJXHjtY5d2R2Xd0uwJ1Y_BUi6GQrIBcn6qmO_YZaY-3iYSRMNoEjRQfErxI5JGEbD5sk7avPTft37bl47exFXAsruFBrWizbHAeoXodqgpUReRQW9rPY6g" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="30px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 28px;"&gt;&lt;td rowspan="2" style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Master&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td rowspan="2" style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Process&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Single Master&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: The entire application is killed&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="35px;" src="https://lh5.googleusercontent.com/OUawpQ95EUb9yvm2s4CNcXjTybFYlljhQ3NAtmH_vsVHEz3IFjK5HI-K38dfZVbutQmH5ZL-Xw1eC6A6PSjok1CSkozn-K3ccCo464H3RQugBnnvy1EiEIXJYbFLqf_eEB2GQ7w" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="33px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 28px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Multi Master&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: A STANDBY master is elected ACTIVE&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="29px;" src="https://lh6.googleusercontent.com/Pm2uWpjJKowHJWjVEiJXHjtY5d2R2Xd0uwJ1Y_BUi6GQrIBcn6qmO_YZaY-3iYSRMNoEjRQfErxI5JGEbD5sk7avPTft37bl47exFXAsruFBrWizbHAeoXodqgpUReRQW9rPY6g" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="30px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Worker Process&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Process&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;All child processes (executor or driver) are also terminated and a new worker process is launched&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="29px;" src="https://lh6.googleusercontent.com/Pm2uWpjJKowHJWjVEiJXHjtY5d2R2Xd0uwJ1Y_BUi6GQrIBcn6qmO_YZaY-3iYSRMNoEjRQfErxI5JGEbD5sk7avPTft37bl47exFXAsruFBrWizbHAeoXodqgpUReRQW9rPY6g" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="30px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Executor&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Process&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A new executor is launched by the Worker process&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="29px;" src="https://lh6.googleusercontent.com/Pm2uWpjJKowHJWjVEiJXHjtY5d2R2Xd0uwJ1Y_BUi6GQrIBcn6qmO_YZaY-3iYSRMNoEjRQfErxI5JGEbD5sk7avPTft37bl47exFXAsruFBrWizbHAeoXodqgpUReRQW9rPY6g" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="30px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Receiver&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Thread(s)&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Same as Executor as they are long running tasks inside the Executor&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="29px;" src="https://lh6.googleusercontent.com/Pm2uWpjJKowHJWjVEiJXHjtY5d2R2Xd0uwJ1Y_BUi6GQrIBcn6qmO_YZaY-3iYSRMNoEjRQfErxI5JGEbD5sk7avPTft37bl47exFXAsruFBrWizbHAeoXodqgpUReRQW9rPY6g" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="30px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="height: 0px;"&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Worker Node&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Node&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Worker, Executor and Driver processes run on Worker nodes and the behavior is same as killing them individually&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style="border-bottom: solid #000000 1px; border-left: solid #000000 1px; border-right: solid #000000 1px; border-top: solid #000000 1px; padding: 7px 7px 7px 7px; vertical-align: top;"&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="29px;" src="https://lh6.googleusercontent.com/Pm2uWpjJKowHJWjVEiJXHjtY5d2R2Xd0uwJ1Y_BUi6GQrIBcn6qmO_YZaY-3iYSRMNoEjRQfErxI5JGEbD5sk7avPTft37bl47exFXAsruFBrWizbHAeoXodqgpUReRQW9rPY6g" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="30px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We uncovered a few issues (&lt;/span&gt;&lt;a href="https://issues.apache.org/jira/browse/SPARK-5967" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;SPARK-5967&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://issues.apache.org/jira/browse/SPARK-3495" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;SPARK-3495&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://issues.apache.org/jira/browse/SPARK-3496" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;SPARK-3496&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, etc.) during this exercise, but Spark Streaming team was helpful in fixing them in a timely fashion. We are also in the midst of performance testing Spark and will follow up with a blog post.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Overall, we are happy with the resiliency of spark standalone for our use cases and excited to take it to the next level where we are working towards building a unified &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Lambda_architecture" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Lambda Architecture&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; that involves a combination of batch and real-time streaming processing. &amp;nbsp;We are in early stages of this effort, so if you interested in contributing in this area, please reach out to us.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.2; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/03/can-spark-streaming-survive-chaos-monkey.html</link>
      <author>noreply@blogger.com (Prasanna Padmanabhan)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://4.bp.blogspot.com/-_3zXkJ8MbAY/VP9po90y9WI/AAAAAAAAAmo/3maVgHd59_w/s72-c/Screen%2BShot%2B2015-03-10%2Bat%2B3.00.47%2BPM.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-6453815002083032519</guid>
      <pubDate>Mon, 09 Mar 2015 19:57:00 +0000</pubDate>
      <atom:updated>2015-03-09T12:58:56.450-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">Hack Day</category>
      <title>Netflix Hack Day - Winter 2015</title>
      <description>&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-f35343ae-0003-472e-cbad-b0064f7e9cdc"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By &lt;/span&gt;&lt;a href="https://twitter.com/daniel_jacobson" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Daniel Jacobson&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://twitter.com/rusmeshenberg" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Ruslan Meshenberg&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://twitter.com/mattmccarthy03" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Matt McCarthy&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=4270321" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Leslie Posada&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b id="docs-internal-guid-f35343ae-fc36-e063-65b8-f73b7f7955fa" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664555; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Last week, we hosted the latest Netflix Hack Day. &lt;span style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 12.8000001907349px; line-height: normal; white-space: normal;"&gt;Hack Day is a way for our product development teams to get away from everyday work. It's a fun, experimental, collaborative, and creative outlet&lt;/span&gt;.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664555; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This time, we had about 70 hacks that were produced by more than 150 engineers and designers. We shared a few examples below to give you a taste, and you can see some of our past hacks in our posts for &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/02/netflix-hack-day.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Feb. 2014&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &amp;amp; &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/08/netflix-hack-day-summer-2014.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Aug. 2014&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. Note that while we think these hacks are very cool and fun, they may never become part of the Netflix product, internal infrastructure, or otherwise be used beyond Hack Day.  &lt;/span&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 13px; line-height: 17.7450008392334px; white-space: pre-wrap;"&gt;We are surfacing them here publicly to share the spirit of the event.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Thanks to all of the hackers for putting together some incredible work in just 24 hours. If you’re interested in being a part of our next Hack Day, let us know by checking out our&lt;/span&gt;&lt;a href="http://jobs.netflix.com/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;jobs site&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;!&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: #444444; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr /&gt;&lt;br /&gt;&lt;div dir="ltr" style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div dir="ltr" style="line-height: 1.63800006866455; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix Earth&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.63800006866455; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix Earth is an animated 3D globe showing real-time global playback activity.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.63800006866455; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By&lt;/span&gt;&lt;a href="http://www.twitter.com/evan_browning" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/a&gt;&lt;a href="http://www.twitter.com/jeff3dx" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Jeff Butsch&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="https://www.linkedin.com/in/katzseth22202" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Seth Katz&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/Qdgdu2HVnzY" width="560"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;BEEP (Binge Encouragement and Enforcement Platform)&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;BEEP actively and abrasively encourages users to continue watching Netflix when their attention starts to stray.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By &lt;/span&gt;&lt;a href="http://www.twitter.com/benhagen" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Ben Hagen&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/HEiNTunIo8c" width="560"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;darNES&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In a world... where devices proliferate… darNES digs back in time to provide Netflix access to the original Nintendo Entertainment System.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-f35343ae-001e-46b6-a243-036099dfe4d0"&gt;&lt;span style="font-family: Arial; font-size: 13px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;By&lt;/span&gt;&lt;a href="http://www.twitter.com/madcapnmckay" style="text-decoration: none;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/a&gt;&lt;a href="http://www.twitter.com/gcirino42" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Guy Cirino&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 13px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/pub/alexander-wolfe/6b/251/4ab" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Alex Wolfe&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 13px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.twitter.com/CareninaM" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Carenina Motion&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/_yn-rNdYZAY" width="560"&gt;&lt;/iframe&gt; &lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Say Whaaat!!!&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Say Whaaat!!! provides a more convenient way to to catch missed dialogue as you watch Netflix by displaying subtitles when you pause playback. It also provides the ability to navigate a film's timeline, caption by caption.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By &lt;/span&gt;&lt;a href="http://www.twitter.com/joeycato" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Joey Cato&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="https://www.twitter.com/adab444" style="text-decoration: none;"&gt;Adnan Abbas&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/dDOlyTA1jRA" width="560"&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: bold; vertical-align: baseline; white-space: pre-wrap;"&gt;Net the Netflix Cheats&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Don’t let your partners watch when you aren't around. Net the Netflix Cheats requires dual PIN access to watch titles that you and your partner have agreed to watch together.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By &lt;/span&gt;&lt;a href="http://www.twitter.com/kedar_sadekar" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Kedar Sadekar&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=14249038" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Sathish Sridharan&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/OyW8UU5ddq4" width="560"&gt;&lt;/iframe&gt; &lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664555; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr /&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;And here are some pictures taken during the event.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.638000068664552; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img src="https://lh3.googleusercontent.com/E_-Pv7MorEVhUIMFnVtkFR-Zn17N2uOwtnZWrjxOw6BTxnz5usTbUXkiJ9WxeB2LOQWNYYITbEqffk9HqRjl5JWJc7esT03hupjqcUNhWpJq0R1oCpNtg2SO-1ccQMQ9D6nrFlk" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="419px;" src="https://lh6.googleusercontent.com/xWvjYvKaPogqjmNGtW7Tj4pX8sS6Gqg8VqtjuNxJPFttvZR-SIfHssuwm1OMMeokQ_QkE46laNe65si1O1OPYVGxdpass6bYZ2gFFPQ-PokNZLjwFJoQ1mxQJCiU5iQmkQb32no" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="630px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="382" src="https://lh6.googleusercontent.com/6I9xjErVjFGYSsmn3O1O2fcIh1RbwZKrA2puwcjsjHa3L8EBiAEPLyl7ftXewCyloeFWqlwPRxvrY_2NyL8O_HM8XCG0NddBv_3Od-3O-FHIFM7WAPHeXsujGtH4w1pBMXvB-6E" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="640" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="415px;" src="https://lh6.googleusercontent.com/_1wzfqH3MpvQC6p6n8CrQ5KYhdrg7MMNc6d-dpA6O-sZlHQ_zwBeO1oTMHwaoHQemywxNwKH3hfTnUfT5H_rX1xA7bVVSEznQwe1mWZUjQFnELqvfAs1AdDqhi5MJg32d5j9YsI" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="635px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="279px;" src="https://lh6.googleusercontent.com/t07y6GWqDzrKdwLPduG7REavCf3j5cPWBT4NGo7y967sGINFJyYRqf86HBgJereXJcUlIjs0We8ww0zm6JfXKrW81xO_G0yQ2-HAJsqktTOT0cjJ8t0pUedeuzg1epF3LXo7yh0" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="636px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="319px;" src="https://lh4.googleusercontent.com/nHbQ4fgo4tumpo3zO6sXjQsI4_hxYu7mT7NnXQkEk7xJarKPh5o5_sggn1CVlTUXqj_PQ0O-A6ktRrtmDLkcQAcySTRzLqa-Y4gOTpi5KGn2DHPtJha58xXWKjIHpTZlZkRjm-E" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/03/netflix-hack-day-winter-2015.html</link>
      <author>noreply@blogger.com (Unknown)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://img.youtube.com/vi/Qdgdu2HVnzY/default.jpg" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-6715423400580393831</guid>
      <pubDate>Thu, 19 Feb 2015 16:02:00 +0000</pubDate>
      <atom:updated>2015-06-12T10:29:54.464-07:00</atom:updated>
      <title>RAD - Outlier Detection on Big Data</title>
      <description>&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Outlier detection can be a pain point for all data driven companies, especially as data volumes grow. At Netflix we have multiple datasets growing by 10B+ record/day and so there’s a need for automated anomaly detection tools ensuring data quality and identifying suspicious anomalies. Today we are open-sourcing our outlier detection function, called Robust Anomaly Detection (RAD), as part of our &lt;/span&gt;&lt;a href="https://github.com/Netflix/Surus" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Surus&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt; project.&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; line-height: 1.38; white-space: pre-wrap;"&gt;As we built RAD we identified four generic challenges that are ubiquitous in outlier detection on “big data.”&lt;/span&gt;&lt;br /&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;/span&gt;&lt;br /&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;li dir="ltr" style="font-family: Arial; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;High cardinality dimensions&lt;/span&gt;&lt;span style="vertical-align: baseline; white-space: pre-wrap;"&gt;: High cardinality data sets - especially those with large combinatorial permutations of column groupings - makes human inspection impractical.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;Minimizing False Positives&lt;/span&gt;&lt;span style="vertical-align: baseline; white-space: pre-wrap;"&gt;: A successful anomaly detection tool must minimize false positives. In our experience there are many alerting platforms that “sound an alarm” that goes ultimately unresolved. The goal is to create alerting mechanisms that can be tuned to appropriately balance noise and information.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;Seasonality&lt;/span&gt;&lt;span style="vertical-align: baseline; white-space: pre-wrap;"&gt;: Hourly/Weekly/Bi-weekly/Monthly seasonal effects are common and can be mis-identified as outliers deserving attention if not handled properly. Seasonal variability needs to be ignored.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;Data is not always normally distributed&lt;/span&gt;&lt;span style="vertical-align: baseline; white-space: pre-wrap;"&gt;: This has been a particular challenge since Netflix has been growing over the last 24 months. Generally though, an outlier tool must be robust so that it works on data that is not normally distributed.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/span&gt;&lt;/ul&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;In addition to addressing the challenges above, we wanted a solution with a generic interface (supporting application development). We met these objectives with a novel algorithm encased in a wrapper for easy deployment in our ETL environment.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;/span&gt;&lt;br /&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;span style="font-family: 'Trebuchet MS'; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="font-size: large;"&gt;Algorithm&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;We initially tested techniques like moving averages with standard deviations and time series/regression models (ARIMAX) but found that these simpler methods were not robust enough in high cardinality data.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;The algorithm we finally settled on uses Robust &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Principal_component_analysis" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Principal Component Analysis&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt; (RPCA) to detect anomalies. PCA uses the Singular Value Decomposition (SVD) to find low rank representations of the data. The robust version of PCA (RPCA) identifies a low rank representation, random noise, and a set of outliers by repeatedly calculating the SVD and applying “thresholds” to the singular values and error for each iteration. For more information please refer to the original paper by &lt;/span&gt;&lt;a href="http://statweb.stanford.edu/~candes/papers/RobustPCA.pdf" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Candes et al. (2009)&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f26-fcd5-9dd3-bd95be5f71a6"&gt;&lt;br /&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Below is an &lt;a href="http://netflix.github.io/demos/rsvd/"&gt;interactive visualization&lt;/a&gt; of the algorithm at work on a simple/random dataset and on &lt;/span&gt;&lt;a href="http://www.epa.gov/ttn/airs/airsaqs/detaildata/downloadaqsdata.htm" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;public climate data&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;iframe height="750px" src="https://netflix.github.io/site-before-rework-June2015/demos/rsvd/" style="border: 1px solid lightgray; overflow: hidden; pointer-events: all;" width="600px"&gt;&lt;/iframe&gt; &lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: 'Trebuchet MS'; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="font-size: large;"&gt;Pig Wrapper &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Since Apache Pig is the primary ETL language at Netflix, we wrapped this algorithm in a Pig function enabling engineers to easily use it with just a few additional lines of code. We’ve open-sourced both the Java function that implements the algorithm and the Pig wrapper. The details and a sample application (with code) can be found &lt;/span&gt;&lt;a href="https://github.com/Netflix/Surus/blob/master/resources/examples/pig/rad.pig" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;here&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: 'Trebuchet MS'; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="font-size: large;"&gt;Business Application&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;The following are two popular applications where we initially implemented this anomaly detection system at Netflix with great success.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix processes millions of transactions every day across tens of thousands of banking institutions/infrastructures in both real-time and batch environments. We’ve used the above solution to detect anomalies in failures in the payment network at a bank level. With the above system, business managers were able to follow up with their counterparts in the payment industry and thereby reducing the impact on Netflix customers&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Our signup flow was another important point of application. Today Netflix customers sign up across the world on hundreds of different types of browsers or devices. Identifying anomalies across unique combinations of country, browser/device and language helps our engineers understand and react to customer sign up problems in a timely manner.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;h3 style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: 'Trebuchet MS'; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="font-size: large;"&gt;Conclusion&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;A robust algorithm is paramount to the success of any anomaly detection system and RPCA has worked very well for detecting anomalies. Along with the algorithm, our focus on simplifying the implementation with a Pig wrapper made the tool a great success. The applications listed above have helped the Netflix data teams understand and react to anomalies faster--which reduces the impact to Netflix customers and our overall business.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;By: &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=176830394" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Jeffrey Wong&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=15004610" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Chris Colburn&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=357371247" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Elijah Meeks&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;, and &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=3787953" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Shankar Vedaraman&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-e8f41375-7f27-9695-1cb6-347613d69a8d"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/02/rad-outlier-detection-on-big-data.html</link>
      <author>noreply@blogger.com (Chris Colburn)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-3398290668535605904</guid>
      <pubDate>Wed, 18 Feb 2015 15:10:00 +0000</pubDate>
      <atom:updated>2015-02-18T18:19:10.830-08:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">observability</category>
      <category domain="http://www.blogger.com/atom/ns#">optimization</category>
      <category domain="http://www.blogger.com/atom/ns#">performance</category>
      <category domain="http://www.blogger.com/atom/ns#">scalability</category>
      <title>A Microscope on Microservices</title>
      <description>&lt;h1 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt;by &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=8432078" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Coburn Watson&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://scotte.github.io/" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Scott Emmons&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt;, and &lt;/span&gt;&lt;a href="http://www.brendangregg.com/" style="line-height: 1.38; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Brendan Gregg&lt;/span&gt;&lt;/a&gt;&lt;/h1&gt;&lt;span id="docs-internal-guid-6eb3e3a5-98ea-afd2-00f2-57d8becf1226"&gt;&lt;br /&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;At Netflix we pioneer new cloud architectures and technologies to operate at massive scale - a scale which breaks most monitoring and analysis tools. The challenge is not just handling a massive instance count but to also provide quick, actionable insight for a large-scale, microservice-based architecture. Out of necessity we've developed our own tools for performance and reliability analysis, which we've also been open-sourcing (e.g., &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/12/introducing-atlas-netflixs-primary.html" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 13px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Atlas&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt; for cloud-wide monitoring). In this post we’ll discuss tools that the Cloud Performance and Reliability team have been developing, which are used together like a microscope switching between different magnifications as needed.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Request Flow (10X Magnification)&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;We'll start at a wide scale, visualizing the relationship between microservices to see which are called and how much time is spent in each:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br class="kix-line-break" /&gt;&lt;/span&gt;&lt;br /&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-Ome_r5TZSGo/VOTRbXoFX0I/AAAAAAAAAZQ/BJ49vy3prD8/s1600/slalom_full.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-Ome_r5TZSGo/VOTRbXoFX0I/AAAAAAAAAZQ/BJ49vy3prD8/s1600/slalom_full.png" height="245" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: white; color: #222222; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;Using an in-house dapper-like framework, we are able to layer the request demand through the aggregate infrastructure onto a simple visualization. This internal utility, Slalom, allows a given service to understand upstream and downstream dependencies, their contribution on service demand, and the general health of said requests. Data is initially represented through d3-based Sankey diagrams, with a detailed breakdown on absolute service demand and response status codes.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;This high-level overview gives a general picture of all the distributed services that are composed to satisfy a request. The height of each service node shows the amount of demand on that service, with the outgoing links showing demand on a downstream service relative to its siblings.&lt;/span&gt;&lt;br /&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="line-height: 16.3090915679932px;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;span style="line-height: 16.3090915679932px;"&gt;Double-clicking a single service exposes the bi-directional demand over the time window:&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-XGoBN6sg_qc/VOTR4Lb7Q4I/AAAAAAAAAZY/2iS5Xc-7t2g/s1600/slalom_2_full.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-XGoBN6sg_qc/VOTR4Lb7Q4I/AAAAAAAAAZY/2iS5Xc-7t2g/s1600/slalom_2_full.png" height="120" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;The macro visualization afforded by Slalom is limited based on the data available in the underlying metrics that are sampled. To bring into focus additional metric dimensions beyond simple IPC interactions we built another tool, Mogul.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Show me my bottleneck! (100X)&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;The ability to decompose where time is spent both within and across the fleet of microservices can be a challenge given the number of dependencies. &amp;nbsp;Such information can be leveraged to identify the root cause of performance degradation or identify areas ripe for optimization within a given microservice. &amp;nbsp;Our Mogul utility consumes data from Netflix’s &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/12/introducing-atlas-netflixs-primary.html" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;recently open-sourced Atlas monitoring framework&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;, applies correlation between metrics, and selects those most likely to be responsible for changes in demand on a given microservice. The different resources evaluated include:&lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br class="kix-line-break" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="font-family: Arial; font-size: 13px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;System resource demand (CPU, network, disk)&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; font-size: 13px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;JVM pressure (thread contention, garbage collection)&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; font-size: 13px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Service IPC calls&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; font-size: 13px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Persistency-related calls (EVCache, Cassandra)&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="font-family: Arial; font-size: 13px; list-style-type: disc; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;Errors and timeouts&lt;/span&gt;&lt;span style="color: black; font-family: Arial; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br class="kix-line-break" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;It is not uncommon for a mogul query to pull thousands of metrics, subsequently reducing to tens of metrics through correlation with system demand. In the following example, we were able to quickly identify which downstream service was causing performance issues for the service under study. This particular microservice has over 40,000 metrics. Mogul reduced this internally to just over 2000 metrics via pattern matching, then correlated the top 4-6 interesting metrics grouped into classifications.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;The following diagram displays a perturbation in the microservice response time (blue line) as it moves from ~125 to over 300 milliseconds. &amp;nbsp;The underlying graphs identifies those downstream calls that have a time-correlated increase in system demand.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/--VqZQbggvBE/VOTSdNGLyMI/AAAAAAAAAZg/g3KLxJCTKpI/s1600/mogul_full.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/--VqZQbggvBE/VOTSdNGLyMI/AAAAAAAAAZg/g3KLxJCTKpI/s1600/mogul_full.png" height="400" width="372" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;Like Slalom, Mogul uses Little’s Law - the product of response time and throughput - to compute service demand.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;My instance is bad ... or is it? (1000X)&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;Those running on the cloud or virtualized environments are not unfamiliar with the phrase “my instance is bad.” To evaluate if a given host is unstable or under pressure it is important to have the &lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; font-style: italic; vertical-align: baseline; white-space: pre-wrap;"&gt;right&lt;/span&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt; metrics available on-demand and at a high resolution (5 seconds or less). &amp;nbsp;Enter Vector, our on-instance performance monitoring framework which exposes hand-picked, high-resolution system metrics to every engineer’s browser. &amp;nbsp;Leveraging the battle tested system monitoring framework &lt;/span&gt;&lt;a href="http://pcp.io/" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Performance Co-Pilot&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt; (pcp) we are able to layer on a UI that polls instance-level metrics between every 1 and 5 seconds. &amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-zP2fZmXkmi4/VOTSrHECXJI/AAAAAAAAAZo/_qHnv6DYlng/s1600/vector_full.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-zP2fZmXkmi4/VOTSrHECXJI/AAAAAAAAAZo/_qHnv6DYlng/s1600/vector_full.png" height="165" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;This resolution of system data exposes possible multi-modal performance behavior not visible with higher-level aggregations. &amp;nbsp;Many times a runaway thread has been identified as a root cause of performance issues while overall CPU utilization remains low. &amp;nbsp;Vector abstracts away the complexity typically required with logging onto a system and running a large number of commands from the shell.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;A key feature of Vector and pcp is extensibility. &amp;nbsp;We have created multiple custom pcp agents to expose additional key performance views. &amp;nbsp;One example is a &lt;/span&gt;&lt;a href="http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;flamegraph&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt; generated by sampling the on-host Java process using jstack. &amp;nbsp;This view allows an engineer to quickly drill on where the Java process is spending CPU time.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://1.bp.blogspot.com/-brLOZA0pJRE/VOTS60n69fI/AAAAAAAAAZw/9Bemadh4eNQ/s1600/flame_graph_1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://1.bp.blogspot.com/-brLOZA0pJRE/VOTS60n69fI/AAAAAAAAAZw/9Bemadh4eNQ/s1600/flame_graph_1.png" height="320" width="300" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Next Steps..To Infinity and Beyond&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;The above tools have proved invaluable in the domain of performance and reliability analysis at Netflix, and &amp;nbsp;we are looking to open source Vector in the coming months. In the meantime we continue to extend our toolset by improving instrumentation capabilities at a base level. One example is a patch on OpenJDK which allows the generation of extended stack trace data that can be used to visualize system-through-user space time in the process stack.&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://3.bp.blogspot.com/-DyN5zumTHc0/VOTTVGo5iMI/AAAAAAAAAZ4/uXKknfeBkYo/s1600/flame_graph_2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://3.bp.blogspot.com/-DyN5zumTHc0/VOTTVGo5iMI/AAAAAAAAAZ4/uXKknfeBkYo/s1600/flame_graph_2.png" height="400" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: center;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Conclusion&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;It quickly became apparent at Netflix’s scale that viewing the performance of the aggregate system through a single lens would be insufficient. &amp;nbsp;Many commercial tools promise a one-stop shop but have rarely scaled to meet our needs. &amp;nbsp;Working from a macro-to-micro view, our team developed tools based upon the use cases we most frequently analyze and triage. &amp;nbsp;The result is much like a microscope which lets engineering teams select the focal length that most directly targets their dimension of interest.&lt;/span&gt;&lt;br /&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;As one engineer on our team puts it, “Most current performance tool methodologies are so 1990’s.” Finding and dealing with future observability challenges is key to our charter, and we have the team and drive to accomplish it. &amp;nbsp;If you would like to join us in tackling this kind of work, we are &lt;/span&gt;&lt;a href="http://jobs.netflix.com/jobs.php?id=NFX01887" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 13px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;hiring&lt;/span&gt;&lt;/a&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;!&lt;/span&gt;&lt;br /&gt;&lt;div&gt;&lt;span style="color: black; font-family: Arial; font-size: 13px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/02/a-microscope-on-microservices.html</link>
      <author>noreply@blogger.com (Coburn Watson)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://1.bp.blogspot.com/-Ome_r5TZSGo/VOTRbXoFX0I/AAAAAAAAAZQ/BJ49vy3prD8/s72-c/slalom_full.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-5624804519261886529</guid>
      <pubDate>Tue, 10 Feb 2015 20:38:00 +0000</pubDate>
      <atom:updated>2015-05-13T00:39:32.172-07:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">big data</category>
      <category domain="http://www.blogger.com/atom/ns#">recommendations</category>
      <category domain="http://www.blogger.com/atom/ns#">scalability</category>
      <category domain="http://www.blogger.com/atom/ns#">stream processing</category>
      <title>What's trending on Netflix?</title>
      <description>&lt;div dir="ltr" style="text-align: left;" trbidi="on"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By &lt;/span&gt;&lt;a href="https://www.linkedin.com/profile/view?id=4631220" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Prasanna Padmanabhan&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.linkedin.com/pub/kedar-sadekar/2/405/254/en" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Kedar Sadekar&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.linkedin.com/pub/gopal-krishnan/0/7a7/905/en" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Gopal Krishnan&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;b id="docs-internal-guid-37234c7d-7536-d69c-7687-ca7c4f09e31a" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Every day, millions of members across the globe, from thousands of devices, visit Netflix and generate millions of viewing hours. The majority of these viewing hours are generated through the videos that are recommended by our recommender systems. We continue to invest in improving our recommender systems that aid our members to discover and watch the specific content they love. We are constantly trying to improve the quality of the recommendations using the sound foundation of &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/04/netflix-recommendations-beyond-5-stars.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;AB testing&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On that front, we recently AB tested introducing a new row of videos on the home screen called “Trending Now”, which shows the videos that are trending in Netflix infused with some personalization for our members. This post explains how we built the backend infrastructure that powers the Trending Now row.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Traditionally, we pre-compute many of the recommendations for our members based on a combination of explicit signals (viewing history, ratings, My List, etc.) and other implicit signals (scroll activity, navigation, etc.) within Netflix, in &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2013/03/system-architectures-for.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;near-line&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; fashion. However, the Trending Now row is computed as events happen in real time. This allows us to not only personalize this row based on the context like time of day and day of week, but also react to sudden changes in collective interests of members, due to a real-world events such as Oscars or Halloween.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://2.bp.blogspot.com/-DoG4FtZ1TFA/VNzWysGa82I/AAAAAAAAAis/MpnUOLr9axc/s1600/Image1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" height="101" src="http://2.bp.blogspot.com/-DoG4FtZ1TFA/VNzWysGa82I/AAAAAAAAAis/MpnUOLr9axc/s1600/Image1.png" width="400" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Data Collection&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;There are primarily two data streams that are used to determine the trending videos:&lt;/span&gt;&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Play events: Videos that are played by our member&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Impression events: Videos seen by our members in their view port&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: white; color: #444444; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: white; color: #444444; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix embraces Service Oriented Architecture (SOA) composed of many small fine grained services that do one thing and one thing well. In that vein&lt;/span&gt;&lt;span style="background-color: white; color: #444444; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2015/01/netflixs-viewing-data-how-we-know-where.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Viewing History Service&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; captures all the videos that are played by our members. &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2012/06/scalable-logging-and-tracking.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Beacon&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; is another service that captures all impression events and user activities within Netflix. The requirement of computing recommendations in real time, presents us with an exciting challenge to make our data collection/processing pipeline a low latency, highly scalable and resilient system. We chose &lt;/span&gt;&lt;a href="http://kafka.apache.org/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Kafka&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, a distributed messaging system, for our data pipeline as it has &lt;/span&gt;&lt;a href="https://engineering.linkedin.com/kafka/benchmarking-apache-kafka-2-million-writes-second-three-cheap-machines" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;proven&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; to handle millions of events per second. All the data collected by the Viewing History and Beacon services are sent to Kafka.&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://3.bp.blogspot.com/-1I68cG2uoSw/VNzW7i_cjJI/AAAAAAAAAi0/AA_gdLNca6A/s1600/Image2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://3.bp.blogspot.com/-1I68cG2uoSw/VNzW7i_cjJI/AAAAAAAAAi0/AA_gdLNca6A/s1600/Image2.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Data Processing&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We built a custom stream processor that consumes the play and impressions events from Kafka and computes the following aggregated data:&lt;/span&gt;&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Play popularity: How many times is a video played&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;Take rate: Fraction of play events over impression events for a given video&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; line-height: 1.38; white-space: pre-wrap;"&gt;The first step in the data processing layer is to join the play and impression streams. We join them by request id, which is a unique identifier used to tie the front end calls to the backend service calls. With this join, all the plays and impressions events are grouped together for a given request id as illustrated in the figure below.&lt;/span&gt;&lt;br /&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://2.bp.blogspot.com/-J4yBgg4zriY/VNzXE3QjdkI/AAAAAAAAAi8/QGPPvKHcPO8/s1600/Image3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://2.bp.blogspot.com/-J4yBgg4zriY/VNzXE3QjdkI/AAAAAAAAAi8/QGPPvKHcPO8/s1600/Image3.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;This joined stream is then partitioned by video id, for all the plays and impression events of a given video to be processed at the same consumer instance. This way, each consumer will be able to atomically calculate the total number of plays and impressions data for every video. The aggregated play popularity and take rate data are persisted into Cassandra, as shown in the figure below.&lt;/span&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://3.bp.blogspot.com/-Jn8CaTbMiVM/VNzXLDKW0NI/AAAAAAAAAjE/srKBDybkFm4/s1600/Image4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://3.bp.blogspot.com/-Jn8CaTbMiVM/VNzXLDKW0NI/AAAAAAAAAjE/srKBDybkFm4/s1600/Image4.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;br /&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Real Time Data Monitoring&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Given the importance of the data quality to the recommendation system and the user experience, we continuously do canary analysis for the event streams. This involves simple validations such as the presence of mandatory attributes within an event to more complex validations such as finding the absence of an event within a time window. With appropriate alerting in place, within minutes of every UI push, we are able to catch any data regressions with this real time stream monitoring. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;It is imperative that the Kafka consumers are able to keep up with the incoming load into Kafka. Processing an event that was minutes old will neither provide a real trending effect nor help find data regression issues soon.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Bringing it all together&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;On a live user request, the aggregated play popularity and take rate data along with other explicit signals such as members’ viewing history and past ratings are used to compute a personalized Trending now row. The following figure shows the end to end infrastructure for building Trending Now row.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/-1kayZmhTWGY/VNzXRqCLx0I/AAAAAAAAAjM/cKh3bp4kMGk/s1600/Image5.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/-1kayZmhTWGY/VNzXRqCLx0I/AAAAAAAAAjM/cKh3bp4kMGk/s1600/Image5.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Netflix has a data-driven culture that is key to our success. &amp;nbsp;With billions of member viewing events and tens of millions of categorical preferences, we have endless opportunities to improve our recommendations even further. &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt; text-align: justify;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We are in the midst of replacing our custom stream processor with &lt;/span&gt;&lt;a href="https://spark.apache.org/streaming/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Spark Streaming&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. Stay tuned for an upcoming tech blog on our resiliency testing on Spark Streaming.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;If you would like to join us in tackling these kinds of challenges, we are&lt;/span&gt;&lt;a href="http://jobs.netflix.com/" style="text-decoration: none;"&gt;&lt;span style="background-color: white; color: black; font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;span style="background-color: white; color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;hiring&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: white; font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;!&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/02/whats-trending-on-netflix.html</link>
      <author>noreply@blogger.com (Prasanna Padmanabhan)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://2.bp.blogspot.com/-DoG4FtZ1TFA/VNzWysGa82I/AAAAAAAAAis/MpnUOLr9axc/s72-c/Image1.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-8288643091727555287</guid>
      <pubDate>Tue, 10 Feb 2015 17:10:00 +0000</pubDate>
      <atom:updated>2015-02-10T14:45:04.783-08:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">api</category>
      <category domain="http://www.blogger.com/atom/ns#">classloaders</category>
      <category domain="http://www.blogger.com/atom/ns#">isolation</category>
      <category domain="http://www.blogger.com/atom/ns#">modules</category>
      <category domain="http://www.blogger.com/atom/ns#">Netflix API</category>
      <category domain="http://www.blogger.com/atom/ns#">Netflix OSS</category>
      <category domain="http://www.blogger.com/atom/ns#">NetflixOSS</category>
      <category domain="http://www.blogger.com/atom/ns#">OSS</category>
      <category domain="http://www.blogger.com/atom/ns#">scripting library</category>
      <title>Nicobar: Dynamic Scripting Library for Java</title>
      <description>By &lt;a href="https://www.linkedin.com/in/jameskojo"&gt;James Kojo&lt;/a&gt;, &lt;a href="https://www.linkedin.com/pub/vasanth-asokan/1/450/799"&gt;Vasanth Asokan&lt;/a&gt;, &lt;a href="https://www.linkedin.com/vsearch/p?firstName=GEORGE&amp;amp;lastName=CAMPBELL&amp;amp;orig=SEO_SN&amp;amp;trk=SEO_SN&amp;amp;domainCountryName=&amp;amp;csrfToken=ajax%3A6444970943806773631"&gt;George Campbell&lt;/a&gt;, &lt;a href="https://www.linkedin.com/vsearch/p?firstName=Aaron&amp;amp;lastName=Tull&amp;amp;orig=SEO_SN&amp;amp;trk=SEO_SN&amp;amp;domainCountryName=&amp;amp;csrfToken=ajax%3A6444970943806773631"&gt;Aaron Tull&lt;/a&gt;&lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://4.bp.blogspot.com/-AOJQbHv94Gs/VNqJEOXnNoI/AAAAAAAAAiY/ydyTEUQKgas/s1600/nicobar_logo_210x210.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://4.bp.blogspot.com/-AOJQbHv94Gs/VNqJEOXnNoI/AAAAAAAAAiY/ydyTEUQKgas/s1600/nicobar_logo_210x210.png" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;The Netflix API is the front door to the streaming service, handling billions of requests per day from more than 1000 different device types around the world. To provide the best experience to our subscribers, it is critical that our UI teams have the ability to innovate at a rapid pace. As described in our &lt;a href="http://techblog.netflix.com/2014/03/the-netflix-dynamic-scripting-platform.html"&gt;blog post&lt;/a&gt; a year ago, we developed a Dynamic Scripting Platform that enables this rapid innovation. &lt;br /&gt;&lt;br /&gt;Today, we are happy to announce &lt;a href="https://github.com/Netflix/Nicobar"&gt;Nicobar&lt;/a&gt;, the open source script execution library that allows our UI teams to inject UI-specific adapter code dynamically into our JVM without the API team’s involvement. Named after a &lt;a href="http://en.wikipedia.org/wiki/Nicobar_Islands"&gt;remote archipelago in the eastern Indian Ocean&lt;/a&gt;, Nicobar allows each UI team to have its own island of code to optimize the client/server interaction for each device, evolved at its own pace.&lt;br /&gt;&lt;h2&gt;Background&lt;/h2&gt;As of this post’s writing, a single Netflix API instance hosts hundreds of UI scripts, developed by a dozen teams. Together, they deploy anywhere between a handful to a hundred UI scripts per day. A strong, core scripting library is what allows the API JVM to handle this rate of deployment reliably and efficiently. &lt;br /&gt;&lt;br /&gt;Our success with the scripting approach in the API platform led us to identify other applications that could benefit also from the ability to alter their behavior without a full scale deployment. Nicobar is a library that provides this functionality in a compact and reusable manner, with pluggable support for JVM languages.&lt;br /&gt;&lt;div&gt;&lt;h2&gt;&lt;span id="docs-internal-guid-79ecc683-7211-3025-9923-26fe5f5f4512"&gt;Architecture Overview&lt;/span&gt;&lt;/h2&gt;Early implementations of dynamic scripting at Netflix used basic java classloader technology to host and sandbox scripts from one another. While this was a good start, it was not nearly enough. Standard Java classloaders can have only one parent, and thus allow only simple, flattened hierarchies. If one wants to share classloaders, this is a big limitation and an inefficient use of memory. Also, code loaded within standard classloaders is fully visible to downstream classloaders. Finer-grained visibility controls are helpful in restricting what packages are exported and imported into classloaders.&lt;span id="docs-internal-guid-79ecc683-7211-3025-9923-26fe5f5f4512"&gt;&lt;br /&gt;&lt;br /&gt;Given these experiences, we designed into Nicobar a &lt;a href="https://github.com/Netflix/Nicobar/wiki/How-it-Works#script-module-loader"&gt;script module loader&lt;/a&gt; that holds a graph of inter-dependent &lt;a href="https://github.com/Netflix/Nicobar/wiki/How-it-Works#script-modules"&gt;script modules&lt;/a&gt;. Under the hood, we use &lt;a href="https://github.com/jboss-modules/jboss-modules/blob/master/src/main/java/org/jboss/modules/Module.java"&gt;JBoss Modules&lt;/a&gt; (which is open source) to create java modules. JBoss modules represent powerful extensions to basic Java classloaders, allowing for arbitrarily complex classloader dependency graphs, including multiple parents. They also support sophisticated package filters that can be applied to incoming and outgoing dependency edges. &lt;br /&gt;&lt;br /&gt;A script module provides an interface to retrieve the list of java classes held inside it. These classes can be instantiated and methods exercised on the instances, thereby “executing” the script module. &lt;br /&gt;&lt;br /&gt;Script source and resource bundles are represented by&amp;nbsp;&lt;a href="https://github.com/Netflix/Nicobar/wiki/How-it-Works#script-archives"&gt;script archives&lt;/a&gt;. Metadata for the archives is defined in the form of a &lt;a href="https://github.com/Netflix/Nicobar/wiki/How-it-Works#script-module-spec"&gt;script module specification&lt;/a&gt;, where script authors can describe the content language, inter-module dependencies, import and export filters for packages, as well as user specific metadata. &lt;br /&gt;&lt;br /&gt;Script archive contents can be in source form and/or in precompiled form (.class files). At runtime, script archives are converted into script modules by running the archive through &lt;a href="https://github.com/Netflix/Nicobar/wiki/How-it-Works#script-compiler-plugins"&gt;compilers and loaders&lt;/a&gt; that translate any source found into classes, and then loading up all classes into a module. Script compilers and loaders are pluggable, and out of the box, Nicobar comes with compilation support for Groovy 2, as well as a simple loader for compiled java classes.&lt;br /&gt;&lt;br /&gt;Archives can be stored into and queried from &lt;a href="https://github.com/Netflix/Nicobar/wiki/Archive-Repositories"&gt;archive repositories&lt;/a&gt; on demand, or via a continuous repository poller. Out of the box, Nicobar comes with a choice of file-system based or Cassandra based archive repositories.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;As the usage of a scripting system grows in scale, there is often the need for an administrative interface that supports publishing and modifying script archives, as well as viewing published archives. Towards this end, Nicobar comes with a &lt;a href="https://github.com/Netflix/Nicobar/wiki/Manager-and-Explorer"&gt;manager and explorer&lt;/a&gt; subproject, based on &lt;a href="https://github.com/Netflix/karyon"&gt;Karyon&lt;/a&gt; and &lt;a href="https://github.com/Netflix/pytheas"&gt;Pytheas&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h2&gt;Putting it all together&lt;/h2&gt;The diagram below illustrates how all the pieces work together.&lt;br /&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class="separator" style="clear: both; text-align: center;"&gt;&lt;a href="http://3.bp.blogspot.com/-eYl1jRK-D94/VNmeZGAyX8I/AAAAAAAAAiI/RHsTUeBajwg/s1600/Nicobar%2BArchitecture.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"&gt;&lt;img border="0" src="http://3.bp.blogspot.com/-eYl1jRK-D94/VNmeZGAyX8I/AAAAAAAAAiI/RHsTUeBajwg/s1600/Nicobar%2BArchitecture.png" height="522" width="600" /&gt;&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;h2&gt;&lt;span id="docs-internal-guid-79ecc683-7215-2e9e-362e-f319cb59a548"&gt;Usage Example - Hello Nicobar!&lt;/span&gt;&lt;/h2&gt;Here is an example of initializing the Nicobar script module loader to support Groovy scripts.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;b&gt;Create a script archive&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;Create a simple groovy script archive, with the following groovy file:&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/fd3f88cbaa026b0b1696.js"&gt;&lt;/script&gt;Add a module specification file &lt;span style="font-family: Courier New, Courier, monospace;"&gt;moduleSpec.json&lt;/span&gt;, along with the source:&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/4f36b69712b1eefd9442.js"&gt;&lt;/script&gt;Jar the source and module specification together as a jar file. This is your script archive.&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/22c3a0f4d37a88f62956.js"&gt;&lt;/script&gt;&lt;br /&gt;&lt;b&gt;Create a script module loader&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/d4f4d6a775d807e204b7.js"&gt;&lt;/script&gt;&lt;b&gt;Create an archive repository&lt;/b&gt;&lt;br /&gt;&lt;br /&gt;If you have more than a handful of scripts, you will likely need a repository representing the collection. Let’s create a JarArchiveRepository, which is a repository of script archive jars at some file system path. Copy &lt;span style="font-family: Courier New, Courier, monospace;"&gt;helloworld.jar&lt;/span&gt; into &lt;span style="font-family: Courier New, Courier, monospace;"&gt;/tmp/archiveRepo&lt;/span&gt; to match the code below.&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/b3882a629f975049241e.js"&gt;&lt;/script&gt;Hooking up the repository poller provides dynamic updates of discovered modules into the script module loader. You can wire up multiple repositories to a poller, which would poll them iteratively.&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/4bf59d77a350b599d2fd.js"&gt;&lt;/script&gt;&lt;b&gt;Execute script&lt;/b&gt;&lt;br /&gt;Script modules can be retrieved out of the module loader by name (and an optional version). Classes can be retrieved from script modules by name, or by type. Nicobar itself is agnostic to the type of the classes held in the module, and leaves it to the application’s business logic to decide what to extract out and how to execute classes.&lt;br /&gt;&lt;div&gt;&lt;br /&gt;Here is an example of extracting a class implementing &lt;a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html"&gt;Callable&lt;/a&gt; and executing it:&lt;br /&gt;&lt;br /&gt;&lt;script src="https://gist.github.com/vasanth-asokan/e5fbee96ea2a756eea14.js"&gt;&lt;/script&gt;At this point, any changes to the script archive jar will result in an update of the script module inside the module loader and new classes reflecting the update will be vended seamlessly!&lt;/div&gt;&lt;div&gt;&lt;h2&gt;More about the Module Loader&lt;/h2&gt;In addition to the ability to dynamically inject code, Nicobar’s module loading system also allows for multiple variants of a script module to coexist, providing for runtime selection of a variant. As an example, tracing code execution involves adding instrumentation code, which adds overhead. Using Nicobar, the application could vend classes from an instrumented version of the module when tracing is needed, while vending classes from the uninstrumented, faster version of the module otherwise. This paves the way for on demand tracing of code without having to add constant overhead on all executions.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;Module variants can also be leveraged to perform slow rollouts of script modules. When a module deployment is desired, a portion of the control flow can be directed through the new version of the module at runtime. Once confidence is gained in the new version, the update can be “completed”, by flushing out the old version and sending all control flow through the new module. &lt;br /&gt;&lt;br /&gt;Static parts of an application may benefit from a modular classloading architecture as well. Large applications, loaded into a monolithic classloader can become unwieldy over time, due to an accumulation of unintended dependencies and tight coupling between various parts of the application. In contrast, loading components using Nicobar modules allows for well defined boundaries and fine-grained isolation between them. This, in turn, facilitates decoupling of components, thereby allowing them to evolve independently&lt;/div&gt;&lt;div&gt;&lt;h2&gt;Conclusion&lt;/h2&gt;We are excited by the possibilities around creating dynamic applications using Nicobar. As usage of the library grows, we expect to see various feature requests around access controls, additional persistence and query layers, and support for other JVM languages. &lt;br /&gt;&lt;br /&gt;&lt;a href="http://openjdk.java.net/projects/jigsaw/"&gt;Project Jigsaw&lt;/a&gt;, the JDK’s native module loading system, is on the horizon too, and we are interested in seeing how Nicobar can leverage native module support from Jigsaw.&lt;br /&gt;&lt;br /&gt;If these kinds of opportunities and challenges interest you, we are &lt;a href="http://jobs.netflix.com/jobs.php"&gt;hiring&lt;/a&gt; and would love to hear from you!&lt;/div&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/02/nicobar-dynamic-scripting-library-for.html</link>
      <author>noreply@blogger.com (Vasanth Asokan)</author>
      <media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://4.bp.blogspot.com/-AOJQbHv94Gs/VNqJEOXnNoI/AAAAAAAAAiY/ydyTEUQKgas/s72-c/nicobar_logo_210x210.png" height="72" width="72"/>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-7089954634735481150</guid>
      <pubDate>Tue, 03 Feb 2015 01:58:00 +0000</pubDate>
      <atom:updated>2015-02-02T17:58:12.966-08:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">availability</category>
      <category domain="http://www.blogger.com/atom/ns#">devops</category>
      <category domain="http://www.blogger.com/atom/ns#">operational excellence</category>
      <category domain="http://www.blogger.com/atom/ns#">operational insight</category>
      <category domain="http://www.blogger.com/atom/ns#">site reliability</category>
      <title>SPS : the Pulse of Netflix Streaming</title>
      <description>&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We want to provide an amazing experience to each member, winning the “moments of truth” where they decide what entertainment to enjoy. &amp;nbsp;To do that, we need to understand the health of our system. &amp;nbsp;To quickly and easily understand the health of the system, we need a simple metric that a diverse set of people can comprehend. &amp;nbsp;In this post we will discuss how we discovered and aligned everyone around one operational metric indicating service health, enabling us to streamline production operations and improve availability. &amp;nbsp;We will detail how we approach signal analysis, deviation detection, and alerting for that signal and for other general use cases.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Creating the Right Signal&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In the early days of Netflix streaming, circa 2008, we manually tracked hundreds of metrics, relying on humans to detect problems. &amp;nbsp;Our approach worked for tens of servers and thousands of devices, but not for the thousands of servers and millions of devices that were in our future. &amp;nbsp;Complexity and human-reliant approaches don’t scale; simplicity and algorithm-driven approaches do.&lt;/span&gt;&lt;/div&gt;&lt;b id="docs-internal-guid-569c5a70-4d13-c870-2c93-512ff9c875c5" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We sought out a single indicator that closely approximated our most important activity: viewing. &amp;nbsp;We discovered that a server-side metric related to playback starts (the act of “clicking play”) had both a predictable pattern and fluctuated significantly when UI/device/server problems were happening. &amp;nbsp;The Netflix streaming pulse was created. &amp;nbsp;We named it “SPS” for “starts per second”.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="172px;" src="https://lh5.googleusercontent.com/11Ye0YfAw4FM70e-qtoA2AJ0Vl5vXzkpg2J4SpFbVHuLQynIwQ1KfLiOUxXEwfnNT-6HMES6c7NU2-5RZrCwHVIifAP78yrWKI1NelCLr5GLlsCNQCKTyl-4etkidP-ehw" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Example of stream starts per second, comparing week over week (red = current week, black = prior week)&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The SPS pattern is regular within each geographic region, with variations due to external influences like major regional holidays and events. &amp;nbsp;The regional SPS pattern is one cycle per day and oscillates in a rising and falling pattern. &amp;nbsp;The peaks occur in the evening and the troughs occur in the early morning hours. &amp;nbsp;On regional holidays, when people are off work and kids are home from school, we see increased viewing in the daytime hours, as our members have more free time to enjoy viewing a title on Netflix.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Because there is consistency in the streaming behaviors of our members, with a moderate amount of data we can establish reliable predictions on how many stream starts we should expect at any point of the week. &amp;nbsp;Deviations from the prediction are a powerful way to tell the entire company when there is a problem with the service. &amp;nbsp;We use these deviations to trigger alerts and help us understand when service has been fully restored.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Its simplicity allows SPS to be central to our internal vernacular. &amp;nbsp;Production problems are categorized as “SPS impacting” or “not SPS impacting,” indicating their severity. &amp;nbsp;Overall service availability is measured using expected versus actual SPS levels.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Deviation Detection Models&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;To maximize the power of SPS, we need reliable ways to find deviations in our actual stream starts relative to our expected stream starts. The following are a range of techniques that we have explored in detecting such deviations.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Static Thresholds&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;A common starting place when trying to detect change is to define a fixed boundary that characterizes normal behavior. This boundary can be described as a floor or ceiling which, if crossed, indicates a deviation from normal behavior. The simplicity of static thresholds makes them a popular choice when trying to detect a presence, or increase, in a signal. For example, detecting when there is an increase in CPU usage:&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="168px;" src="https://lh6.googleusercontent.com/IlOd2QkyA8DRocxt7S0RluBxoVj8RThchyf6xEUm2sbAggaSZvN5AhhlHIK3Eh6koRE_rGl4_AHFmAevgnJLtCCb3YZotUhWvoAtRgb-1q-zjYDX7ml4UaczF5oI7gaJNA" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Example where a static threshold could be used to help detect high CPU usage&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;However, static thresholds are insufficient in accurately capturing deviations in oscillating signals. For example, a static threshold would not be suitable for accurately detecting a drop in SPS due to its oscillating nature. &lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Exponential Smoothing&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Another technique that can be used to detect deviations is to use an &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Exponential_smoothing" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;exponential smoothing&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; function, such as exponential moving average, to compute an upper or lower threshold that bounds the original signal. These techniques assign exponentially decreasing weights as the observations get older. The benefit of this approach is that the bound is no longer static and can “move” with the input signal, as shown in the image below: &lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="175px;" src="https://lh6.googleusercontent.com/YBY2HqIDwb_avDhVs6xcclzHAVYaiqtXxA8aRhrAJCXkxkH4ycflDX02jGBRWU8z0N7zvMyf1KOCKjtkO-1NiBiofWKoGM_rvGtgwDiwIsaHDMU-vzBbSn14iZL-HbiU4A" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Example of data smoothing using moving average&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Another benefit is that exponential smoothing techniques take into account all past observations. In addition, exponential smoothing requires only the most recent observation to be kept. These aspects make it desirable for real-time alerting. &lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Double Exponential Smoothing &lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-569c5a70-4d1f-3294-d625-04829db6c6a6"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;To detect a change in SPS behavior, we use &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Exponential_smoothing#Double_exponential_smoothing" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Double Exponential Smoothing&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; (DES) to define an upper and lower boundary that captures the range of acceptable behavior. This technique includes a parameter that takes into account any trend in the data, which works well for following the oscillating trend in SPS. There are more advanced smoothing techniques, such as &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Exponential_smoothing#Triple_exponential_smoothing" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;triple exponential smoothing&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;, which also take into account seasonal trends. However, we do not use these techniques as we are interested in detecting a deviation in behavior over a short period of time which does not contain a pronounced seasonal trend.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Before creating a DES model one must first select values for the data smoothing factor and the trend smoothing factor. To visualize the effect these parameters have on DES, see this &lt;/span&gt;&lt;a href="http://jsxgraph.uni-bayreuth.de/wiki/index.php/Time_series_forecasting:_double_exponential_smoothing" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;interactive visualization&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;. The estimation of these parameters is crucial as they can greatly affect accuracy. While these parameters are typically determined by an individual's intuition or trial and error, we have experimented with data-driven approaches to automatically initialize them (motivated by Gardner [1]). We are able to apply those identified parameters to signals that share similar daily patterns and trends, for example SPS at the device level.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-569c5a70-4d24-6ea7-35cd-3c894787abcf"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;The image below shows an example where DES has been used to create a lower bound in an attempt to capture a deviation in normal behavior. Shortly after 18:00 there is a drop in SPS which crosses the DES threshold, alerting us to a potential issue with our service. By alerting on this drop, we can respond and take actions to restore service health.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="169px;" src="https://lh3.googleusercontent.com/e4HzGppYvRoAjVBKqbhuqfXJrmFWi7m2gH5OJGnGpbmGYtTZObSPj5LICoJ1C7Q7JXX8S2zCvEltZyOzDgQl-sGwfyzSdfnxZ9629nnNiwTA96o3xy5J5q-SHaLoe86vpg" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;While DES accurately identifies a drop in SPS, it is unable to predict when the system has recovered. In the example below, the sharp recovery of SPS at approximately 20:00 is not accurately modeled by DES causing it to underpredict and generate false alarms for a short period of time:&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="175px;" src="https://lh4.googleusercontent.com/w-Jmyy4FaH9TKhmO1966Gn0uRpJEC91pM8mG80luH1kGlalEL6Y7fEmWFrb5hP0Svu_zQiQ_vAoMJVLnpmjgOQMw8OojgzkzFbrO04zrqBRHQwjgURQDl9uGEM9LHj2KWg" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="624px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In spite of these shortcomings, DES has been an effective mechanism for detecting actionable deviations in SPS and other operational signals.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Advanced Techniques&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-569c5a70-4d1b-7fe5-bacd-92c3e9952e72"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-569c5a70-4d20-fe5a-33d7-095c753bcb2f"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;We have begun experimenting with Bayesian techniques in a stream mining setting to improve our ability to detect deviations in SPS. An example of this is Bayesian switchpoint detection and Markov Chain Monte Carlo (MCMC) [2]. See [3] for a concise introduction to using MCMC for anomaly detection and [4] for Bayesian switchpoint detection.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Bayesian techniques offer some advantages over DES in this setting. Those familiar with probabilistic programming techniques know that the underlying models can be fairly complex, but they can be made to be non-parametric by drawing parameters from uniform priors when possible. Using the posteriors from such calculations as priors for the next iteration allows us to create models that evolve as they receive more data.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Unfortunately, our experiments with Bayesian anomaly detection have revealed downsides compared to DES. MCMC is significantly more computationally intensive than DES, so much so that some are exploiting graphics cards in order to reduce the run time [5], a common technique for computationally intensive processes [6]. Furthermore the underlying model is not as easily interpreted by a human due to the complexity of the parameter interactions. These limitations, especially the performance related ones, restrict our ability to apply these techniques to a broad set of metrics in real time.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Bayesian techniques, however, do not solve the entire problem of data stream mining in a non-stationary setting. There exists a rich field of research on the subject of real-time data stream mining [7]. MCMC is by design a batch process, though it can be applied in a mini-batch fashion. Our current research is incorporating learnings from the stream-mining community in stream classification and drift detection. &lt;/span&gt;&lt;span style="background-color: transparent; color: #262626; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Additionally, our Data Science and Engineering team has been working on an approach based on Robust &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Principal_component_analysis" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Principal Component Analysis&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: #262626; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; (PCA) to deal with high cardinality data. &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We’re excited to see what comes from this research in 2015.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Conclusion&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We have streamlined production operations and improved availability by creating a single directional metric that indicates service health: SPS. We have experimented with and used a number of techniques to derive additional insight from this metric including threshold-based alerting, exponential and double exponential smoothing, and bayesian and stream mining approaches. SPS is the pulse of Netflix streaming, focusing the minds at Netflix on ensuring streaming is working when you want it to be.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;If you would like to join us in tackling these kinds of challenges, we are &lt;/span&gt;&lt;a href="http://jobs.netflix.com/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;hiring&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;!&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;by&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: &lt;/span&gt;&lt;a href="http://twitter.com/philip_pfo" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Philip Fisher-Ogden&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="https://twitter.com/chris_sanden" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Chris Sanden&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &amp;amp; &lt;/span&gt;&lt;a href="https://twitter.com/codyrioux" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Cody Rioux&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;References&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[1] &lt;/span&gt;&lt;a href="http://www.sciencedirect.com/science/article/pii/S0169207006000392" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://www.sciencedirect.com/science/article/pii/S0169207006000392&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[2] &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[3] &lt;/span&gt;&lt;a href="http://bugra.github.io/work/notes/2014-04-26/outlier-detection-markov-chain-monte-carlo-via-pymc/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://bugra.github.io/work/notes/2014-04-26/outlier-detection-markov-chain-monte-carlo-via-pymc/&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[4] &lt;/span&gt;&lt;a href="http://nbviewer.ipython.org/github/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/blob/master/Chapter1_Introduction/Chapter1.ipynb" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://nbviewer.ipython.org/github/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/blob/master/Chapter1_Introduction/Chapter1.ipynb&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[5] &lt;/span&gt;&lt;a href="http://www.quantstart.com/articles/Monte-Carlo-Simulations-In-CUDA-Barrier-Option-Pricing" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://www.quantstart.com/articles/Monte-Carlo-Simulations-In-CUDA-Barrier-Option-Pricing&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[6] &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/02/distributed-neural-networks-with-gpus.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://techblog.netflix.com/2014/02/distributed-neural-networks-with-gpus.html&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;[7] &lt;/span&gt;&lt;a href="http://moa.cms.waikato.ac.nz/" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;http://moa.cms.waikato.ac.nz/&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; &lt;/span&gt;&lt;/div&gt;&lt;br /&gt;</description>
      <link>http://techblog.netflix.com/2015/02/sps-pulse-of-netflix-streaming.html</link>
      <author>noreply@blogger.com (Philip Fisher-Ogden)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-1753308575508647705</guid>
      <pubDate>Wed, 28 Jan 2015 17:15:00 +0000</pubDate>
      <atom:updated>2015-01-28T12:16:22.809-08:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">JavaScript</category>
      <category domain="http://www.blogger.com/atom/ns#">React</category>
      <category domain="http://www.blogger.com/atom/ns#">UI</category>
      <category domain="http://www.blogger.com/atom/ns#">user interface</category>
      <title>Netflix Likes React</title>
      <description>&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;We are making big changes in the way we build the Netflix experience with Facebook’s &lt;/span&gt;&lt;a href="http://facebook.github.io/react/" style="line-height: 1.15; text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;React&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; library. Today, we will share our thoughts on what makes React so compelling and how it is evolving our approach to UI development.&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;/span&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;At the beginning of last year, Netflix UI engineers embarked on several ambitious projects to dramatically transform the user experience on our desktop and mobile platforms. Given a UI redesign of a scale similar to that undergone by &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2013/11/building-new-netflix-experience-for-tv.html" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;TVs and game consoles&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;, it was essential for us to re-evaluate our existing UI technology stack and to determine whether to explore new solutions. Do we have the right building blocks to create best-in-class single-page web applications? And what specific problems are we looking to solve?&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;/span&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;Much of our existing front-end infrastructure consists of hand-rolled components optimized for the current website and iOS application. Our decision to adopt React was influenced by a number of factors, most notably: 1) startup speed, 2) runtime performance, and 3) modularity.&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;/span&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Startup Speed&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;&lt;span id="docs-internal-guid-3c83804e-317c-e2c8-2571-d4274ddd0ed4"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;We want to reduce the initial load time needed to provide Netflix members with a much more seamless, dynamic way to browse and watch individualized content. However, we find that the cost to deliver and render the UI past login can be significant, especially on our mobile platforms where there is a lot more variability in network conditions.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;In addition to the time required to bootstrap our single-page application (i.e. download and process initial markup, scripts, stylesheets), we need to fetch data, including movie and show recommendations, to create a personalized experience. While network latency tends to be our biggest bottleneck, another major factor affecting startup performance is in the creation of DOM elements based on the parsed JSON payload containing the recommendations. Is there a way to minimize the network requests and processing time needed to render the home screen? We are looking for a hybrid solution that will allow us to deliver above-the-fold static markup on first load via server-side rendering, thereby reducing the tax incurred in the aforementioned startup operations, and at the same time enable dynamic elements in the UI through client-side scripting.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Runtime Performance&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;To build our most visually-rich cinematic Netflix experience to date for the website and iOS platforms, efficient UI rendering is critical. While there are fewer hardware constraints on desktops (compared to TVs and set-top boxes), expensive operations can still compromise UI responsiveness. In particular, DOM manipulations that result in reflows and repaints are especially detrimental to user experience.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Modularity&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;Our front-end infrastructure must support the numerous &lt;/span&gt;&lt;a href="http://techblog.netflix.com/2014/08/scaling-ab-testing-on-netflixcom-with_18.html" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;A/B tests&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; we run in terms of the ability to rapidly build out new features and designs that code-wise must co-exist with the control experience (against which the new experiences are tested). For example, we can have an A/B test that compares 9 different design variations in the UI, which could mean maintaining code for 10 views for the duration of the test. Upon completion of the test, it should be easy for us to productize the experience that performed the best for our members and clean up code for the 9 other views that did not.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Advantages of React&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;React stood out in that its defining features not only satisfied the criteria set forth above, but offered other advantages including being relatively easy to grasp and ability to opt-out, for example, to handle custom user interactions and rendering code. We were able to leverage the following features to improve our application’s initial load times, runtime performance, and overall scalability: 1) isomorphic JavaScript, 2) virtual DOM rendering, and 3) support for compositional design patterns.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Isomorphic JavaScript&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;React enabled us to build JavaScript UI code that can be executed in both server (e.g. Node.js) and client contexts. To improve our start up times, we built a hybrid application where the initial markup is rendered server-side and the resulting UI elements are subsequently manipulated as done in a single-page application. It was possible to achieve this with React as it can render without a live DOM, e.g. via &lt;/span&gt;&lt;a href="http://facebook.github.io/react/docs/top-level-api.html#react.rendertostring" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;React.renderToString&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;, or &lt;/span&gt;&lt;a href="http://facebook.github.io/react/docs/top-level-api.html#react.rendertostaticmarkup" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;React.renderToStaticMarkup&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;. Furthermore, the UI code written using the React library that is responsible for generating the markup could be shared with the client to handle cases where re-rendering was necessary.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;Virtual DOM&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;To reduce the penalties incurred by live DOM manipulation, React applies updates to a virtual DOM in pure JavaScript and then determines the minimal set of DOM operations necessary via a &lt;/span&gt;&lt;a href="http://calendar.perfplanet.com/2013/diff/" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;diff algorithm&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;. The diffing of virtual DOM trees is fast relative to actual DOM modifications, especially using today’s increasingly efficient JavaScript engines such as &lt;/span&gt;&lt;a href="http://trac.webkit.org/wiki/JavaScriptCore" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;WebKit’s Nitro&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; with JIT compilation. Furthermore, we can eliminate the need for traditional data binding, which has its own performance implications and scalability challenges.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="font-family: 'Trebuchet MS'; font-size: 17px; vertical-align: baseline; white-space: pre-wrap;"&gt;React Components and Mixins&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;React provides powerful &lt;/span&gt;&lt;a href="http://facebook.github.io/react/docs/component-api.html" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Component&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; and &lt;/span&gt;&lt;a href="http://facebook.github.io/react/docs/reusable-components.html#mixins" style="text-decoration: none;"&gt;&lt;span style="color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Mixin&lt;/span&gt;&lt;/a&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt; APIs that we relied on heavily to create reusable views, share common functionality, and patterns to facilitate feature extension. When A/B testing different designs, we can implement the views as separate React subcomponents that get rendered by a parent component depending on the user’s allocation in the test. Similarly, differences in behavioral logic can be abstracted into React mixins. Although it is possible to achieve modularity with a classical inheritance pattern, frequent changes in superclass interfaces to support new features affects existing subclasses and increases code fragility. React’s compositional pattern is ideal for overall maintenance and scalability of our front-end codebase as it isolates much of the A/B test code.&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;React has exceeded our requirements and enabled us to build a tremendous foundation on which to innovate the Netflix experience. Stay tuned in the coming months, as we will dive more deeply into how we are using React to transform traditional UI development!&lt;/span&gt;&lt;br /&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;By &lt;a href="https://www.linkedin.com/in/jordannakwok"&gt;Jordanna Kwok&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;</description>
      <link>http://techblog.netflix.com/2015/01/netflix-likes-react.html</link>
      <author>noreply@blogger.com (Sam Pan)</author>
    </item>
    <item>
      <guid isPermaLink="false">tag:blogger.com,1999:blog-725338818844296080.post-7124083338263777270</guid>
      <pubDate>Tue, 27 Jan 2015 17:34:00 +0000</pubDate>
      <atom:updated>2015-01-27T09:34:36.404-08:00</atom:updated>
      <category domain="http://www.blogger.com/atom/ns#">Cassandra</category>
      <category domain="http://www.blogger.com/atom/ns#">cloud architecture</category>
      <category domain="http://www.blogger.com/atom/ns#">high volume distributed systems</category>
      <category domain="http://www.blogger.com/atom/ns#">memcached</category>
      <category domain="http://www.blogger.com/atom/ns#">Netflix</category>
      <category domain="http://www.blogger.com/atom/ns#">NoSQL</category>
      <category domain="http://www.blogger.com/atom/ns#">Redis</category>
      <category domain="http://www.blogger.com/atom/ns#">scalability</category>
      <title>Netflix's Viewing Data: How We Know Where You Are in House of Cards</title>
      <description>&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt; text-align: left;"&gt;&lt;span style="font-family: Calibri; font-size: 16px; line-height: 1.15; white-space: pre-wrap;"&gt;Over the past 7 years, Netflix streaming has expanded from thousands of members watching occasionally to millions of members watching over two billion hours every month. &amp;nbsp;Each time a member starts to watch a movie or TV episode, a “view” is created in our data systems and a collection of events describing that view is gathered. &amp;nbsp;Given that viewing is what members spend most of their time doing on Netflix, having a robust and scalable architecture to manage and process this data is critical to the success of our business. &amp;nbsp;In this post we’ll describe what works and what breaks in an architecture that processes billions of viewing-related events per day.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Use Cases&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;By focusing on the minimum viable set of use cases, rather than building a generic all-encompassing solution, we have been able to build a simple architecture that scales. &amp;nbsp;Netflix’s viewing data architecture is designed for a variety of use cases, ranging from user experiences to data analytics. &amp;nbsp;The following are three key use cases, all of which affect the user experience:&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;What titles have I watched?&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Our system needs to know each member’s entire viewing history for as long as they are subscribed. &amp;nbsp;This data feeds the recommendation algorithms so that a member can find a title for whatever mood they’re in. &amp;nbsp;It also feeds the “recent titles you’ve watched” row in the UI. &amp;nbsp;What gets watched provides key metrics for the business to measure member engagement and make informed product and content decisions.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Where did I leave off in a given title?&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;For each movie or TV episode that a member views, Netflix records how much was watched and where the viewer left off. &amp;nbsp;&amp;nbsp;This enables members to continue watching any movie or TV show on the same or another device.&lt;/span&gt;&lt;/div&gt;&lt;h2 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 17px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;What else is being watched on my account right now?&lt;/span&gt;&lt;/h2&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Sharing an account with other family members usually means everyone gets to enjoy what they like when they’d like. &amp;nbsp;It also means a member may have to have that hard conversation about who has to stop watching if they’ve hit their account’s concurrent screens limit. &amp;nbsp;To support this use case, Netflix’s viewing data system gathers periodic signals throughout each view to determine whether a member is or isn’t still watching.&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Current Architecture&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Our current architecture evolved from an earlier monolithic database-backed application (see &lt;/span&gt;&lt;a href="http://www.infoq.com/presentations/scalable-resilient-systems" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;this QCon talk&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; or &lt;/span&gt;&lt;a href="http://www.slideshare.net/PhilipFisherOgden/netflix-viewing-data-architecture-evolution-qcon-2014" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;slideshare&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; for the detailed history). &amp;nbsp;When it was designed, the primary requirements were that it must serve the member-facing use cases with low latency and it should be able to handle a rapidly expanding set of data coming from millions of Netflix streaming devices. &amp;nbsp;Through incremental improvements over 3+ years, we’ve been able to scale this to handle low billions of events per day.&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Current Architecture Diagram&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="347px;" src="https://lh5.googleusercontent.com/3k8YrbpJNHxVALCtNjOO7jczkjMbKIPQcg5pv0FN4Yjgup5l-t4Eeqeco3g-a2lAqGbcvTQx_wwByK-mZMqaZlI-8NRK22vuhz0EUwgh3lFJsGDCzrFdiTlfFE2WIh7nbg" style="-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);" width="618px;" /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;The current architecture’s primary interface is the viewing service, which is segmented into a stateful and stateless tier. &amp;nbsp;The stateful tier has the latest data for all active views stored in memory. &amp;nbsp;Data is partitioned into N stateful nodes by a simple mod N of the member’s account id. &amp;nbsp;When stateful nodes come online they go through a slot selection process to determine which data partition will belong to them. &amp;nbsp;Cassandra is the primary data store for all persistent data. &amp;nbsp;Memcached is layered on top of Cassandra as a guaranteed low latency read path for materialized, but possibly stale, views of the data.&lt;/span&gt;&lt;/div&gt;&lt;b id="docs-internal-guid-ed0f69a2-2c64-92c7-8877-f6be741f2efc" style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We started with a stateful architecture design that favored consistency over availability in the face of network partitions (for background, see the &lt;/span&gt;&lt;a href="http://en.wikipedia.org/wiki/CAP_theorem" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;CAP theorem&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;). &amp;nbsp;At that time, we thought that accurate data was better than stale or no data. &amp;nbsp;Also, we were pioneering running Cassandra and memcached in the cloud &lt;/span&gt;&lt;span style="background-color: white; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;so starting with a stateful solution allowed us to mitigate risk of failure for those components. &amp;nbsp;The biggest downside of this approach was that failure of &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;a single stateful node would prevent 1/nth of the member base from writing to or reading from their viewing history.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;After experiencing outages due to this design, we reworked parts of the system to gracefully degrade and provide limited availability when failures happened. &amp;nbsp;The stateless tier was added later as a pass-through to external data stores. This improved system availability by providing stale data as a fallback mechanism when a stateful node was unreachable.&lt;/span&gt;&lt;/div&gt;&lt;h3 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 8pt;"&gt;&lt;span style="background-color: transparent; color: #666666; font-family: 'Trebuchet MS'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Breaking Points&lt;/span&gt;&lt;/h3&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Our stateful tier uses a simple sharding technique (account id mod N) that is subject to hot spots, as Netflix viewing usage is not evenly distributed across all current members. &amp;nbsp;Our Cassandra layer is not subject to these hot spots, as it uses consistent hashing with virtual nodes to partition the data. &amp;nbsp;Additionally, when we moved from a single AWS region to running in multiple AWS regions, we had to build a custom mechanism to communicate the state between stateful tiers in different regions. &amp;nbsp;This added significant, undesirable complexity to our overall system.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We created the viewing service to encapsulate the domain of viewing data collection, processing, and providing. &amp;nbsp;As that system evolved to include more functionality and various read/write/update use cases, we identified multiple distinct components that were combined into this single unified service. &amp;nbsp;These components would be easier to develop, test, debug, deploy, and operate if they were extracted into their own services.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Memcached offers superb throughput and latency characteristics, but isn’t well suited for our use case. &amp;nbsp;To update the data in memcached, we read the latest data, append a new view entry (if none exists for that movie) or modify an existing entry (moving it to the front of the time-ordered list), and then write the updated data back to memcached. &amp;nbsp;We use an eventually consistent approach to handling multiple writers, accepting that an inconsistent write may happen but will get corrected soon after due to a short cache entry TTL and a periodic cache refresh. &amp;nbsp;For the caching layer, using a technology that natively supports first class data types and operations like append would better meet our needs.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;We created the stateful tier because we wanted the benefit of memory speed for our highest volume read/write use cases. &amp;nbsp;Cassandra was in its pre-1.0 versions and wasn’t running on SSDs in AWS. &amp;nbsp;We thought we could design a simple but robust distributed stateful system exactly suited to our needs, but ended up with a complex solution that was less robust than mature open source technologies. &amp;nbsp;Rather than solve the hard distributed systems problems ourselves, we’d rather build on top of proven solutions like Cassandra, allowing us to focus our attention on solving the problems in our viewing data domain.&lt;/span&gt;&lt;/div&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: 'Trebuchet MS'; font-size: 21px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Next Generation Architecture&lt;/span&gt;&lt;/h1&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;In order to scale to the next order of magnitude, we’re rethinking the fundamentals of our architecture. &amp;nbsp;The principles guiding this redesign are:&lt;/span&gt;&lt;/div&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Availability over consistency - &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;our primary use cases can tolerate eventually consistent data, so design from the start favoring availability rather than strong consistency in the face of failures.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;a href="http://martinfowler.com/articles/microservices.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Microservices&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; - Components that were combined together in the stateful architecture should be separated out into services (&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;components as services&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;).&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Components are defined according to their primary purpose - either collection, processing, or data providing.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Delegate responsibility for state management to the persistence tiers, keeping the application tiers stateless.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Decouple communication between components by using signals sent through an event queue.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: disc; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;a href="http://martinfowler.com/bliki/PolyglotPersistence.html" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Polyglot persistence&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; - Use multiple persistence technologies to leverage the strengths of each solution.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Achieve &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;flexibility + performance&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt; at the cost of increased &lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;complexity&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: bold; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Use Cassandra for very high volume, low latency writes. &amp;nbsp;A tailored data model and tuned configuration enables low latency for medium volume reads.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;ul style="margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;li dir="ltr" style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; list-style-type: circle; text-decoration: none; vertical-align: baseline;"&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;Use Redis for very high volume, low latency reads. &amp;nbsp;Redis’ first-class data type support should support writes better than how we did read-modify-writes in memcached.&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Calibri; font-size: 16px; vertical-align: baseline; white-space: pre-wrap;"&gt;Our next generation architecture will be made up of these building blocks:&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="color: black; font-family: Calibri; font-size: 16px; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;/span&gt;&lt;/div&gt;&lt;h1 dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 10pt;"&gt;&lt;span style="color: black; font-family: Calibri; font-size: 16px; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;img height="309px;" src="https://lh5.googleusercontent.com/W4R6Xo6t4HtxNJ7gjgC0JVIy37RcFMm2dVRGwSt8S0CCH-v3qk8cgHFS-dArop3L_SHgzltye6GKhRQXXYDmff0Zzz7OO81tzTKN4bFort1vGHF9pn_kM8sXYRfDsmqNAA" style="-webkit-transform: rotate(0rad); border: none; transform: rotate(0rad);" width="502px;" /&gt;&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;span style="color: black; font-family: Calibri; font-size: 16px; font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style="color: black; font-family: Calibri; font-size: 16px; line-height: 1.15; vertical-align: baseline; white-space: pre-wrap;"&gt;Re-architecting a critical system to scale to the next order of magnitude is a hard problem, requiring many months of development, testing, proving out at scale, and migrating off of the previous architecture. &amp;nbsp;Guided by these architectural principles, we’re confident that the next generation that we are building will give Netflix a strong foundation to meet the needs of our massive and growing scale, enabling us to delight our global audience. &amp;nbsp;&lt;/span&gt;&lt;span style="font-family: Calibri; font-size: 16px; line-height: 1.15; vertical-align: baseline; white-space: pre-wrap;"&gt;We are in the early stages of this effort, so if you are interested in helping, we are actively &lt;a href="http://jobs.netflix.com/"&gt;hiring&lt;/a&gt; &lt;/span&gt;&lt;span style="font-family: Calibri; font-size: 16px; line-height: 1.15; vertical-align: baseline; white-space: pre-wrap;"&gt;for this work. &amp;nbsp;&amp;nbsp;In the meantime, we’ll follow up this post with a future one focused on the new architecture.&lt;/span&gt;&lt;br /&gt;&lt;b style="font-weight: normal;"&gt;&lt;br /&gt;&lt;/b&gt;&lt;br /&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 13px; font-style: italic; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;by&lt;/span&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;: &lt;/span&gt;&lt;a href="http://twitter.com/philip_pfo" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Philip Fisher-Ogden&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://twitter.com/zimmermatt" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;Matt Zimmer&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, &lt;/span&gt;&lt;a href="http://www.linkedin.com/in/jameskojo" style="text-decoration: none;"&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;James Kojo&lt;/span&gt;&lt;/a&gt;&lt;span style="background-color: transparent; color: black; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;"&gt;, and &lt;/span&gt;&lt;span style="background-color: transparent; color: #1155cc; font-family: Calibri; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;"&gt;&lt;a href="http://www.linkedin.com/pub/jinhua-li/44/307/8" style="text-decoration: none;"&gt;Jinhua Li&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;div dir="ltr" style="line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;"&gt;&lt;br /&gt;&lt;/div&gt;</description>
      <link>http://techblog.netflix.com/2015/01/netflixs-viewing-data-how-we-know-where.html</link>
      <author>noreply@blogger.com (Philip Fisher-Ogden)</author>
    </item>
  </channel>
</rss>
